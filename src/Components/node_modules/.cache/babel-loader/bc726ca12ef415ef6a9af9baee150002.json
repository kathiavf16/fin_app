{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"renderColumnContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderColumnContextMenu.default;\n  }\n});\nObject.defineProperty(exports, \"renderRowContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderRowContextMenu.default;\n  }\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _detectUa = require(\"../../../detect-ua\");\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _renderColumnContextMenu = _interopRequireDefault(require(\"./renderColumnContextMenu\"));\n\nvar _renderRowContextMenu = _interopRequireDefault(require(\"./renderRowContextMenu\"));\n\nvar _default = function _default(props, computedProps, computedPropsRef) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      columnContextMenuProps = _useState2[0],\n      setColumnContextMenuProps = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      rowContextMenuProps = _useState4[0],\n      setRowContextMenuProps = _useState4[1];\n\n  var getConstrainRegion = function getConstrainRegion(computedProps) {\n    if (!computedProps.parentComputedProps) {\n      return document.documentElement;\n    }\n\n    var node = computedProps.getDOMNode();\n    node = node ? node.querySelector('.InovuaReactDataGrid__virtual-list') || node : node;\n    return node;\n  };\n\n  var getColumnMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.columnContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var getRowMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.rowContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var preventIEMenuCloseRef = (0, _react.useRef)(false);\n  var columnContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getColumnMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var rowContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getRowMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var hideColumnContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      var columnContextMenuOnHide = columnContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof columnContextMenuOnHide == 'function') {\n        columnContextMenuOnHide();\n      }\n\n      computedProps.setColumnContextMenuProps(null);\n    }\n  }, []);\n  var hideRowContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      var rowContextMenuOnHide = rowContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof rowContextMenuOnHide == 'function') {\n        rowContextMenuOnHide();\n      }\n\n      computedProps.setRowContextMenuProps(null);\n    }\n  }, []);\n  var showColumnContextMenu = (0, _react.useCallback)(function (alignTo, cellProps, cellInstance, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      computedProps.hideColumnContextMenu();\n      return;\n    }\n\n    columnContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getColumnMenuConstrainTo,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideColumnFilterContextMenu) {\n      computedProps.hideColumnFilterContextMenu();\n    }\n\n    computedProps.setColumnContextMenuProps(cellProps);\n  }, []);\n  var getMenuAvailableHeight = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return 0;\n    }\n\n    var filtersHeight = 0;\n\n    if (computedProps.computedIsFilterable) {\n      var filterNode = computedProps.getDOMNode().querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n      if (filterNode) {\n        filtersHeight = filterNode.offsetHeight;\n      }\n    }\n\n    var size = computedProps.initialProps.parentComputedProps ? computedProps.initialProps.parentComputedProps.size : computedProps.size;\n    var result = size ? size.height - 5 + filtersHeight : 0;\n    return result;\n  }, []);\n  var onRowContextMenu = (0, _react.useCallback)(function (rowProps, event) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var initialProps = computedProps.initialProps;\n\n    if (initialProps.onRowContextMenu) {\n      initialProps.onRowContextMenu(rowProps, event);\n    }\n\n    if (!initialProps.renderRowContextMenu) {\n      return;\n    }\n\n    event.preventDefault();\n    var cellProps = event.nativeEvent ? event.nativeEvent.__cellProps : undefined;\n\n    var alignTo = _region.default.from(event);\n\n    alignTo.shift({\n      top: -global.scrollY,\n      left: -global.scrollX\n    });\n    showRowContextMenu(alignTo, rowProps, cellProps, function () {});\n  }, []);\n  var showRowContextMenu = (0, _react.useCallback)(function (alignTo, rowProps, cellProps, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      computedProps.hideRowContextMenu();\n      return;\n    }\n\n    rowContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getRowMenuConstrainTo,\n      cellProps: cellProps,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideRowFilterContextMenu) {\n      computedProps.hideRowFilterContextMenu();\n    }\n\n    computedProps.setRowContextMenuProps(rowProps);\n  }, []);\n  return {\n    onRowContextMenu: onRowContextMenu,\n    getMenuAvailableHeight: getMenuAvailableHeight,\n    showRowContextMenu: showRowContextMenu,\n    showColumnContextMenu: showColumnContextMenu,\n    hideColumnContextMenu: hideColumnContextMenu,\n    hideRowContextMenu: hideRowContextMenu,\n    columnContextMenuProps: columnContextMenuProps,\n    rowContextMenuProps: rowContextMenuProps,\n    columnContextMenuInfoRef: columnContextMenuInfoRef,\n    rowContextMenuInfoRef: rowContextMenuInfoRef,\n    setColumnContextMenuProps: setColumnContextMenuProps,\n    setRowContextMenuProps: setRowContextMenuProps,\n    preventIEMenuCloseRef: preventIEMenuCloseRef\n  };\n};\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/plugins/menus/useMenus/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","enumerable","get","_renderColumnContextMenu","default","_renderRowContextMenu","_slicedToArray2","_react","_detectUa","_region","_default","props","computedProps","computedPropsRef","_useState","useState","_useState2","columnContextMenuProps","setColumnContextMenuProps","_useState3","_useState4","rowContextMenuProps","setRowContextMenuProps","getConstrainRegion","parentComputedProps","document","documentElement","node","getDOMNode","querySelector","getColumnMenuConstrainTo","useCallback","current","initialProps","columnContextMenuConstrainTo","getRowMenuConstrainTo","rowContextMenuConstrainTo","preventIEMenuCloseRef","useRef","columnContextMenuInfoRef","menuAlignTo","getMenuConstrainTo","menuOnHide","rowContextMenuInfoRef","hideColumnContextMenu","IS_IE","columnContextMenuOnHide","hideRowContextMenu","rowContextMenuOnHide","showColumnContextMenu","alignTo","cellProps","cellInstance","onHide","hideColumnFilterContextMenu","getMenuAvailableHeight","filtersHeight","computedIsFilterable","filterNode","offsetHeight","size","result","height","onRowContextMenu","rowProps","event","renderRowContextMenu","preventDefault","nativeEvent","__cellProps","undefined","from","shift","top","global","scrollY","left","scrollX","showRowContextMenu","hideRowFilterContextMenu"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"renderColumnContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderColumnContextMenu.default;\n  }\n});\nObject.defineProperty(exports, \"renderRowContextMenu\", {\n  enumerable: true,\n  get: function get() {\n    return _renderRowContextMenu.default;\n  }\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _detectUa = require(\"../../../detect-ua\");\n\nvar _region = _interopRequireDefault(require(\"../../../packages/region\"));\n\nvar _renderColumnContextMenu = _interopRequireDefault(require(\"./renderColumnContextMenu\"));\n\nvar _renderRowContextMenu = _interopRequireDefault(require(\"./renderRowContextMenu\"));\n\nvar _default = function _default(props, computedProps, computedPropsRef) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      columnContextMenuProps = _useState2[0],\n      setColumnContextMenuProps = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      rowContextMenuProps = _useState4[0],\n      setRowContextMenuProps = _useState4[1];\n\n  var getConstrainRegion = function getConstrainRegion(computedProps) {\n    if (!computedProps.parentComputedProps) {\n      return document.documentElement;\n    }\n\n    var node = computedProps.getDOMNode();\n    node = node ? node.querySelector('.InovuaReactDataGrid__virtual-list') || node : node;\n    return node;\n  };\n\n  var getColumnMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.columnContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var getRowMenuConstrainTo = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    return computedProps.initialProps.rowContextMenuConstrainTo || getConstrainRegion(computedProps);\n  }, []);\n  var preventIEMenuCloseRef = (0, _react.useRef)(false);\n  var columnContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getColumnMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var rowContextMenuInfoRef = (0, _react.useRef)({\n    menuAlignTo: null,\n    getMenuConstrainTo: getRowMenuConstrainTo,\n    menuOnHide: function menuOnHide() {}\n  });\n  var hideColumnContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      var columnContextMenuOnHide = columnContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof columnContextMenuOnHide == 'function') {\n        columnContextMenuOnHide();\n      }\n\n      computedProps.setColumnContextMenuProps(null);\n    }\n  }, []);\n  var hideRowContextMenu = (0, _react.useCallback)(function () {\n    if (_detectUa.IS_IE && preventIEMenuCloseRef.current) {\n      return;\n    }\n\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      var rowContextMenuOnHide = rowContextMenuInfoRef.current.menuOnHide;\n\n      if (typeof rowContextMenuOnHide == 'function') {\n        rowContextMenuOnHide();\n      }\n\n      computedProps.setRowContextMenuProps(null);\n    }\n  }, []);\n  var showColumnContextMenu = (0, _react.useCallback)(function (alignTo, cellProps, cellInstance, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.columnContextMenuProps) {\n      computedProps.hideColumnContextMenu();\n      return;\n    }\n\n    columnContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getColumnMenuConstrainTo,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideColumnFilterContextMenu) {\n      computedProps.hideColumnFilterContextMenu();\n    }\n\n    computedProps.setColumnContextMenuProps(cellProps);\n  }, []);\n  var getMenuAvailableHeight = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return 0;\n    }\n\n    var filtersHeight = 0;\n\n    if (computedProps.computedIsFilterable) {\n      var filterNode = computedProps.getDOMNode().querySelector('.InovuaReactDataGrid__column-header__filter-wrapper');\n\n      if (filterNode) {\n        filtersHeight = filterNode.offsetHeight;\n      }\n    }\n\n    var size = computedProps.initialProps.parentComputedProps ? computedProps.initialProps.parentComputedProps.size : computedProps.size;\n    var result = size ? size.height - 5 + filtersHeight : 0;\n    return result;\n  }, []);\n  var onRowContextMenu = (0, _react.useCallback)(function (rowProps, event) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    var initialProps = computedProps.initialProps;\n\n    if (initialProps.onRowContextMenu) {\n      initialProps.onRowContextMenu(rowProps, event);\n    }\n\n    if (!initialProps.renderRowContextMenu) {\n      return;\n    }\n\n    event.preventDefault();\n    var cellProps = event.nativeEvent ? event.nativeEvent.__cellProps : undefined;\n\n    var alignTo = _region.default.from(event);\n\n    alignTo.shift({\n      top: -global.scrollY,\n      left: -global.scrollX\n    });\n    showRowContextMenu(alignTo, rowProps, cellProps, function () {});\n  }, []);\n  var showRowContextMenu = (0, _react.useCallback)(function (alignTo, rowProps, cellProps, onHide) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (computedProps.rowContextMenuProps) {\n      computedProps.hideRowContextMenu();\n      return;\n    }\n\n    rowContextMenuInfoRef.current = {\n      menuAlignTo: alignTo,\n      getMenuConstrainTo: getRowMenuConstrainTo,\n      cellProps: cellProps,\n      menuOnHide: onHide\n    };\n\n    if (computedProps.hideRowFilterContextMenu) {\n      computedProps.hideRowFilterContextMenu();\n    }\n\n    computedProps.setRowContextMenuProps(rowProps);\n  }, []);\n  return {\n    onRowContextMenu: onRowContextMenu,\n    getMenuAvailableHeight: getMenuAvailableHeight,\n    showRowContextMenu: showRowContextMenu,\n    showColumnContextMenu: showColumnContextMenu,\n    hideColumnContextMenu: hideColumnContextMenu,\n    hideRowContextMenu: hideRowContextMenu,\n    columnContextMenuProps: columnContextMenuProps,\n    rowContextMenuProps: rowContextMenuProps,\n    columnContextMenuInfoRef: columnContextMenuInfoRef,\n    rowContextMenuInfoRef: rowContextMenuInfoRef,\n    setColumnContextMenuProps: setColumnContextMenuProps,\n    setRowContextMenuProps: setRowContextMenuProps,\n    preventIEMenuCloseRef: preventIEMenuCloseRef\n  };\n};\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}