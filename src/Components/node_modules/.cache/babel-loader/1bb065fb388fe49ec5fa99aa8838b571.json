{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.REMAINING_ITEMS = exports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _cleanProps = _interopRequireDefault(require(\"../../../common/cleanProps\"));\n\nvar _NotifyResize = require(\"../../NotifyResize\");\n\nvar _throttle = _interopRequireDefault(require(\"../../../common/throttle\"));\n\nvar _containsNode = _interopRequireDefault(require(\"../../../common/containsNode\"));\n\nvar _TextInput = _interopRequireDefault(require(\"./TextInput\"));\n\nvar _Value = _interopRequireDefault(require(\"./Value\"));\n\nvar _ClearButton = _interopRequireDefault(require(\"./ClearButton\"));\n\nvar _ToggleButton = _interopRequireDefault(require(\"./ToggleButton\"));\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _Icons = require(\"./Icons\");\n\nvar _shouldComponentUpdate2 = _interopRequireDefault(require(\"./utils/shouldComponentUpdate\"));\n\nvar _getRootClassName = _interopRequireDefault(require(\"./utils/getRootClassName\"));\n\nvar _getListProps2 = _interopRequireDefault(require(\"./utils/getListProps\"));\n\nvar _getValueProps2 = _interopRequireDefault(require(\"./utils/getValueProps\"));\n\nvar _getDataProp = _interopRequireDefault(require(\"./utils/getDataProp\"));\n\nvar _getNewMultipleValue = _interopRequireDefault(require(\"./utils/getNewMultipleValue\"));\n\nvar _getNewSingleValue = _interopRequireDefault(require(\"./utils/getNewSingleValue\"));\n\nvar _findItemIndex = _interopRequireDefault(require(\"./utils/findItemIndex\"));\n\nvar _filterByValue = _interopRequireDefault(require(\"./utils/filterByValue\"));\n\nvar _filterByText = _interopRequireDefault(require(\"./utils/filterByText\"));\n\nvar _deselectValue = _interopRequireDefault(require(\"./utils/deselectValue\"));\n\nvar _getNewActiveTagOnRemove = _interopRequireDefault(require(\"./utils/getNewActiveTagOnRemove\"));\n\nvar _getNextItem = _interopRequireDefault(require(\"./utils/getNextItem\"));\n\nvar _groupItems = _interopRequireDefault(require(\"./utils/groupItems\"));\n\nvar _getValueMap = _interopRequireDefault(require(\"./utils/getValueMap\"));\n\nvar _getGroups = _interopRequireDefault(require(\"./utils/getGroups\"));\n\nvar _registerHideOnClickOutsideEventListener = _interopRequireDefault(require(\"../../../common/registerHideOnClickOutsideEventListener\"));\n\nvar _PaginationToolbar = require(\"../../PaginationToolbar\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar REMAINING_ITEMS = 'REMAINING_ITEMS';\nexports.REMAINING_ITEMS = REMAINING_ITEMS;\nvar emptyObject = {};\n\nvar InovuaComboBox = function (_Component) {\n  (0, _inherits2.default)(InovuaComboBox, _Component);\n\n  var _super = _createSuper(InovuaComboBox);\n\n  function InovuaComboBox(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaComboBox);\n    _this = _super.call(this, props);\n\n    _this.refTools = function (tools) {\n      _this.toolsNode = tools;\n    };\n\n    _this.state = {\n      loading: props.defaultLoading || !!(props.dataSource && props.dataSource.then),\n      value: props.defaultValue,\n      valueMap: {},\n      text: props.defaultText,\n      activeTag: props.defaultActiveTag,\n      activeItem: props.defaultActiveItem || !props.multiple && props.defaultValue,\n      expanded: props.defaultExpanded,\n      toolsSize: {\n        width: 0,\n        height: 0\n      },\n      over: false,\n      focus: false\n    };\n    _this.getData = _this.getData.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleItemClick = _this.handleItemClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTextChange = _this.handleTextChange.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTextInputClick = _this.handleTextInputClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTagClick = _this.handleTagClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleRemoveTag = _this.handleRemoveTag.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboClick = _this.handleComboClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboKeyDown = _this.handleComboKeyDown.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboFocus = _this.handleComboFocus.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboBlur = _this.handleComboBlur.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getComboNode = _this.getComboNode.bind((0, _assertThisInitialized2.default)(_this));\n    _this.clear = _this.clear.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleMouseEnter = _this.handleMouseEnter.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleMouseLeave = _this.handleMouseLeave.bind((0, _assertThisInitialized2.default)(_this));\n    _this.toggleExpand = _this.toggleExpand.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleToolsSize = _this.handleToolsSize.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleRemoveMultipleTag = _this.handleRemoveMultipleTag.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleListScrollBottom = _this.handleListScrollBottom.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleDelete = _this.handleDelete.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getListNode = _this.getListNode.bind((0, _assertThisInitialized2.default)(_this));\n\n    _this.updateGetIdProperty();\n\n    _this.updateGetDisplayProperty();\n\n    _this.updateGetFilterProperty();\n\n    _this.addTextInputRef = function (ref) {\n      _this.textInput = ref;\n    };\n\n    _this.addRootRef = function (ref) {\n      _this.comboNode = ref;\n    };\n\n    _this.addListRef = function (ref) {\n      _this.listNode = ref;\n    };\n\n    _this.setActiveItem = (0, _throttle.default)(_this.setActiveItem, 16);\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaComboBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      if (this.state.activeItem && this.state.activeItemIndex == null) {\n        this.setState({\n          activeItemIndex: this.getItemIndexById(this.state.activeItem)\n        });\n      }\n\n      if (!this.isRemoteFilter()) {\n        this.doFilter();\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _shouldComponentUpdate2.default)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.dataSource !== this.props.dataSource) {\n        this.loadDataSource(nextProps.dataSource, nextProps);\n      }\n\n      if (this.props.idProperty !== nextProps.idProperty) {\n        this.updateGetIdProperty();\n      }\n\n      if (this.props.displayProperty !== nextProps.displayProperty) {\n        this.updateGetDisplayProperty();\n      }\n\n      if (this.props.filterProperty !== nextProps.filterProperty) {\n        this.updateGetFilterProperty();\n      }\n\n      if (this.isExpandedControlled() && this.props.expanded !== nextProps.expanded) {\n        this.onExpand();\n      }\n\n      if (this.props.groupProperty !== nextProps.groupProperty) {\n        this.updateGroups({\n          groupProperty: nextProps.groupProperty\n        });\n      }\n\n      if (this.isActiveItemControlled() && this.props.changeValueOnNavigation && !this.props.multiple && this.props.activeItem !== nextProps.activeItem) {\n        this.setValue(nextProps.activeItem, {\n          action: 'navigate'\n        });\n      }\n\n      if (this.isExpandedControlled() && !this.props.expanded && nextProps.expanded) {\n        this.loadLazyDataSource({\n          action: 'expand',\n          text: ''\n        });\n      }\n\n      if (this.isTextControled() && this.props.text !== nextProps.text) {\n        this.onTextUpdate(nextProps.text);\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      if (!this.props.lazyDataSource) {\n        this.loadDataSource(this.props.dataSource);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props,\n          state = this.state;\n      var textInput = this.renderTextInput();\n      var className = (0, _getRootClassName.default)({\n        props: props,\n        state: state,\n        computed: {\n          value: this.getValue()\n        }\n      });\n      var expanded = this.getExpanded();\n      var items = this.getSelectedItems();\n      var groupedItems = this.groupedItems = this.getGroupedItems(this.getSelectedItems());\n      this.areItemsGrouped = this.groupedItems && this.groupedItems.remainingItems && this.groupedItems.remainingItems.length;\n      var style = this.getRootStyle();\n      var filteredData = this.getFilteredData();\n      var text = this.getText();\n      this.isNewCustomTagValid = (!filteredData || filteredData.length === 0) && !!text && props.allowCustomTagCreation;\n      return _react.default.createElement(\"div\", (0, _extends2.default)({}, (0, _cleanProps.default)(props, InovuaComboBox.propTypes), {\n        onClick: this.handleComboClick,\n        onMouseDown: this.handleComboMouseDown,\n        onKeyDown: this.handleComboKeyDown,\n        onFocus: this.handleComboFocus,\n        onBlur: this.handleComboBlur,\n        className: className,\n        style: style,\n        ref: this.addRootRef,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave\n      }), _react.default.createElement(_Value.default, (0, _extends2.default)({}, this.getValueProps({\n        items: items,\n        groupedItems: groupedItems\n      }), {\n        textInput: textInput,\n        toolsSize: state.toolsSize\n      })), _react.default.createElement(\"div\", {\n        className: \"\".concat(props.rootClassName, \"__tools\"),\n        ref: this.refTools\n      }, this.renderSpinner(), this.renderClearIcon(), this.renderToggleIcon(), this.props.tagEllipsis && _react.default.createElement(_NotifyResize.NotifyResize, {\n        notifyOnMount: true,\n        onResize: this.handleToolsSize\n      })), expanded && this.renderList());\n    }\n  }, {\n    key: \"getRootStyle\",\n    value: function getRootStyle() {\n      var props = this.props,\n          state = this.state;\n\n      var style = _objectSpread({}, props.style);\n\n      if (props.borderRadius) {\n        style.borderRadius = props.borderRadius;\n      }\n\n      if (props.padding) {\n        style.padding = props.padding;\n      }\n\n      if (props.border) {\n        style.border = props.border;\n      }\n\n      if (props.background) {\n        style.background = props.background;\n      }\n\n      if (!this.getValue() && props.emptyStyle) {\n        style = _objectSpread(_objectSpread({}, style), props.emptyStyle);\n      }\n\n      if (props.disabledStyle && props.disabled) {\n        style = _objectSpread(_objectSpread({}, style), props.disabledStyle);\n      }\n\n      if (state.focus && props.focusedStyle) {\n        style = _objectSpread(_objectSpread({}, style), props.focusedStyle);\n      }\n\n      return style;\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList() {\n      var listProps = this.getListProps();\n      var result;\n\n      if (typeof this.props.renderList === 'function') {\n        result = this.props.renderList({\n          domProps: listProps,\n          items: this.getFilteredData()\n        });\n      }\n\n      if (result === undefined) {\n        result = _react.default.createElement(_List.default, listProps);\n      }\n\n      if (typeof this.props.renderListComponent === 'function') {\n        var res = this.props.renderListComponent(result);\n\n        if ((0, _typeof2.default)(res) !== undefined) {\n          return res;\n        }\n\n        result = res;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"renderClearIcon\",\n    value: function renderClearIcon() {\n      var props = this.props,\n          state = this.state;\n      var searchable = props.searchable;\n      var text = this.getText();\n      var value = this.getValue();\n      var showClearIcon = (text || value != null) && props.clearIcon;\n\n      if (props.showClearIconOnMouseOver) {\n        if (!state.over) {\n          showClearIcon = false;\n        }\n      }\n\n      if (searchable === false) {\n        showClearIcon = false;\n      }\n\n      if (!showClearIcon) {\n        return null;\n      }\n\n      var clearButton = _react.default.createElement(_ClearButton.default, {\n        onClear: this.clear,\n        closeIcon: props.clearIcon,\n        className: \"\".concat(props.rootClassName, \"__clear-icon\")\n      });\n\n      return clearButton;\n    }\n  }, {\n    key: \"renderToggleIcon\",\n    value: function renderToggleIcon() {\n      var props = this.props;\n\n      if (!props.toggleIcon) {\n        return null;\n      }\n\n      return _react.default.createElement(_ToggleButton.default, {\n        onToggle: this.toggleExpand,\n        className: \"\".concat(props.rootClassName, \"__toggle-icon\"),\n        toggleIcon: props.toggleIcon,\n        expanded: this.getExpanded()\n      });\n    }\n  }, {\n    key: \"renderTextInput\",\n    value: function renderTextInput() {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      var text = this.getText();\n      var value = text;\n\n      if (!this.props.multiple) {\n        if (text == null) {\n          value = this.getValue() == null ? '' : this.getItemLabel();\n        } else {\n          value = text;\n        }\n      }\n\n      var data = this.getFilteredData();\n      var suggestion = null;\n\n      if (this.props.minAutocompleteLength <= (value && value.length) && data && data[0]) {\n        suggestion = this.getDisplayProperty(data[0]);\n      }\n\n      var inputProps = {\n        key: 'text_input',\n        value: value,\n        theme: this.props.theme,\n        suggestion: suggestion,\n        placeholder: this.props.placeholder,\n        rootClassName: \"\".concat(this.props.rootClassName, \"__input\"),\n        className: this.props.inputClassName,\n        style: this.props.inputStyle,\n        onChange: this.handleTextChange,\n        ref: this.addTextInputRef,\n        onClick: this.handleTextInputClick,\n        throttle: this.props.filterDelay,\n        autocomplete: this.props.autocomplete,\n        tabIndex: this.props.tabIndex,\n        autocompleteDelay: this.props.autocompleteDelay,\n        searchable: this.props.searchable\n      };\n      var result;\n\n      if (typeof this.props.renderInput === 'function') {\n        result = this.props.renderInput({\n          text: text,\n          domProps: inputProps,\n          onChange: inputProps.onChange\n        });\n      }\n\n      if (result === undefined) {\n        result = _react.default.createElement(_TextInput.default, inputProps);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"renderSpinner\",\n    value: function renderSpinner() {\n      if (!this.props.loadingSpinner) {\n        return null;\n      }\n\n      var loading = this.getLoading();\n\n      if (!loading && !this.getExpanded()) {\n        return null;\n      }\n\n      var spinner = this.props.loadingSpinner === true ? _react.default.createElement(_Icons.LoadingIcon, {\n        className: \"\".concat(this.props.rootClassName, \"__loading-spinner\")\n      }) : this.props.loadingSpinner;\n      return loading ? spinner : (0, _react.cloneElement)(spinner, {\n        style: spinner.props.style ? _objectSpread(_objectSpread({}, spinner.props.style), {}, {\n          display: 'none'\n        }) : {\n          display: 'none'\n        }\n      });\n    }\n  }, {\n    key: \"getListProps\",\n    value: function getListProps() {\n      var props = this.props,\n          state = this.state;\n      var data = this.getFilteredData();\n      var groupsLength = this.state.groups && Object.keys(this.state.groups).length || 0;\n      var listProps = (0, _getListProps2.default)({\n        props: props,\n        state: state,\n        computed: {\n          data: data,\n          loading: this.getLoading(),\n          activeItem: this.getActiveItem(),\n          value: this.getValue(),\n          dataLength: data && data.length + groupsLength || 0,\n          getIdProperty: this.getIdProperty,\n          getDisplayProperty: this.getDisplayProperty,\n          onItemClick: this.handleItemClick,\n          getComboNode: this.getComboNode,\n          ref: this.addListRef,\n          onScrollBottom: this.handleListScrollBottom,\n          text: this.getText(),\n          isNewCustomTagValid: this.isNewCustomTagValid\n        }\n      });\n      return listProps;\n    }\n  }, {\n    key: \"getValueProps\",\n    value: function getValueProps(_ref) {\n      var items = _ref.items,\n          groupedItems = _ref.groupedItems,\n          item = _ref.item;\n      var props = this.props,\n          state = this.state;\n      var value = this.getValue();\n      return (0, _getValueProps2.default)({\n        props: props,\n        state: state,\n        computed: {\n          items: items,\n          item: item,\n          groupedItems: groupedItems,\n          value: value,\n          label: this.getItemLabel(),\n          activeTag: this.getActiveTag()\n        },\n        tagProps: {\n          activeStyle: props.tagActiveStyle,\n          onClick: this.handleTagClick,\n          onCloseTagClick: this.handleRemoveTag,\n          onMultipleTagClose: this.handleRemoveMultipleTag\n        }\n      });\n    }\n  }, {\n    key: \"loadDataSource\",\n    value: function loadDataSource(dataSource) {\n      var _this2 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n\n      var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyObject,\n          appendTo = _ref2.appendTo,\n          action = _ref2.action,\n          value = _ref2.value,\n          text = _ref2.text,\n          skip = _ref2.skip,\n          limit = _ref2.limit,\n          hasNextPage = _ref2.hasNextPage;\n\n      if (Array.isArray(dataSource)) {\n        if (this.getLoading()) {\n          this.setLoading(false);\n        }\n\n        this.setData(dataSource, props, {\n          appendTo: appendTo\n        });\n        return;\n      }\n\n      if (dataSource && Array.isArray(dataSource.data)) {\n        if (this.getLoading()) {\n          this.setLoading(false);\n        }\n\n        this.setData(dataSource.data, props, {\n          remoteCount: dataSource.count != null ? dataSource.count * 1 : null,\n          appendTo: appendTo\n        });\n        return;\n      }\n\n      if (dataSource && dataSource.then) {\n        this.setLoading(true);\n        dataSource.then(function (data) {\n          _this2.props.onDataSourceLoad(data);\n\n          _this2.loadDataSource(data, props, {\n            appendTo: appendTo\n          });\n        });\n        return;\n      }\n\n      if (typeof dataSource === 'function') {\n        var config = _objectSpread(_objectSpread({}, props), {}, {\n          data: this.state.data,\n          hasNextPage: hasNextPage !== undefined ? hasNextPage : this.hasNextPage(),\n          text: this.isRemoteFilter() ? text !== undefined ? text : this.getText() : undefined,\n          skip: skip || 0,\n          action: action,\n          append: !!appendTo,\n          value: value !== undefined ? value : this.getValue(),\n          limit: limit !== undefined ? limit : this.props.limit\n        });\n\n        var dataResult = dataSource(config);\n        this.loadDataSource(dataResult, undefined, {\n          appendTo: config.append === false ? null : appendTo\n        });\n      }\n\n      if (!dataSource) {\n        this.setData(null, props);\n      }\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      var _this3 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n\n      var _ref3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyObject,\n          remoteCount = _ref3.remoteCount,\n          appendTo = _ref3.appendTo;\n\n      if (!data) {\n        this.setState({\n          data: null,\n          dataMap: null,\n          filteredData: null,\n          remoteCount: null\n        });\n        return null;\n      }\n\n      if (Array.isArray(appendTo)) {\n        data = appendTo.concat(data);\n      }\n\n      var dataMap = data.reduce(function (acc, item) {\n        acc[_this3.getIdProperty(item)] = item;\n        return acc;\n      }, {});\n\n      if (props.groupProperty) {\n        this.updateGroups({\n          data: data,\n          groupProperty: props.groupProperty\n        });\n      }\n\n      this.updateValueMap({\n        value: this.getValue(props),\n        dataMap: dataMap,\n        oldValueMap: this.getValueMap()\n      });\n      this.updateFilteredData({\n        data: data\n      });\n      this.setState({\n        data: data,\n        dataMap: dataMap,\n        remoteCount: remoteCount\n      });\n    }\n  }, {\n    key: \"getPageCount\",\n    value: function getPageCount() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var count = this.getDataCountForPagination(props);\n      return (0, _PaginationToolbar.getPageCount)({\n        count: count,\n        limit: props.limit\n      });\n    }\n  }, {\n    key: \"hasNextPage\",\n    value: function hasNextPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return this.getCurrentPage(props) < this.getPageCount(props);\n    }\n  }, {\n    key: \"getCurrentPage\",\n    value: function getCurrentPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var limit = props.limit,\n          skip = props.skip;\n      return (0, _PaginationToolbar.getCurrentPage)({\n        skip: this.previousSkip ? this.previousSkip : 0,\n        limit: limit\n      });\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n    }\n  }, {\n    key: \"getDataCountForPagination\",\n    value: function getDataCountForPagination() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var data = this.getData();\n      var count = this.isPaginationEnabled(props) ? props.remoteCount || this.state.remoteCount : data ? data.length : 0;\n      return count || 0;\n    }\n  }, {\n    key: \"getFilteredData\",\n    value: function getFilteredData() {\n      return this.state.filteredData;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.state.data;\n    }\n  }, {\n    key: \"loadLazyDataSource\",\n    value: function loadLazyDataSource(_ref4) {\n      var action = _ref4.action,\n          text = _ref4.text;\n\n      if (!this.props.lazyDataSource) {\n        return null;\n      }\n\n      var params = {\n        action: action,\n        text: text,\n        value: this.getValue()\n      };\n      this.setData(null);\n      this.loadDataSource(this.props.dataSource, undefined, params);\n      return null;\n    }\n  }, {\n    key: \"isPaginationEnabled\",\n    value: function isPaginationEnabled() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var hasLoadNextPage = typeof props.loadNextPage === 'function';\n      var hasFunctionalDataSource = typeof props.dataSource === 'function';\n\n      if (props.enablePagination === false) {\n        return false;\n      }\n\n      return props.enablePagination ? hasLoadNextPage || hasFunctionalDataSource : hasLoadNextPage;\n    }\n  }, {\n    key: \"remoteFilterData\",\n    value: function remoteFilterData() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$text = _ref5.text,\n          text = _ref5$text === void 0 ? this.getText() : _ref5$text,\n          _ref5$value = _ref5.value,\n          value = _ref5$value === void 0 ? this.getValue() : _ref5$value,\n          filterType = _ref5.filterType;\n\n      this.previousSkip = null;\n      this.loadDataSource(this.props.dataSource, undefined, {\n        text: text,\n        skip: 0\n      });\n    }\n  }, {\n    key: \"loadNextPage\",\n    value: function loadNextPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var filteredData = this.getFilteredData();\n\n      if (filteredData && filteredData.length < 3) {\n        return null;\n      }\n\n      if (this.previousSkip == null) {\n        this.previousSkip = props.skip;\n      }\n\n      var limit = props.limit;\n      var hasNextPage = this.hasNextPage();\n      var newSkip = this.previousSkip + limit;\n      this.previousSkip = newSkip;\n\n      if (!this.isPaginationEnabled()) {\n        return;\n      }\n\n      var fn = typeof props.dataSource === 'function' ? props.dataSource : null;\n\n      if (fn && hasNextPage) {\n        var currentData = this.state.data;\n        this.loadDataSource(this.props.dataSource, undefined, {\n          appendTo: currentData,\n          hasNextPage: hasNextPage,\n          skip: newSkip,\n          limit: limit,\n          filter: this.currentFilter\n        });\n      }\n    }\n  }, {\n    key: \"isRemoteDataSource\",\n    value: function isRemoteDataSource() {\n      return typeof this.props.dataSource === 'function';\n    }\n  }, {\n    key: \"isRemoteFilter\",\n    value: function isRemoteFilter() {\n      return (0, _typeof2.default)(this.isRemoteDataSource()) && this.props.remoteFilter;\n    }\n  }, {\n    key: \"doFilter\",\n    value: function doFilter() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          text = _ref6.text,\n          value = _ref6.value,\n          force = _ref6.force,\n          data = _ref6.data,\n          filterType = _ref6.filterType,\n          action = _ref6.action;\n\n      if (this.currentFilter === text && !force) {\n        return;\n      }\n\n      this.currentFilter = text;\n\n      if (this.isRemoteFilter()) {\n        if (action === 'select') {\n          return;\n        }\n\n        this.remoteFilterData({\n          value: value,\n          text: text,\n          filterType: filterType\n        });\n      } else {\n        this.updateFilteredData({\n          text: text,\n          value: value,\n          data: data,\n          filterType: filterType\n        });\n      }\n    }\n  }, {\n    key: \"updateFilteredData\",\n    value: function updateFilteredData() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$text = _ref7.text,\n          text = _ref7$text === void 0 ? this.getText() : _ref7$text,\n          _ref7$value = _ref7.value,\n          value = _ref7$value === void 0 ? this.getValue() : _ref7$value,\n          _ref7$data = _ref7.data,\n          data = _ref7$data === void 0 ? this.state.data : _ref7$data,\n          filterType = _ref7.filterType;\n\n      var filteredData = data;\n\n      if (!Array.isArray(filteredData)) {\n        return filteredData;\n      }\n\n      if (!this.isRemoteFilter()) {\n        filteredData = this.filterDataByText({\n          text: text,\n          data: filteredData\n        });\n        filteredData = this.filterDataByValue({\n          value: value,\n          text: text,\n          data: filteredData\n        });\n      }\n\n      var isFilteredByText = filterType === 'text' && data.length !== filteredData.length;\n\n      if (isFilteredByText && this.props.activeFirstItemOnFilter) {\n        var firstItem = filteredData && filteredData[0];\n\n        if (firstItem) {\n          var id = this.getIdProperty(firstItem);\n          this.setActiveItem(id);\n        } else {\n          this.setActiveItem(null);\n        }\n      }\n\n      this.setState({\n        filteredData: filteredData\n      });\n    }\n  }, {\n    key: \"filterDataByValue\",\n    value: function filterDataByValue(_ref8) {\n      var _ref8$value = _ref8.value,\n          value = _ref8$value === void 0 ? this.getValue() : _ref8$value,\n          _ref8$data = _ref8.data,\n          data = _ref8$data === void 0 ? this.state.data : _ref8$data;\n\n      if (!Array.isArray(data)) {\n        return data;\n      }\n\n      var newData = data;\n\n      if (data && value && this.props.removeSelectedItems) {\n        newData = (0, _filterByValue.default)({\n          data: newData,\n          getIdProperty: this.getIdProperty,\n          value: value\n        });\n      }\n\n      return newData;\n    }\n  }, {\n    key: \"filterDataByText\",\n    value: function filterDataByText(_ref9) {\n      var _ref9$text = _ref9.text,\n          text = _ref9$text === void 0 ? this.getText() : _ref9$text,\n          _ref9$data = _ref9.data,\n          data = _ref9$data === void 0 ? this.state.data : _ref9$data;\n\n      if (!data || !text) {\n        return data;\n      }\n\n      var newData = data;\n\n      if (this.isFilterTextActive()) {\n        var filterFunction = this.props.filterFunction;\n        newData = (0, _filterByText.default)({\n          data: data,\n          text: text,\n          filterFunction: filterFunction,\n          getFilterProperty: this.getFilterProperty || this.getDisplayProperty,\n          mode: this.props.filterMode,\n          hightlight: this.props.highlightMatchedText\n        });\n      }\n\n      return newData;\n    }\n  }, {\n    key: \"getDataMap\",\n    value: function getDataMap() {\n      return this.state.dataMap;\n    }\n  }, {\n    key: \"getValueMap\",\n    value: function getValueMap() {\n      return this.state.valueMap;\n    }\n  }, {\n    key: \"isValueControlled\",\n    value: function isValueControlled() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return props.value !== undefined;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return this.isValueControlled(props) ? props.value : this.state.value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(newValue) {\n      var _ref10 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          action = _ref10.action;\n\n      if (this.props.disabled) {\n        return null;\n      }\n\n      if (this.props.readOnly) {\n        return null;\n      }\n\n      if (this.props.maxValueLength && newValue && newValue.length > this.props.maxValueLength) {\n        return null;\n      }\n\n      if (this.props.collapseOnSelect && action !== 'navigate') {\n        this.collapse();\n      }\n\n      if (this.props.autoBlur) {\n        this.blur();\n      }\n\n      if (!this.isValueControlled()) {\n        this.setState({\n          value: newValue\n        });\n      }\n\n      this.setText(null, {\n        skipFilter: true\n      });\n      this.updateValueMap({\n        value: newValue\n      });\n      this.props.onChange(newValue);\n    }\n  }, {\n    key: \"isFilterTextActive\",\n    value: function isFilterTextActive() {\n      var text = this.getText();\n      var data = this.getFilteredData();\n      return data && text && this.props.searchable && text.length >= this.props.filterMinLength;\n    }\n  }, {\n    key: \"updateValueMap\",\n    value: function updateValueMap(_ref11) {\n      var _this4 = this;\n\n      var value = _ref11.value,\n          dataMap = _ref11.dataMap,\n          oldValueMap = _ref11.oldValueMap;\n      var newValueMap = (0, _getValueMap.default)({\n        value: value,\n        dataMap: dataMap || this.getDataMap(),\n        oldValueMap: oldValueMap || this.getValueMap()\n      });\n\n      if (newValueMap) {\n        newValueMap = Object.keys(newValueMap).reduce(function (acc, id) {\n          var item = newValueMap[id];\n          acc[id] = _objectSpread(_objectSpread({}, item), {}, {\n            id: _this4.getIdProperty(item) || item,\n            label: _this4.getDisplayProperty(item) || item\n          });\n          return acc;\n        }, {});\n      }\n\n      this.setState({\n        valueMap: newValueMap\n      });\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem(id) {\n      var dataMap = this.getDataMap();\n      var item = dataMap && dataMap[id];\n\n      if (!item && !this.props.allowCustomTagCreation) {\n        return null;\n      }\n\n      if (typeof this.props.isSelectedItemValid === 'function') {\n        var isItemValid = this.props.isSelectedItemValid(item);\n\n        if (!isItemValid) {\n          return null;\n        }\n      }\n\n      var value = this.getValue();\n      var newValue;\n\n      if (this.props.multiple) {\n        newValue = (0, _getNewMultipleValue.default)({\n          id: id,\n          value: value\n        });\n      } else {\n        newValue = (0, _getNewSingleValue.default)({\n          id: id,\n          value: value,\n          toggle: this.props.changeValueOnNavigation ? false : this.props.allowSelectionToggle\n        });\n      }\n\n      this.setValue(newValue, {\n        action: 'select'\n      });\n      this.props.onItemClick({\n        item: item,\n        id: id\n      });\n    }\n  }, {\n    key: \"deselectItem\",\n    value: function deselectItem(id) {\n      var value = this.getValue();\n      var newValue = (0, _deselectValue.default)({\n        id: id,\n        value: value,\n        getIdProperty: this.getIdProperty\n      });\n      this.setValue(newValue);\n    }\n  }, {\n    key: \"deselectItems\",\n    value: function deselectItems() {\n      var _this5 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var value = this.getValue();\n      var newValue = ids.reduce(function (acc, id) {\n        acc = (0, _deselectValue.default)({\n          id: id,\n          value: acc,\n          getIdProperty: _this5.getIdProperty\n        });\n        return acc;\n      }, value);\n      this.setValue(newValue);\n    }\n  }, {\n    key: \"getExpanded\",\n    value: function getExpanded() {\n      return this.isExpandedControlled() ? this.props.expanded : this.expanded != null ? this.expanded : this.state.expanded;\n    }\n  }, {\n    key: \"isExpandedControlled\",\n    value: function isExpandedControlled() {\n      return this.props.expanded !== undefined;\n    }\n  }, {\n    key: \"setExpanded\",\n    value: function setExpanded(expanded) {\n      var _this6 = this;\n\n      if (this.expandedPromise) {\n        this.expandedPromise.then(function (result) {\n          if (_this6.getExpanded() !== expanded) {\n            _this6.setExpanded(expanded);\n          }\n        });\n        return;\n      }\n\n      this.expandedPromise = this.doSetExpanded(expanded).then(function () {\n        delete _this6.expandedPromise;\n      });\n    }\n  }, {\n    key: \"doSetExpanded\",\n    value: function doSetExpanded(expanded) {\n      var _this7 = this;\n\n      if (this.props.disabled) {\n        return Promise.resolve(null);\n      }\n\n      var currentExpanded = this.getExpanded();\n\n      if (currentExpanded === expanded) {\n        return Promise.resolve(expanded);\n      }\n\n      if (!expanded && this.isRemoteFilter()) {\n        this.previousSkip = null;\n      }\n\n      global.requestAnimationFrame(function () {\n        if (_this7.toolsNode) {\n          _this7.handleToolsSize();\n        }\n      });\n      var promise;\n\n      if (!this.isExpandedControlled()) {\n        promise = new Promise(function (resolve, reject) {\n          _this7.setState({\n            expanded: expanded\n          }, function () {\n            resolve(expanded);\n          });\n        });\n      } else {\n        promise = Promise.resolve(expanded);\n      }\n\n      if (expanded) {\n        if (this.isRemoteDataSource() && this.state.data === undefined) {\n          this.loadDataSource(this.props.dataSource);\n        } else {\n          if (this.wasExpandedAtLeastOnce) {\n            this.doFilter({\n              text: '',\n              action: 'expand',\n              force: true\n            });\n          }\n        }\n      }\n\n      if (expanded && !this.wasExpandedAtLeastOnce) {\n        this.wasExpandedAtLeastOnce = true;\n      }\n\n      if (expanded) {\n        this.onExpand();\n      } else {\n        this.props.onCollapse();\n      }\n\n      this.props.onExpandChange(expanded);\n      this.props.onExpandedChange(expanded);\n      return promise;\n    }\n  }, {\n    key: \"onExpand\",\n    value: function onExpand() {\n      this.props.onExpand();\n\n      if (this.props.highlightFirst) {\n        var activeItem = this.getActiveItem();\n\n        if (!activeItem) {\n          var firstItem = this.getItemByIndex(0);\n\n          if (firstItem) {\n            var id = this.getIdProperty(firstItem);\n            this.setActiveItem(id);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isActiveTagControlled\",\n    value: function isActiveTagControlled() {\n      return this.props.activeTag !== undefined;\n    }\n  }, {\n    key: \"setActiveTag\",\n    value: function setActiveTag(id) {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      if (!this.isActiveTagControlled()) {\n        this.setState({\n          activeTag: id\n        });\n      }\n\n      this.props.onActiveTagChange(id);\n    }\n  }, {\n    key: \"deselectActiveTag\",\n    value: function deselectActiveTag() {\n      var activeTag = this.getActiveTag();\n\n      if (activeTag) {\n        this.setActiveTag(null);\n      }\n    }\n  }, {\n    key: \"getActiveTag\",\n    value: function getActiveTag() {\n      return this.isActiveTagControlled() ? this.props.activeTag : this.state.activeTag;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function getSelectedItems() {\n      var _this8 = this;\n\n      var valueMap = this.getValueMap();\n      var value = this.getValue();\n      var items = null;\n\n      if (value) {\n        value = Array.isArray(value) ? value : [value];\n        items = value.map(function (id) {\n          return valueMap[id] || {\n            id: (0, _typeof2.default)(id) === 'object' ? _this8.getIdProperty(id) : id,\n            label: (0, _typeof2.default)(id) === 'object' ? _this8.getDisplayProperty(id) : id\n          };\n        });\n      }\n\n      return items;\n    }\n  }, {\n    key: \"getItemLabel\",\n    value: function getItemLabel(id) {\n      if (this.props.multiple) {\n        return null;\n      }\n\n      id = id === undefined ? this.getValue() : id;\n      var valueMap = this.getValueMap();\n      var dataMap = this.getDataMap();\n      var label;\n\n      if (valueMap && valueMap[id]) {\n        label = valueMap[id].label;\n      } else if (dataMap && dataMap[id]) {\n        label = this.getDisplayProperty(dataMap[id]);\n      }\n\n      if (label === undefined) {\n        label = this.props.defaultDisplayValue !== undefined && id != null ? this.props.defaultDisplayValue : id;\n      }\n\n      return label;\n    }\n  }, {\n    key: \"getGroupedItems\",\n    value: function getGroupedItems(items) {\n      var maxTagsLength = this.props.maxTagsLength;\n\n      if (maxTagsLength == null || !items) {\n        return null;\n      }\n\n      return (0, _groupItems.default)({\n        maxTagsLength: maxTagsLength,\n        items: items\n      });\n    }\n  }, {\n    key: \"isActiveItemControlled\",\n    value: function isActiveItemControlled() {\n      return this.props.activeItem !== undefined;\n    }\n  }, {\n    key: \"setActiveItem\",\n    value: function setActiveItem(id) {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      var activeItem = this.getActiveItem();\n\n      if (activeItem === id) {\n        return null;\n      }\n\n      if (!this.isActiveItemControlled()) {\n        var activeItemIndex = null;\n\n        if (id) {\n          activeItemIndex = this.getItemIndexById(id);\n        }\n\n        this.setState({\n          activeItemIndex: activeItemIndex,\n          activeItem: id\n        });\n\n        if (this.props.changeValueOnNavigation && !this.props.multiple) {\n          this.setValue(id, {\n            action: 'navigate'\n          });\n        }\n      }\n\n      this.scrollToId(id);\n      this.props.onActiveItemChange(id);\n    }\n  }, {\n    key: \"getActiveItem\",\n    value: function getActiveItem() {\n      return this.isActiveItemControlled() ? this.props.activeItem : this.state.activeItem;\n    }\n  }, {\n    key: \"isTextControled\",\n    value: function isTextControled() {\n      return this.props.text != null;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText() {\n      return this.isTextControled() ? this.props.text : this.state.text;\n    }\n  }, {\n    key: \"setText\",\n    value: function setText(text) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFn;\n\n      if (typeof config === 'function') {\n        callback = config;\n        config = emptyObject;\n      }\n\n      if (text === this.getText()) {\n        callback();\n        return;\n      }\n\n      if (!this.isTextControled()) {\n        this.setStateText(text, config, callback);\n      }\n\n      this.props.onTextChange(text);\n    }\n  }, {\n    key: \"setStateText\",\n    value: function setStateText(text) {\n      var _this9 = this;\n\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFn;\n\n      if (typeof config === 'function') {\n        callback = config;\n        config = emptyObject;\n      }\n\n      this.setState({\n        text: text\n      }, function () {\n        _this9.onTextUpdate(text, config);\n\n        callback();\n      });\n    }\n  }, {\n    key: \"onTextUpdate\",\n    value: function onTextUpdate(text) {\n      var _ref12 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject,\n          skipFilter = _ref12.skipFilter;\n\n      this.clearValueOnEmptyIfNecessary(text);\n\n      if (!skipFilter) {\n        this.doFilter({\n          text: text,\n          filterType: 'text'\n        });\n      }\n    }\n  }, {\n    key: \"clearValueOnEmptyIfNecessary\",\n    value: function clearValueOnEmptyIfNecessary(text) {\n      if (this.props.clearValueOnEmpty && !this.props.multiple && text === '') {\n        this.setValue(null);\n      }\n    }\n  }, {\n    key: \"getLoading\",\n    value: function getLoading() {\n      return this.isLoadingControlled() ? this.props.loading : this.state.loading;\n    }\n  }, {\n    key: \"isLoadingControlled\",\n    value: function isLoadingControlled() {\n      return this.props.loading != null;\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(loading) {\n      if (loading === this.state.loading) {\n        return;\n      }\n\n      if (!this.isLoadingControlled()) {\n        this.setState({\n          loading: loading\n        });\n      }\n\n      this.props.onLoadingChange(loading);\n    }\n  }, {\n    key: \"handleComboClick\",\n    value: function handleComboClick(event) {\n      event.preventDefault();\n\n      if (this.props.toggleExpandOnClick) {\n        this.toggleExpand();\n      } else if (this.props.expandOnClick) {\n        this.expand();\n      }\n\n      if (this.props.focusOnClick && !this.hasFocus()) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"handleMouseEnter\",\n    value: function handleMouseEnter() {\n      this.setState({\n        over: true\n      });\n    }\n  }, {\n    key: \"handleMouseLeave\",\n    value: function handleMouseLeave() {\n      this.setState({\n        over: false\n      });\n    }\n  }, {\n    key: \"handleComboFocus\",\n    value: function handleComboFocus() {\n      if (this.props.expandOnFocus) {\n        this.expand();\n      }\n\n      this.setState({\n        focus: true\n      });\n      this.props.onFocus();\n    }\n  }, {\n    key: \"handleComboBlur\",\n    value: function handleComboBlur(event) {\n      var _this10 = this;\n\n      if (this.isFocused() && event && event.relatedTarget && (0, _containsNode.default)(this.comboNode, event.relatedTarget)) {\n        global.requestAnimationFrame(function () {\n          _this10.focus();\n        });\n        return;\n      }\n\n      if (this.props.collapseOnBlur) {\n        this.collapse();\n      }\n\n      if (this.props.clearTextOnBlur) {\n        this.setText(null);\n      }\n\n      this.setState({\n        focus: false\n      });\n      this.props.onBlur();\n    }\n  }, {\n    key: \"isFocused\",\n    value: function isFocused() {\n      return this.state.focus;\n    }\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(id) {\n      if (!this.isFocused() && this.props.focusOnClick) {\n        this.focus();\n      }\n\n      this.setActiveItem(id);\n      this.selectItem(id);\n    }\n  }, {\n    key: \"handleTextChange\",\n    value: function handleTextChange(text) {\n      var _this11 = this;\n\n      this.deselectActiveTag();\n      this.setText(text, {\n        skipFilter: this.props.expandOnTextChange && !this.getExpanded()\n      }, function () {\n        if (_this11.props.expandOnTextChange) {\n          _this11.expand();\n        }\n      });\n    }\n  }, {\n    key: \"handleTextInputClick\",\n    value: function handleTextInputClick() {\n      this.deselectActiveTag();\n    }\n  }, {\n    key: \"handleRemoveTag\",\n    value: function handleRemoveTag(id) {\n      this.removeTag(id);\n    }\n  }, {\n    key: \"handleRemoveMultipleTag\",\n    value: function handleRemoveMultipleTag(ids) {\n      this.deselectItems(ids);\n    }\n  }, {\n    key: \"handleListScrollBottom\",\n    value: function handleListScrollBottom() {\n      this.loadNextPage();\n    }\n  }, {\n    key: \"removeTag\",\n    value: function removeTag(id) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === id && activeTag != null) {\n        var value = this.getValue();\n        var newActiveTag = (0, _getNewActiveTagOnRemove.default)({\n          id: id,\n          value: value,\n          dir: dir\n        });\n        this.setActiveTag(newActiveTag);\n      }\n\n      this.deselectItem(id);\n    }\n  }, {\n    key: \"removeRemainingTags\",\n    value: function removeRemainingTags() {\n      var ids = this.groupedItems.remainingItems.map(function (item) {\n        return item.id;\n      });\n      var visibleItems = this.groupedItems.visibleItems;\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === REMAINING_ITEMS) {\n        var lastItem = Array.isArray(visibleItems) && visibleItems[visibleItems.length - 1];\n\n        if (lastItem) {\n          this.setActiveTag(lastItem.id);\n        }\n      } else {\n        this.deselectActiveTag();\n      }\n\n      this.removeTags(ids);\n    }\n  }, {\n    key: \"removeTags\",\n    value: function removeTags(ids) {\n      this.deselectItems(ids);\n    }\n  }, {\n    key: \"handleTagClick\",\n    value: function handleTagClick(id) {\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === id) {\n        this.setActiveTag(null);\n      } else {\n        this.setActiveTag(id);\n      }\n\n      this.props.onTagClick(this.getItemById(id));\n\n      if (this.props.focusOnClick && !this.hasFocus()) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"handleComboMouseDown\",\n    value: function handleComboMouseDown(event) {\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleComboKeyDown\",\n    value: function handleComboKeyDown(event) {\n      if (this.props.allowCustomTagCreation && event.key === 'Enter') {\n        if (this.isNewCustomTagValid) {\n          this.selectItem(this.getText());\n          this.setText(null);\n        }\n      }\n\n      if (this.props.enableNavigation) {\n        if (this.props.enableListNavigation) {\n          switch (event.key) {\n            case 'ArrowDown':\n              this.navigateToNextItem(1, event);\n              break;\n\n            case 'ArrowUp':\n              this.navigateToNextItem(-1, event);\n              break;\n\n            case 'Enter':\n              this.handleEnterKeyPress(event);\n              break;\n\n            case 'Space':\n              this.selectActiveItem();\n              break;\n          }\n        }\n\n        if (this.props.enableTagNavigation) {\n          switch (event.key) {\n            case 'ArrowLeft':\n              this.navigateToNextTag(-1, event);\n              break;\n\n            case 'ArrowRight':\n              this.navigateToNextTag(1, event);\n              break;\n\n            case 'Backspace':\n              this.handleBackspace(event);\n              break;\n\n            case 'Delete':\n              this.handleDelete(event);\n          }\n        }\n      }\n\n      if (event.key === 'Escape') {\n        var expanded = this.getExpanded();\n\n        if (this.props.collapseOnEscape) {\n          if (expanded) {\n            this.collapse();\n          }\n        }\n\n        if (!expanded && this.getActiveTag()) {\n          this.setActiveTag(null);\n        }\n\n        if (!this.props.multiple) {\n          this.setText(null);\n        }\n      }\n\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(event, this);\n      }\n    }\n  }, {\n    key: \"navigateToNextItem\",\n    value: function navigateToNextItem(direction, event) {\n      var data = this.getFilteredData();\n\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      if (this.getExpanded()) {\n        var activeItem = this.getActiveItem();\n        var newActiveItem;\n\n        if (activeItem != null) {\n          newActiveItem = (0, _getNextItem.default)({\n            direction: direction,\n            data: data,\n            id: activeItem,\n            activeItem: activeItem,\n            getIdProperty: this.getIdProperty\n          });\n        } else {\n          var firstItemId;\n          var lastItemId;\n\n          if (data && data.length) {\n            firstItemId = this.getIdProperty(data[0]);\n            lastItemId = this.getIdProperty(data[data.length - 1]);\n\n            if (direction && firstItemId != null) {\n              newActiveItem = firstItemId;\n            }\n\n            if (direction === -1 && lastItemId != null) {\n              newActiveItem = lastItemId;\n            }\n          }\n        }\n\n        this.setActiveItem(newActiveItem);\n      } else {\n        this.expand();\n      }\n    }\n  }, {\n    key: \"selectActiveItem\",\n    value: function selectActiveItem() {\n      var activeItem = this.getActiveItem();\n\n      if (activeItem) {\n        this.selectItem(activeItem);\n      }\n    }\n  }, {\n    key: \"handleEnterKeyPress\",\n    value: function handleEnterKeyPress(event) {\n      var expanded = this.getExpanded();\n\n      if (expanded) {\n        this.selectActiveItem();\n      }\n\n      var activeItem = this.getActiveItem();\n\n      if (this.props.collapseOnSelectWithEnter) {\n        if (activeItem && expanded) {\n          this.collapse();\n        }\n      }\n\n      if (this.props.navigateToNextAfterSelection && this.props.multiple && activeItem) {\n        this.navigateToNextItem(1, event);\n      }\n    }\n  }, {\n    key: \"navigateToNextTag\",\n    value: function navigateToNextTag(direction, event) {\n      if (!this.isNavigationAllowed(direction)) {\n        return null;\n      }\n\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      var newActiveTag;\n      var items = this.getSelectedItems();\n      var itemsIds;\n\n      if (this.areItemsGrouped) {\n        var visibleItems = this.groupedItems.visibleItems.map(function (item) {\n          return item.id;\n        });\n        itemsIds = [].concat((0, _toConsumableArray2.default)(visibleItems), [REMAINING_ITEMS]);\n      } else {\n        itemsIds = items.map(function (item) {\n          return item.id;\n        });\n      }\n\n      var currentActiveTag = this.getActiveTag();\n      var currentIndex = itemsIds.indexOf(currentActiveTag);\n      var lastIndex = itemsIds.length - 1;\n      var lastTag = itemsIds[lastIndex];\n      var firstTag = itemsIds[0];\n      var isFirstTag = currentIndex === 0;\n      var isLastTag = currentIndex === lastIndex;\n\n      if (direction === -1 && isFirstTag) {\n        this.setActiveTag(null);\n        return null;\n      }\n\n      if (direction === 1 && isLastTag) {\n        this.setActiveTag(null);\n        return null;\n      }\n\n      if (currentActiveTag === null || currentIndex === -1) {\n        newActiveTag = direction === -1 ? lastTag : firstTag;\n      } else {\n        if (direction === -1) {\n          newActiveTag = isFirstTag ? lastTag : itemsIds[currentIndex - 1];\n        } else if (direction === 1) {\n          newActiveTag = isLastTag ? firstTag : itemsIds[currentIndex + 1];\n        }\n      }\n\n      this.setActiveTag(newActiveTag);\n      return null;\n    }\n  }, {\n    key: \"isNavigationAllowed\",\n    value: function isNavigationAllowed(direction) {\n      if (!this.props.multiple) {\n        return false;\n      }\n\n      var inputNode = this.getTextInputNode();\n\n      if (inputNode.hasSelection()) {\n        return false;\n      }\n\n      var currentActiveTag = this.getActiveTag();\n      var canNavigateLeft = inputNode.isCursorAtStartPosition() && direction === -1;\n      var canNavigateRight = inputNode.isCursorAtEndPosition() && direction === 1;\n\n      if (!canNavigateRight && !canNavigateLeft && !currentActiveTag) {\n        return false;\n      }\n\n      var items = this.getSelectedItems();\n\n      if (!Array.isArray(items)) {\n        return false;\n      }\n\n      if (items.length === 1 && currentActiveTag) {\n        this.setActiveTag(null);\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"handleBackspace\",\n    value: function handleBackspace(event) {\n      if (this.props.multiple) {\n        this.handleTagBackspaceRemove(event);\n      }\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(event) {\n      var activeTag = this.getActiveTag();\n\n      if (this.props.multiple && activeTag) {\n        this.removeTag(activeTag, 1);\n      }\n    }\n  }, {\n    key: \"handleTagBackspaceRemove\",\n    value: function handleTagBackspaceRemove(event) {\n      if (!this.props.removeTagOnBackspace) {\n        return null;\n      }\n\n      var value = this.getValue();\n\n      if (!value) {\n        return null;\n      }\n\n      var activeTag = this.getActiveTag();\n\n      if (activeTag != null) {\n        event.preventDefault();\n\n        if (activeTag === REMAINING_ITEMS) {\n          this.removeRemainingTags();\n        } else {\n          this.removeTag(activeTag, -1);\n        }\n\n        return null;\n      }\n\n      var inputNode = this.getTextInputNode();\n      var canDeleteTag = value && value.length && inputNode.isCursorAtStartPosition();\n\n      if (canDeleteTag) {\n        if (this.areItemsGrouped) {\n          var ids = this.groupedItems.remainingItems.map(function (item) {\n            return item.id;\n          });\n          this.removeTags(ids);\n        } else {\n          var items = this.getSelectedItems();\n          var lastItem = items[items.length - 1];\n          var lastItemId = lastItem.id;\n\n          if (this.props.keepTagTextOnRemove) {\n            var label = lastItem.label;\n\n            if (label && typeof label === 'string') {\n              this.setText(label);\n            }\n          }\n\n          this.removeTag(lastItemId);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleToolsSize\",\n    value: function handleToolsSize() {\n      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toolsNode ? this.toolsNode.getBoundingClientRect() : {\n        width: 0,\n        height: 0\n      };\n      var node = this.comboNode;\n      var computedStyle = global.getComputedStyle(node);\n      var width = size.width + parseInt(computedStyle.paddingLeft, 10) + parseInt(computedStyle.paddingRight, 10);\n      this.setState({\n        toolsSize: {\n          height: size.height,\n          width: width\n        }\n      });\n    }\n  }, {\n    key: \"expand\",\n    value: function expand() {\n      this.setExpanded(true);\n    }\n  }, {\n    key: \"collapse\",\n    value: function collapse() {\n      this.setExpanded(false);\n    }\n  }, {\n    key: \"scrollToIndex\",\n    value: function scrollToIndex(index) {\n      var listNode = this.getListNode();\n      return listNode && listNode.scrollToIndex(index);\n    }\n  }, {\n    key: \"getItemIndexById\",\n    value: function getItemIndexById(id) {\n      var index = (0, _findItemIndex.default)({\n        id: id,\n        data: this.getFilteredData(),\n        getIdProperty: this.getIdProperty\n      });\n      return index;\n    }\n  }, {\n    key: \"scrollToId\",\n    value: function scrollToId(id) {\n      var index = this.getItemIndexById(id);\n\n      if (index != null) {\n        this.scrollToIndex(index);\n      }\n    }\n  }, {\n    key: \"toggleExpand\",\n    value: function toggleExpand() {\n      var expanded = this.getExpanded();\n\n      if (expanded) {\n        this.collapse();\n      } else {\n        this.expand();\n      }\n    }\n  }, {\n    key: \"getItemByIndex\",\n    value: function getItemByIndex(index) {\n      var data = this.getFilteredData();\n\n      if (!data || !Array.isArray(data) || !data[index]) {\n        return null;\n      }\n\n      return data[index];\n    }\n  }, {\n    key: \"getItemById\",\n    value: function getItemById(id) {\n      var dataMap = this.getDataMap();\n      return dataMap && dataMap[id] || id;\n    }\n  }, {\n    key: \"updateGetIdProperty\",\n    value: function updateGetIdProperty(props) {\n      props = props || this.props;\n      this.getIdProperty = (0, _getDataProp.default)(props.idProperty);\n    }\n  }, {\n    key: \"updateGetDisplayProperty\",\n    value: function updateGetDisplayProperty(props) {\n      props = props || this.props;\n      this.getDisplayProperty = (0, _getDataProp.default)(props.displayProperty);\n    }\n  }, {\n    key: \"updateGetFilterProperty\",\n    value: function updateGetFilterProperty(props) {\n      props = props || this.props;\n      this.getFilterProperty = (0, _getDataProp.default)(props.filterProperty);\n    }\n  }, {\n    key: \"updateGroups\",\n    value: function updateGroups(_ref13) {\n      var _ref13$groupProperty = _ref13.groupProperty,\n          groupProperty = _ref13$groupProperty === void 0 ? this.props.groupProperty : _ref13$groupProperty,\n          _ref13$data = _ref13.data,\n          data = _ref13$data === void 0 ? this.getFilteredData() : _ref13$data;\n\n      if (!data) {\n        return null;\n      }\n\n      var groups = (0, _getGroups.default)(data, groupProperty);\n      this.setState({\n        groups: groups\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.focus && !this.hasFocus()) {\n        textInput.focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.blur) {\n        textInput.blur();\n      }\n    }\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.hasFocus) {\n        return textInput.hasFocus();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getTextInputNode\",\n    value: function getTextInputNode() {\n      return this.textInput;\n    }\n  }, {\n    key: \"getComboNode\",\n    value: function getComboNode() {\n      return this.comboNode;\n    }\n  }, {\n    key: \"getListNode\",\n    value: function getListNode() {\n      return this.listNode;\n    }\n  }, {\n    key: \"getVirtualListNode\",\n    value: function getVirtualListNode() {\n      return this.listNode && this.listNode.getVirtualListNode();\n    }\n  }, {\n    key: \"getlListNode\",\n    value: function getlListNode() {\n      return this.listNode && this.listNode.getlListNode();\n    }\n  }, {\n    key: \"addItem\",\n    value: function addItem(item) {\n      var newData = [].concat((0, _toConsumableArray2.default)(this.getData()), [item]);\n      this.setData(newData);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this12 = this;\n\n      this.setValue(null);\n      this.setText(null);\n      global.requestAnimationFrame(function () {\n        if (_this12.toolsNode) {\n          _this12.handleToolsSize();\n        }\n      });\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(id) {\n      return this.getItemById(id);\n    }\n  }, {\n    key: \"getItemCount\",\n    value: function getItemCount() {\n      var data = this.getData();\n      return Array.isArray(data) ? data.length : null;\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(_ref14) {\n      var index = _ref14.index,\n          item = _ref14.item;\n      var data = this.getData();\n      var newData = [].concat((0, _toConsumableArray2.default)(data.slice(0, index)), [item], (0, _toConsumableArray2.default)(data.slice(index)));\n      this.setData(newData);\n    }\n  }, {\n    key: \"removeItems\",\n    value: function removeItems(ids) {\n      var _this13 = this;\n\n      ids = Array.isArray(ids) ? ids : [ids];\n      var data = this.getData();\n      var newData = data.filter(function (item) {\n        var id = _this13.getIdProperty(item);\n\n        return ids.indexOf(id) === -1;\n      });\n      this.setData(newData);\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      var expanded = this.getExpanded();\n      this.setExpanded(!expanded);\n    }\n  }]);\n  return InovuaComboBox;\n}(_react.Component);\n\nfunction emptyFn() {}\n\nInovuaComboBox.defaultProps = {\n  rootClassName: 'inovua-react-toolkit-combo-box',\n  inlineFlex: false,\n  itemEllipsis: true,\n  borderRadius: 0,\n  shadow: true,\n  showShadowOnMouseOver: false,\n  clearTextOnBlur: true,\n  onKeyDown: emptyFn,\n  autoFocus: false,\n  autoBlur: false,\n  focusOnClick: true,\n  onFocus: emptyFn,\n  onBlur: emptyFn,\n  defaultActiveItem: null,\n  highlightFirst: false,\n  onTextChange: emptyFn,\n  searchable: true,\n  tagCloseIconPosition: 'end',\n  removeTagOnBackspace: true,\n  tagEllipsis: true,\n  filterMinLength: 0,\n  filterDelay: 300,\n  activeFirstItemOnFilter: true,\n  clearIcon: true,\n  toggleIcon: true,\n  showClearIconOnMouseOver: false,\n  clearTextOnSelect: true,\n  filterMode: 'contains',\n  highlightMatchedText: false,\n  onActiveTagChange: emptyFn,\n  enableTagNavigation: true,\n  onTagClick: emptyFn,\n  onActiveItemChange: emptyFn,\n  keepTagTextOnRemove: true,\n  onItemClick: emptyFn,\n  onChange: emptyFn,\n  minAutocompleteLength: 3,\n  autocompleteDelay: 300,\n  autocomplete: false,\n  defaultValue: null,\n  multiple: false,\n  removeSelectedItems: false,\n  allowSelectionToggle: true,\n  clearValueOnEmpty: true,\n  onDataSourceLoad: emptyFn,\n  idProperty: 'id',\n  displayProperty: 'label',\n  groupProperty: 'group',\n  limit: 50,\n  skip: 0,\n  onLoadingChange: emptyFn,\n  listLoadingText: 'Loading...',\n  loadingSpinner: true,\n  listEmptyText: 'No data found',\n  defaultText: null,\n  defaultExpanded: false,\n  onExpandedChange: emptyFn,\n  onExpandChange: emptyFn,\n  collapseOnEscape: true,\n  expandOnClick: true,\n  expandOnFocus: true,\n  collapseOnBlur: true,\n  onExpand: emptyFn,\n  onCollapse: emptyFn,\n  expandOnTextChange: true,\n  toggleExpandOnClick: true,\n  wrapMultiple: true,\n  theme: 'default-light',\n  enableNavigation: true,\n  enableListNavigation: true,\n  navigateToNextAfterSelection: true,\n  positions: ['bottom', 'top'],\n  offset: 2,\n  constrainTo: true\n};\n\nvar VALUE_TYPE = _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number, _propTypes.default.object, _propTypes.default.bool, _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number, _propTypes.default.object, _propTypes.default.bool]))]);\n\nInovuaComboBox.propTypes = {\n  rootClassName: _propTypes.default.string,\n  theme: _propTypes.default.string,\n  inlineFlex: _propTypes.default.bool,\n  shouldComponentUpdate: _propTypes.default.func,\n  lazyDataSource: _propTypes.default.bool,\n  remoteFilter: _propTypes.default.bool,\n  disabled: _propTypes.default.bool,\n  readOnly: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  tabIndex: _propTypes.default.number,\n  collapseOnSelect: _propTypes.default.bool,\n  clearTextOnBlur: _propTypes.default.bool,\n  listEmptyText: _propTypes.default.node,\n  listMaxHeight: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  listMinHeight: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  maxTagsLength: _propTypes.default.number,\n  defaultLoading: _propTypes.default.bool,\n  loading: _propTypes.default.bool,\n  onLoadingChange: _propTypes.default.func,\n  listLoadingText: _propTypes.default.node,\n  loadingSpinner: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.bool]),\n  onKeyDown: _propTypes.default.func,\n  onTagClick: _propTypes.default.func,\n  clearIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.func, _propTypes.default.node]),\n  toggleIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.func, _propTypes.default.node]),\n  showClearIconOnMouseOver: _propTypes.default.bool,\n  autoFocus: _propTypes.default.bool,\n  autoBlur: _propTypes.default.bool,\n  focusOnClick: _propTypes.default.bool,\n  onFocus: _propTypes.default.func,\n  onBlur: _propTypes.default.func,\n  borderRadius: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  padding: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  border: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  background: _propTypes.default.string,\n  shadow: _propTypes.default.bool,\n  showShadowOnMouseOver: _propTypes.default.bool,\n  emptyClassName: _propTypes.default.string,\n  emptyStyle: _propTypes.default.object,\n  disabledClassName: _propTypes.default.string,\n  disabledStyle: _propTypes.default.object,\n  focusedClassName: _propTypes.default.string,\n  focusedStyle: _propTypes.default.object,\n  itemBackground: _propTypes.default.string,\n  disabledItemStyle: _propTypes.default.object,\n  disabledItemClassName: _propTypes.default.string,\n  renderItem: _propTypes.default.func,\n  itemEllipsis: _propTypes.default.bool,\n  activeItemStyle: _propTypes.default.object,\n  activeItemClassName: _propTypes.default.string,\n  selectedItemStyle: _propTypes.default.object,\n  limit: _propTypes.default.number,\n  skip: _propTypes.default.number,\n  loadNextPage: _propTypes.default.func,\n  searchable: _propTypes.default.bool,\n  placeholder: _propTypes.default.node,\n  text: _propTypes.default.string,\n  defaultText: _propTypes.default.string,\n  onTextChange: _propTypes.default.func,\n  filterFunction: _propTypes.default.func,\n  filterProperty: _propTypes.default.string,\n  loadLazyDataSource: _propTypes.default.func,\n  filterMinLength: _propTypes.default.number,\n  filterDelay: _propTypes.default.number,\n  activeFirstItemOnFilter: _propTypes.default.bool,\n  renderInput: _propTypes.default.func,\n  inputClassName: _propTypes.default.string,\n  inputStyle: _propTypes.default.object,\n  clearTextOnSelect: _propTypes.default.bool,\n  filterMode: _propTypes.default.oneOf(['startsWith', 'contains']),\n  highlightMatchedText: _propTypes.default.bool,\n  autocomplete: _propTypes.default.bool,\n  minAutocompleteLength: _propTypes.default.number,\n  autocompleteDelay: _propTypes.default.number,\n  enableNavigatio: _propTypes.default.bool,\n  keepTagTextOnRemove: _propTypes.default.bool,\n  tagActiveStyle: _propTypes.default.object,\n  enableTagNavigation: _propTypes.default.bool,\n  activeTag: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  defaultActiveTag: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  onActiveTagChange: _propTypes.default.func,\n  allowCustomTagCreation: _propTypes.default.bool,\n  enableNavigation: _propTypes.default.bool,\n  enableListNavigation: _propTypes.default.bool,\n  highlightFirst: _propTypes.default.bool,\n  activeItem: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  defaultActiveItem: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  onActiveItemChange: _propTypes.default.func,\n  navigateToNextAfterSelection: _propTypes.default.bool,\n  onItemClick: _propTypes.default.func,\n  onChange: _propTypes.default.func,\n  listClassName: _propTypes.default.string,\n  selectedStyle: _propTypes.default.object,\n  selectedClassName: _propTypes.default.string,\n  renderGroup: _propTypes.default.func,\n  renderFooter: _propTypes.default.func,\n  renderHeader: _propTypes.default.func,\n  renderList: _propTypes.default.func,\n  renderListComponent: _propTypes.default.func,\n  value: VALUE_TYPE,\n  defaultValue: VALUE_TYPE,\n  defaultDisplayValue: VALUE_TYPE,\n  removeSelectedItems: _propTypes.default.bool,\n  isSelectedItemValid: _propTypes.default.func,\n  maxValueLength: _propTypes.default.number,\n  changeValueOnNavigation: _propTypes.default.bool,\n  allowSelectionToggle: _propTypes.default.bool,\n  clearSelectedOnTextChange: _propTypes.default.bool,\n  clearValueOnEmpty: _propTypes.default.bool,\n  isNewCustomTagValid: _propTypes.default.func,\n  multiple: _propTypes.default.bool,\n  renderTag: _propTypes.default.func,\n  renderTagLabel: _propTypes.default.func,\n  renderRemainingTags: _propTypes.default.func,\n  renderTags: _propTypes.default.func,\n  tagStyle: _propTypes.default.object,\n  tagBorder: _propTypes.default.string,\n  tagPadding: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagHeight: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagWidth: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagMinSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  tagMaxSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  tagCloseIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.node, _propTypes.default.func]),\n  tagCloseIconPosition: _propTypes.default.oneOf(['start', 'end']),\n  tagEllipsis: _propTypes.default.bool,\n  removeTagOnBackspace: _propTypes.default.bool,\n  renderDisplayValue: _propTypes.default.func,\n  dataSource: function dataSource(props, propName) {\n    var dataSource = props[propName];\n\n    if (dataSource != null && typeof dataSource !== 'function' && !Array.isArray(dataSource) && !(dataSource && dataSource.then)) {\n      return new Error('dataSource must be an array, null, a promise or a function returning a promise.');\n    }\n\n    return null;\n  },\n  onDataSourceLoad: _propTypes.default.func,\n  idProperty: _propTypes.default.string,\n  displayProperty: _propTypes.default.string,\n  groupProperty: _propTypes.default.string,\n  listStyle: _propTypes.default.object,\n  relativeToViewport: _propTypes.default.bool,\n  expanded: _propTypes.default.bool,\n  defaultExpanded: _propTypes.default.bool,\n  onExpandedChange: _propTypes.default.func,\n  onExpandChange: _propTypes.default.func,\n  collapseOnEscape: _propTypes.default.bool,\n  expandOnClick: _propTypes.default.bool,\n  expandOnFocus: _propTypes.default.bool,\n  collapseOnBlur: _propTypes.default.bool,\n  enablePagination: _propTypes.default.bool,\n  onExpand: _propTypes.default.func,\n  onCollapse: _propTypes.default.func,\n  virtualListFactory: _propTypes.default.func,\n  renderListScroller: _propTypes.default.func,\n  renderVirtualList: _propTypes.default.func,\n  expandOnTextChange: _propTypes.default.bool,\n  toggleExpandOnClick: _propTypes.default.bool,\n  collapseOnSelectWithEnter: _propTypes.default.bool,\n  wrapMultiple: _propTypes.default.bool,\n  newCustomTagText: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  positions: _propTypes.default.arrayOf(_propTypes.default.string),\n  constrainTo: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.func, _propTypes.default.object, _propTypes.default.bool]),\n  offset: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }), _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  })]))])\n};\nvar _default = InovuaComboBox;\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/ComboBox/src/ComboBox.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","REMAINING_ITEMS","default","_toConsumableArray2","_typeof2","_defineProperty2","_extends2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_propTypes","_cleanProps","_NotifyResize","_throttle","_containsNode","_TextInput","_Value","_ClearButton","_ToggleButton","_List","_Icons","_shouldComponentUpdate2","_getRootClassName","_getListProps2","_getValueProps2","_getDataProp","_getNewMultipleValue","_getNewSingleValue","_findItemIndex","_filterByValue","_filterByText","_deselectValue","_getNewActiveTagOnRemove","_getNextItem","_groupItems","_getValueMap","_getGroups","_registerHideOnClickOutsideEventListener","_PaginationToolbar","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","emptyObject","InovuaComboBox","_Component","_super","props","_this","refTools","tools","toolsNode","state","loading","defaultLoading","dataSource","then","defaultValue","valueMap","text","defaultText","activeTag","defaultActiveTag","activeItem","defaultActiveItem","multiple","expanded","defaultExpanded","toolsSize","width","height","over","focus","getData","bind","handleItemClick","handleTextChange","handleTextInputClick","handleTagClick","handleRemoveTag","handleComboClick","handleComboKeyDown","handleComboFocus","handleComboBlur","getComboNode","clear","handleMouseEnter","handleMouseLeave","toggleExpand","handleToolsSize","handleRemoveMultipleTag","handleListScrollBottom","handleDelete","getListNode","updateGetIdProperty","updateGetDisplayProperty","updateGetFilterProperty","addTextInputRef","ref","textInput","addRootRef","comboNode","addListRef","listNode","setActiveItem","componentDidMount","autoFocus","activeItemIndex","setState","getItemIndexById","isRemoteFilter","doFilter","shouldComponentUpdate","nextProps","nextState","UNSAFE_componentWillReceiveProps","loadDataSource","idProperty","displayProperty","filterProperty","isExpandedControlled","onExpand","groupProperty","updateGroups","isActiveItemControlled","changeValueOnNavigation","setValue","action","loadLazyDataSource","isTextControled","onTextUpdate","UNSAFE_componentWillMount","lazyDataSource","render","renderTextInput","className","computed","getValue","getExpanded","items","getSelectedItems","groupedItems","getGroupedItems","areItemsGrouped","remainingItems","style","getRootStyle","filteredData","getFilteredData","getText","isNewCustomTagValid","allowCustomTagCreation","createElement","propTypes","onClick","onMouseDown","handleComboMouseDown","onKeyDown","onFocus","onBlur","onMouseEnter","onMouseLeave","getValueProps","concat","rootClassName","renderSpinner","renderClearIcon","renderToggleIcon","tagEllipsis","NotifyResize","notifyOnMount","onResize","renderList","borderRadius","padding","border","background","emptyStyle","disabledStyle","disabled","focusedStyle","listProps","getListProps","domProps","undefined","renderListComponent","res","searchable","showClearIcon","clearIcon","showClearIconOnMouseOver","clearButton","onClear","closeIcon","toggleIcon","onToggle","getItemLabel","data","suggestion","minAutocompleteLength","getDisplayProperty","inputProps","theme","placeholder","inputClassName","inputStyle","onChange","throttle","filterDelay","autocomplete","tabIndex","autocompleteDelay","renderInput","loadingSpinner","getLoading","spinner","LoadingIcon","cloneElement","display","groupsLength","groups","getActiveItem","dataLength","getIdProperty","onItemClick","onScrollBottom","_ref","item","label","getActiveTag","tagProps","activeStyle","tagActiveStyle","onCloseTagClick","onMultipleTagClose","_this2","_ref2","appendTo","skip","limit","hasNextPage","Array","isArray","setLoading","setData","remoteCount","count","onDataSourceLoad","config","append","dataResult","_this3","_ref3","dataMap","reduce","acc","updateValueMap","oldValueMap","getValueMap","updateFilteredData","getPageCount","getDataCountForPagination","getCurrentPage","previousSkip","isLastPage","isPaginationEnabled","_ref4","params","hasLoadNextPage","loadNextPage","hasFunctionalDataSource","enablePagination","remoteFilterData","_ref5","_ref5$text","_ref5$value","filterType","newSkip","fn","currentData","currentFilter","isRemoteDataSource","remoteFilter","_ref6","force","_ref7","_ref7$text","_ref7$value","_ref7$data","filterDataByText","filterDataByValue","isFilteredByText","activeFirstItemOnFilter","firstItem","id","_ref8","_ref8$value","_ref8$data","newData","removeSelectedItems","_ref9","_ref9$text","_ref9$data","isFilterTextActive","filterFunction","getFilterProperty","mode","filterMode","hightlight","highlightMatchedText","getDataMap","isValueControlled","newValue","_ref10","readOnly","maxValueLength","collapseOnSelect","collapse","autoBlur","blur","setText","skipFilter","filterMinLength","_ref11","_this4","newValueMap","selectItem","isSelectedItemValid","isItemValid","toggle","allowSelectionToggle","deselectItem","deselectItems","_this5","ids","setExpanded","_this6","expandedPromise","doSetExpanded","_this7","Promise","resolve","currentExpanded","global","requestAnimationFrame","promise","reject","wasExpandedAtLeastOnce","onCollapse","onExpandChange","onExpandedChange","highlightFirst","getItemByIndex","isActiveTagControlled","setActiveTag","onActiveTagChange","deselectActiveTag","_this8","map","defaultDisplayValue","maxTagsLength","scrollToId","onActiveItemChange","callback","emptyFn","setStateText","onTextChange","_this9","_ref12","clearValueOnEmptyIfNecessary","clearValueOnEmpty","isLoadingControlled","onLoadingChange","event","preventDefault","toggleExpandOnClick","expandOnClick","expand","focusOnClick","hasFocus","expandOnFocus","_this10","isFocused","relatedTarget","collapseOnBlur","clearTextOnBlur","_this11","expandOnTextChange","removeTag","dir","newActiveTag","removeRemainingTags","visibleItems","lastItem","removeTags","onTagClick","getItemById","enableNavigation","enableListNavigation","navigateToNextItem","handleEnterKeyPress","selectActiveItem","enableTagNavigation","navigateToNextTag","handleBackspace","collapseOnEscape","direction","newActiveItem","firstItemId","lastItemId","collapseOnSelectWithEnter","navigateToNextAfterSelection","isNavigationAllowed","itemsIds","currentActiveTag","currentIndex","indexOf","lastIndex","lastTag","firstTag","isFirstTag","isLastTag","inputNode","getTextInputNode","hasSelection","canNavigateLeft","isCursorAtStartPosition","canNavigateRight","isCursorAtEndPosition","handleTagBackspaceRemove","removeTagOnBackspace","canDeleteTag","keepTagTextOnRemove","size","getBoundingClientRect","node","computedStyle","getComputedStyle","parseInt","paddingLeft","paddingRight","scrollToIndex","index","_ref13","_ref13$groupProperty","_ref13$data","getVirtualListNode","getlListNode","addItem","_this12","getItem","getItemCount","insertItem","_ref14","slice","removeItems","_this13","Component","defaultProps","inlineFlex","itemEllipsis","shadow","showShadowOnMouseOver","tagCloseIconPosition","clearTextOnSelect","listLoadingText","listEmptyText","wrapMultiple","positions","offset","constrainTo","VALUE_TYPE","oneOfType","string","number","bool","arrayOf","func","rtl","listMaxHeight","listMinHeight","emptyClassName","disabledClassName","focusedClassName","itemBackground","disabledItemStyle","disabledItemClassName","renderItem","activeItemStyle","activeItemClassName","selectedItemStyle","oneOf","enableNavigatio","listClassName","selectedStyle","selectedClassName","renderGroup","renderFooter","renderHeader","clearSelectedOnTextChange","renderTag","renderTagLabel","renderRemainingTags","renderTags","tagStyle","tagBorder","tagPadding","tagHeight","tagWidth","tagMinSize","shape","tagMaxSize","tagCloseIcon","renderDisplayValue","propName","Error","listStyle","relativeToViewport","virtualListFactory","renderListScroller","renderVirtualList","newCustomTagText","x","y","_default"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.REMAINING_ITEMS = exports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _cleanProps = _interopRequireDefault(require(\"../../../common/cleanProps\"));\n\nvar _NotifyResize = require(\"../../NotifyResize\");\n\nvar _throttle = _interopRequireDefault(require(\"../../../common/throttle\"));\n\nvar _containsNode = _interopRequireDefault(require(\"../../../common/containsNode\"));\n\nvar _TextInput = _interopRequireDefault(require(\"./TextInput\"));\n\nvar _Value = _interopRequireDefault(require(\"./Value\"));\n\nvar _ClearButton = _interopRequireDefault(require(\"./ClearButton\"));\n\nvar _ToggleButton = _interopRequireDefault(require(\"./ToggleButton\"));\n\nvar _List = _interopRequireDefault(require(\"./List\"));\n\nvar _Icons = require(\"./Icons\");\n\nvar _shouldComponentUpdate2 = _interopRequireDefault(require(\"./utils/shouldComponentUpdate\"));\n\nvar _getRootClassName = _interopRequireDefault(require(\"./utils/getRootClassName\"));\n\nvar _getListProps2 = _interopRequireDefault(require(\"./utils/getListProps\"));\n\nvar _getValueProps2 = _interopRequireDefault(require(\"./utils/getValueProps\"));\n\nvar _getDataProp = _interopRequireDefault(require(\"./utils/getDataProp\"));\n\nvar _getNewMultipleValue = _interopRequireDefault(require(\"./utils/getNewMultipleValue\"));\n\nvar _getNewSingleValue = _interopRequireDefault(require(\"./utils/getNewSingleValue\"));\n\nvar _findItemIndex = _interopRequireDefault(require(\"./utils/findItemIndex\"));\n\nvar _filterByValue = _interopRequireDefault(require(\"./utils/filterByValue\"));\n\nvar _filterByText = _interopRequireDefault(require(\"./utils/filterByText\"));\n\nvar _deselectValue = _interopRequireDefault(require(\"./utils/deselectValue\"));\n\nvar _getNewActiveTagOnRemove = _interopRequireDefault(require(\"./utils/getNewActiveTagOnRemove\"));\n\nvar _getNextItem = _interopRequireDefault(require(\"./utils/getNextItem\"));\n\nvar _groupItems = _interopRequireDefault(require(\"./utils/groupItems\"));\n\nvar _getValueMap = _interopRequireDefault(require(\"./utils/getValueMap\"));\n\nvar _getGroups = _interopRequireDefault(require(\"./utils/getGroups\"));\n\nvar _registerHideOnClickOutsideEventListener = _interopRequireDefault(require(\"../../../common/registerHideOnClickOutsideEventListener\"));\n\nvar _PaginationToolbar = require(\"../../PaginationToolbar\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar REMAINING_ITEMS = 'REMAINING_ITEMS';\nexports.REMAINING_ITEMS = REMAINING_ITEMS;\nvar emptyObject = {};\n\nvar InovuaComboBox = function (_Component) {\n  (0, _inherits2.default)(InovuaComboBox, _Component);\n\n  var _super = _createSuper(InovuaComboBox);\n\n  function InovuaComboBox(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaComboBox);\n    _this = _super.call(this, props);\n\n    _this.refTools = function (tools) {\n      _this.toolsNode = tools;\n    };\n\n    _this.state = {\n      loading: props.defaultLoading || !!(props.dataSource && props.dataSource.then),\n      value: props.defaultValue,\n      valueMap: {},\n      text: props.defaultText,\n      activeTag: props.defaultActiveTag,\n      activeItem: props.defaultActiveItem || !props.multiple && props.defaultValue,\n      expanded: props.defaultExpanded,\n      toolsSize: {\n        width: 0,\n        height: 0\n      },\n      over: false,\n      focus: false\n    };\n    _this.getData = _this.getData.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleItemClick = _this.handleItemClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTextChange = _this.handleTextChange.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTextInputClick = _this.handleTextInputClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleTagClick = _this.handleTagClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleRemoveTag = _this.handleRemoveTag.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboClick = _this.handleComboClick.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboKeyDown = _this.handleComboKeyDown.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboFocus = _this.handleComboFocus.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleComboBlur = _this.handleComboBlur.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getComboNode = _this.getComboNode.bind((0, _assertThisInitialized2.default)(_this));\n    _this.clear = _this.clear.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleMouseEnter = _this.handleMouseEnter.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleMouseLeave = _this.handleMouseLeave.bind((0, _assertThisInitialized2.default)(_this));\n    _this.toggleExpand = _this.toggleExpand.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleToolsSize = _this.handleToolsSize.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleRemoveMultipleTag = _this.handleRemoveMultipleTag.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleListScrollBottom = _this.handleListScrollBottom.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleDelete = _this.handleDelete.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getListNode = _this.getListNode.bind((0, _assertThisInitialized2.default)(_this));\n\n    _this.updateGetIdProperty();\n\n    _this.updateGetDisplayProperty();\n\n    _this.updateGetFilterProperty();\n\n    _this.addTextInputRef = function (ref) {\n      _this.textInput = ref;\n    };\n\n    _this.addRootRef = function (ref) {\n      _this.comboNode = ref;\n    };\n\n    _this.addListRef = function (ref) {\n      _this.listNode = ref;\n    };\n\n    _this.setActiveItem = (0, _throttle.default)(_this.setActiveItem, 16);\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaComboBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      if (this.state.activeItem && this.state.activeItemIndex == null) {\n        this.setState({\n          activeItemIndex: this.getItemIndexById(this.state.activeItem)\n        });\n      }\n\n      if (!this.isRemoteFilter()) {\n        this.doFilter();\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _shouldComponentUpdate2.default)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.dataSource !== this.props.dataSource) {\n        this.loadDataSource(nextProps.dataSource, nextProps);\n      }\n\n      if (this.props.idProperty !== nextProps.idProperty) {\n        this.updateGetIdProperty();\n      }\n\n      if (this.props.displayProperty !== nextProps.displayProperty) {\n        this.updateGetDisplayProperty();\n      }\n\n      if (this.props.filterProperty !== nextProps.filterProperty) {\n        this.updateGetFilterProperty();\n      }\n\n      if (this.isExpandedControlled() && this.props.expanded !== nextProps.expanded) {\n        this.onExpand();\n      }\n\n      if (this.props.groupProperty !== nextProps.groupProperty) {\n        this.updateGroups({\n          groupProperty: nextProps.groupProperty\n        });\n      }\n\n      if (this.isActiveItemControlled() && this.props.changeValueOnNavigation && !this.props.multiple && this.props.activeItem !== nextProps.activeItem) {\n        this.setValue(nextProps.activeItem, {\n          action: 'navigate'\n        });\n      }\n\n      if (this.isExpandedControlled() && !this.props.expanded && nextProps.expanded) {\n        this.loadLazyDataSource({\n          action: 'expand',\n          text: ''\n        });\n      }\n\n      if (this.isTextControled() && this.props.text !== nextProps.text) {\n        this.onTextUpdate(nextProps.text);\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      if (!this.props.lazyDataSource) {\n        this.loadDataSource(this.props.dataSource);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props,\n          state = this.state;\n      var textInput = this.renderTextInput();\n      var className = (0, _getRootClassName.default)({\n        props: props,\n        state: state,\n        computed: {\n          value: this.getValue()\n        }\n      });\n      var expanded = this.getExpanded();\n      var items = this.getSelectedItems();\n      var groupedItems = this.groupedItems = this.getGroupedItems(this.getSelectedItems());\n      this.areItemsGrouped = this.groupedItems && this.groupedItems.remainingItems && this.groupedItems.remainingItems.length;\n      var style = this.getRootStyle();\n      var filteredData = this.getFilteredData();\n      var text = this.getText();\n      this.isNewCustomTagValid = (!filteredData || filteredData.length === 0) && !!text && props.allowCustomTagCreation;\n      return _react.default.createElement(\"div\", (0, _extends2.default)({}, (0, _cleanProps.default)(props, InovuaComboBox.propTypes), {\n        onClick: this.handleComboClick,\n        onMouseDown: this.handleComboMouseDown,\n        onKeyDown: this.handleComboKeyDown,\n        onFocus: this.handleComboFocus,\n        onBlur: this.handleComboBlur,\n        className: className,\n        style: style,\n        ref: this.addRootRef,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave\n      }), _react.default.createElement(_Value.default, (0, _extends2.default)({}, this.getValueProps({\n        items: items,\n        groupedItems: groupedItems\n      }), {\n        textInput: textInput,\n        toolsSize: state.toolsSize\n      })), _react.default.createElement(\"div\", {\n        className: \"\".concat(props.rootClassName, \"__tools\"),\n        ref: this.refTools\n      }, this.renderSpinner(), this.renderClearIcon(), this.renderToggleIcon(), this.props.tagEllipsis && _react.default.createElement(_NotifyResize.NotifyResize, {\n        notifyOnMount: true,\n        onResize: this.handleToolsSize\n      })), expanded && this.renderList());\n    }\n  }, {\n    key: \"getRootStyle\",\n    value: function getRootStyle() {\n      var props = this.props,\n          state = this.state;\n\n      var style = _objectSpread({}, props.style);\n\n      if (props.borderRadius) {\n        style.borderRadius = props.borderRadius;\n      }\n\n      if (props.padding) {\n        style.padding = props.padding;\n      }\n\n      if (props.border) {\n        style.border = props.border;\n      }\n\n      if (props.background) {\n        style.background = props.background;\n      }\n\n      if (!this.getValue() && props.emptyStyle) {\n        style = _objectSpread(_objectSpread({}, style), props.emptyStyle);\n      }\n\n      if (props.disabledStyle && props.disabled) {\n        style = _objectSpread(_objectSpread({}, style), props.disabledStyle);\n      }\n\n      if (state.focus && props.focusedStyle) {\n        style = _objectSpread(_objectSpread({}, style), props.focusedStyle);\n      }\n\n      return style;\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList() {\n      var listProps = this.getListProps();\n      var result;\n\n      if (typeof this.props.renderList === 'function') {\n        result = this.props.renderList({\n          domProps: listProps,\n          items: this.getFilteredData()\n        });\n      }\n\n      if (result === undefined) {\n        result = _react.default.createElement(_List.default, listProps);\n      }\n\n      if (typeof this.props.renderListComponent === 'function') {\n        var res = this.props.renderListComponent(result);\n\n        if ((0, _typeof2.default)(res) !== undefined) {\n          return res;\n        }\n\n        result = res;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"renderClearIcon\",\n    value: function renderClearIcon() {\n      var props = this.props,\n          state = this.state;\n      var searchable = props.searchable;\n      var text = this.getText();\n      var value = this.getValue();\n      var showClearIcon = (text || value != null) && props.clearIcon;\n\n      if (props.showClearIconOnMouseOver) {\n        if (!state.over) {\n          showClearIcon = false;\n        }\n      }\n\n      if (searchable === false) {\n        showClearIcon = false;\n      }\n\n      if (!showClearIcon) {\n        return null;\n      }\n\n      var clearButton = _react.default.createElement(_ClearButton.default, {\n        onClear: this.clear,\n        closeIcon: props.clearIcon,\n        className: \"\".concat(props.rootClassName, \"__clear-icon\")\n      });\n\n      return clearButton;\n    }\n  }, {\n    key: \"renderToggleIcon\",\n    value: function renderToggleIcon() {\n      var props = this.props;\n\n      if (!props.toggleIcon) {\n        return null;\n      }\n\n      return _react.default.createElement(_ToggleButton.default, {\n        onToggle: this.toggleExpand,\n        className: \"\".concat(props.rootClassName, \"__toggle-icon\"),\n        toggleIcon: props.toggleIcon,\n        expanded: this.getExpanded()\n      });\n    }\n  }, {\n    key: \"renderTextInput\",\n    value: function renderTextInput() {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      var text = this.getText();\n      var value = text;\n\n      if (!this.props.multiple) {\n        if (text == null) {\n          value = this.getValue() == null ? '' : this.getItemLabel();\n        } else {\n          value = text;\n        }\n      }\n\n      var data = this.getFilteredData();\n      var suggestion = null;\n\n      if (this.props.minAutocompleteLength <= (value && value.length) && data && data[0]) {\n        suggestion = this.getDisplayProperty(data[0]);\n      }\n\n      var inputProps = {\n        key: 'text_input',\n        value: value,\n        theme: this.props.theme,\n        suggestion: suggestion,\n        placeholder: this.props.placeholder,\n        rootClassName: \"\".concat(this.props.rootClassName, \"__input\"),\n        className: this.props.inputClassName,\n        style: this.props.inputStyle,\n        onChange: this.handleTextChange,\n        ref: this.addTextInputRef,\n        onClick: this.handleTextInputClick,\n        throttle: this.props.filterDelay,\n        autocomplete: this.props.autocomplete,\n        tabIndex: this.props.tabIndex,\n        autocompleteDelay: this.props.autocompleteDelay,\n        searchable: this.props.searchable\n      };\n      var result;\n\n      if (typeof this.props.renderInput === 'function') {\n        result = this.props.renderInput({\n          text: text,\n          domProps: inputProps,\n          onChange: inputProps.onChange\n        });\n      }\n\n      if (result === undefined) {\n        result = _react.default.createElement(_TextInput.default, inputProps);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"renderSpinner\",\n    value: function renderSpinner() {\n      if (!this.props.loadingSpinner) {\n        return null;\n      }\n\n      var loading = this.getLoading();\n\n      if (!loading && !this.getExpanded()) {\n        return null;\n      }\n\n      var spinner = this.props.loadingSpinner === true ? _react.default.createElement(_Icons.LoadingIcon, {\n        className: \"\".concat(this.props.rootClassName, \"__loading-spinner\")\n      }) : this.props.loadingSpinner;\n      return loading ? spinner : (0, _react.cloneElement)(spinner, {\n        style: spinner.props.style ? _objectSpread(_objectSpread({}, spinner.props.style), {}, {\n          display: 'none'\n        }) : {\n          display: 'none'\n        }\n      });\n    }\n  }, {\n    key: \"getListProps\",\n    value: function getListProps() {\n      var props = this.props,\n          state = this.state;\n      var data = this.getFilteredData();\n      var groupsLength = this.state.groups && Object.keys(this.state.groups).length || 0;\n      var listProps = (0, _getListProps2.default)({\n        props: props,\n        state: state,\n        computed: {\n          data: data,\n          loading: this.getLoading(),\n          activeItem: this.getActiveItem(),\n          value: this.getValue(),\n          dataLength: data && data.length + groupsLength || 0,\n          getIdProperty: this.getIdProperty,\n          getDisplayProperty: this.getDisplayProperty,\n          onItemClick: this.handleItemClick,\n          getComboNode: this.getComboNode,\n          ref: this.addListRef,\n          onScrollBottom: this.handleListScrollBottom,\n          text: this.getText(),\n          isNewCustomTagValid: this.isNewCustomTagValid\n        }\n      });\n      return listProps;\n    }\n  }, {\n    key: \"getValueProps\",\n    value: function getValueProps(_ref) {\n      var items = _ref.items,\n          groupedItems = _ref.groupedItems,\n          item = _ref.item;\n      var props = this.props,\n          state = this.state;\n      var value = this.getValue();\n      return (0, _getValueProps2.default)({\n        props: props,\n        state: state,\n        computed: {\n          items: items,\n          item: item,\n          groupedItems: groupedItems,\n          value: value,\n          label: this.getItemLabel(),\n          activeTag: this.getActiveTag()\n        },\n        tagProps: {\n          activeStyle: props.tagActiveStyle,\n          onClick: this.handleTagClick,\n          onCloseTagClick: this.handleRemoveTag,\n          onMultipleTagClose: this.handleRemoveMultipleTag\n        }\n      });\n    }\n  }, {\n    key: \"loadDataSource\",\n    value: function loadDataSource(dataSource) {\n      var _this2 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n\n      var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyObject,\n          appendTo = _ref2.appendTo,\n          action = _ref2.action,\n          value = _ref2.value,\n          text = _ref2.text,\n          skip = _ref2.skip,\n          limit = _ref2.limit,\n          hasNextPage = _ref2.hasNextPage;\n\n      if (Array.isArray(dataSource)) {\n        if (this.getLoading()) {\n          this.setLoading(false);\n        }\n\n        this.setData(dataSource, props, {\n          appendTo: appendTo\n        });\n        return;\n      }\n\n      if (dataSource && Array.isArray(dataSource.data)) {\n        if (this.getLoading()) {\n          this.setLoading(false);\n        }\n\n        this.setData(dataSource.data, props, {\n          remoteCount: dataSource.count != null ? dataSource.count * 1 : null,\n          appendTo: appendTo\n        });\n        return;\n      }\n\n      if (dataSource && dataSource.then) {\n        this.setLoading(true);\n        dataSource.then(function (data) {\n          _this2.props.onDataSourceLoad(data);\n\n          _this2.loadDataSource(data, props, {\n            appendTo: appendTo\n          });\n        });\n        return;\n      }\n\n      if (typeof dataSource === 'function') {\n        var config = _objectSpread(_objectSpread({}, props), {}, {\n          data: this.state.data,\n          hasNextPage: hasNextPage !== undefined ? hasNextPage : this.hasNextPage(),\n          text: this.isRemoteFilter() ? text !== undefined ? text : this.getText() : undefined,\n          skip: skip || 0,\n          action: action,\n          append: !!appendTo,\n          value: value !== undefined ? value : this.getValue(),\n          limit: limit !== undefined ? limit : this.props.limit\n        });\n\n        var dataResult = dataSource(config);\n        this.loadDataSource(dataResult, undefined, {\n          appendTo: config.append === false ? null : appendTo\n        });\n      }\n\n      if (!dataSource) {\n        this.setData(null, props);\n      }\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      var _this3 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n\n      var _ref3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyObject,\n          remoteCount = _ref3.remoteCount,\n          appendTo = _ref3.appendTo;\n\n      if (!data) {\n        this.setState({\n          data: null,\n          dataMap: null,\n          filteredData: null,\n          remoteCount: null\n        });\n        return null;\n      }\n\n      if (Array.isArray(appendTo)) {\n        data = appendTo.concat(data);\n      }\n\n      var dataMap = data.reduce(function (acc, item) {\n        acc[_this3.getIdProperty(item)] = item;\n        return acc;\n      }, {});\n\n      if (props.groupProperty) {\n        this.updateGroups({\n          data: data,\n          groupProperty: props.groupProperty\n        });\n      }\n\n      this.updateValueMap({\n        value: this.getValue(props),\n        dataMap: dataMap,\n        oldValueMap: this.getValueMap()\n      });\n      this.updateFilteredData({\n        data: data\n      });\n      this.setState({\n        data: data,\n        dataMap: dataMap,\n        remoteCount: remoteCount\n      });\n    }\n  }, {\n    key: \"getPageCount\",\n    value: function getPageCount() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var count = this.getDataCountForPagination(props);\n      return (0, _PaginationToolbar.getPageCount)({\n        count: count,\n        limit: props.limit\n      });\n    }\n  }, {\n    key: \"hasNextPage\",\n    value: function hasNextPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return this.getCurrentPage(props) < this.getPageCount(props);\n    }\n  }, {\n    key: \"getCurrentPage\",\n    value: function getCurrentPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var limit = props.limit,\n          skip = props.skip;\n      return (0, _PaginationToolbar.getCurrentPage)({\n        skip: this.previousSkip ? this.previousSkip : 0,\n        limit: limit\n      });\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n    }\n  }, {\n    key: \"getDataCountForPagination\",\n    value: function getDataCountForPagination() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var data = this.getData();\n      var count = this.isPaginationEnabled(props) ? props.remoteCount || this.state.remoteCount : data ? data.length : 0;\n      return count || 0;\n    }\n  }, {\n    key: \"getFilteredData\",\n    value: function getFilteredData() {\n      return this.state.filteredData;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.state.data;\n    }\n  }, {\n    key: \"loadLazyDataSource\",\n    value: function loadLazyDataSource(_ref4) {\n      var action = _ref4.action,\n          text = _ref4.text;\n\n      if (!this.props.lazyDataSource) {\n        return null;\n      }\n\n      var params = {\n        action: action,\n        text: text,\n        value: this.getValue()\n      };\n      this.setData(null);\n      this.loadDataSource(this.props.dataSource, undefined, params);\n      return null;\n    }\n  }, {\n    key: \"isPaginationEnabled\",\n    value: function isPaginationEnabled() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var hasLoadNextPage = typeof props.loadNextPage === 'function';\n      var hasFunctionalDataSource = typeof props.dataSource === 'function';\n\n      if (props.enablePagination === false) {\n        return false;\n      }\n\n      return props.enablePagination ? hasLoadNextPage || hasFunctionalDataSource : hasLoadNextPage;\n    }\n  }, {\n    key: \"remoteFilterData\",\n    value: function remoteFilterData() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$text = _ref5.text,\n          text = _ref5$text === void 0 ? this.getText() : _ref5$text,\n          _ref5$value = _ref5.value,\n          value = _ref5$value === void 0 ? this.getValue() : _ref5$value,\n          filterType = _ref5.filterType;\n\n      this.previousSkip = null;\n      this.loadDataSource(this.props.dataSource, undefined, {\n        text: text,\n        skip: 0\n      });\n    }\n  }, {\n    key: \"loadNextPage\",\n    value: function loadNextPage() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var filteredData = this.getFilteredData();\n\n      if (filteredData && filteredData.length < 3) {\n        return null;\n      }\n\n      if (this.previousSkip == null) {\n        this.previousSkip = props.skip;\n      }\n\n      var limit = props.limit;\n      var hasNextPage = this.hasNextPage();\n      var newSkip = this.previousSkip + limit;\n      this.previousSkip = newSkip;\n\n      if (!this.isPaginationEnabled()) {\n        return;\n      }\n\n      var fn = typeof props.dataSource === 'function' ? props.dataSource : null;\n\n      if (fn && hasNextPage) {\n        var currentData = this.state.data;\n        this.loadDataSource(this.props.dataSource, undefined, {\n          appendTo: currentData,\n          hasNextPage: hasNextPage,\n          skip: newSkip,\n          limit: limit,\n          filter: this.currentFilter\n        });\n      }\n    }\n  }, {\n    key: \"isRemoteDataSource\",\n    value: function isRemoteDataSource() {\n      return typeof this.props.dataSource === 'function';\n    }\n  }, {\n    key: \"isRemoteFilter\",\n    value: function isRemoteFilter() {\n      return (0, _typeof2.default)(this.isRemoteDataSource()) && this.props.remoteFilter;\n    }\n  }, {\n    key: \"doFilter\",\n    value: function doFilter() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          text = _ref6.text,\n          value = _ref6.value,\n          force = _ref6.force,\n          data = _ref6.data,\n          filterType = _ref6.filterType,\n          action = _ref6.action;\n\n      if (this.currentFilter === text && !force) {\n        return;\n      }\n\n      this.currentFilter = text;\n\n      if (this.isRemoteFilter()) {\n        if (action === 'select') {\n          return;\n        }\n\n        this.remoteFilterData({\n          value: value,\n          text: text,\n          filterType: filterType\n        });\n      } else {\n        this.updateFilteredData({\n          text: text,\n          value: value,\n          data: data,\n          filterType: filterType\n        });\n      }\n    }\n  }, {\n    key: \"updateFilteredData\",\n    value: function updateFilteredData() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$text = _ref7.text,\n          text = _ref7$text === void 0 ? this.getText() : _ref7$text,\n          _ref7$value = _ref7.value,\n          value = _ref7$value === void 0 ? this.getValue() : _ref7$value,\n          _ref7$data = _ref7.data,\n          data = _ref7$data === void 0 ? this.state.data : _ref7$data,\n          filterType = _ref7.filterType;\n\n      var filteredData = data;\n\n      if (!Array.isArray(filteredData)) {\n        return filteredData;\n      }\n\n      if (!this.isRemoteFilter()) {\n        filteredData = this.filterDataByText({\n          text: text,\n          data: filteredData\n        });\n        filteredData = this.filterDataByValue({\n          value: value,\n          text: text,\n          data: filteredData\n        });\n      }\n\n      var isFilteredByText = filterType === 'text' && data.length !== filteredData.length;\n\n      if (isFilteredByText && this.props.activeFirstItemOnFilter) {\n        var firstItem = filteredData && filteredData[0];\n\n        if (firstItem) {\n          var id = this.getIdProperty(firstItem);\n          this.setActiveItem(id);\n        } else {\n          this.setActiveItem(null);\n        }\n      }\n\n      this.setState({\n        filteredData: filteredData\n      });\n    }\n  }, {\n    key: \"filterDataByValue\",\n    value: function filterDataByValue(_ref8) {\n      var _ref8$value = _ref8.value,\n          value = _ref8$value === void 0 ? this.getValue() : _ref8$value,\n          _ref8$data = _ref8.data,\n          data = _ref8$data === void 0 ? this.state.data : _ref8$data;\n\n      if (!Array.isArray(data)) {\n        return data;\n      }\n\n      var newData = data;\n\n      if (data && value && this.props.removeSelectedItems) {\n        newData = (0, _filterByValue.default)({\n          data: newData,\n          getIdProperty: this.getIdProperty,\n          value: value\n        });\n      }\n\n      return newData;\n    }\n  }, {\n    key: \"filterDataByText\",\n    value: function filterDataByText(_ref9) {\n      var _ref9$text = _ref9.text,\n          text = _ref9$text === void 0 ? this.getText() : _ref9$text,\n          _ref9$data = _ref9.data,\n          data = _ref9$data === void 0 ? this.state.data : _ref9$data;\n\n      if (!data || !text) {\n        return data;\n      }\n\n      var newData = data;\n\n      if (this.isFilterTextActive()) {\n        var filterFunction = this.props.filterFunction;\n        newData = (0, _filterByText.default)({\n          data: data,\n          text: text,\n          filterFunction: filterFunction,\n          getFilterProperty: this.getFilterProperty || this.getDisplayProperty,\n          mode: this.props.filterMode,\n          hightlight: this.props.highlightMatchedText\n        });\n      }\n\n      return newData;\n    }\n  }, {\n    key: \"getDataMap\",\n    value: function getDataMap() {\n      return this.state.dataMap;\n    }\n  }, {\n    key: \"getValueMap\",\n    value: function getValueMap() {\n      return this.state.valueMap;\n    }\n  }, {\n    key: \"isValueControlled\",\n    value: function isValueControlled() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return props.value !== undefined;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return this.isValueControlled(props) ? props.value : this.state.value;\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(newValue) {\n      var _ref10 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          action = _ref10.action;\n\n      if (this.props.disabled) {\n        return null;\n      }\n\n      if (this.props.readOnly) {\n        return null;\n      }\n\n      if (this.props.maxValueLength && newValue && newValue.length > this.props.maxValueLength) {\n        return null;\n      }\n\n      if (this.props.collapseOnSelect && action !== 'navigate') {\n        this.collapse();\n      }\n\n      if (this.props.autoBlur) {\n        this.blur();\n      }\n\n      if (!this.isValueControlled()) {\n        this.setState({\n          value: newValue\n        });\n      }\n\n      this.setText(null, {\n        skipFilter: true\n      });\n      this.updateValueMap({\n        value: newValue\n      });\n      this.props.onChange(newValue);\n    }\n  }, {\n    key: \"isFilterTextActive\",\n    value: function isFilterTextActive() {\n      var text = this.getText();\n      var data = this.getFilteredData();\n      return data && text && this.props.searchable && text.length >= this.props.filterMinLength;\n    }\n  }, {\n    key: \"updateValueMap\",\n    value: function updateValueMap(_ref11) {\n      var _this4 = this;\n\n      var value = _ref11.value,\n          dataMap = _ref11.dataMap,\n          oldValueMap = _ref11.oldValueMap;\n      var newValueMap = (0, _getValueMap.default)({\n        value: value,\n        dataMap: dataMap || this.getDataMap(),\n        oldValueMap: oldValueMap || this.getValueMap()\n      });\n\n      if (newValueMap) {\n        newValueMap = Object.keys(newValueMap).reduce(function (acc, id) {\n          var item = newValueMap[id];\n          acc[id] = _objectSpread(_objectSpread({}, item), {}, {\n            id: _this4.getIdProperty(item) || item,\n            label: _this4.getDisplayProperty(item) || item\n          });\n          return acc;\n        }, {});\n      }\n\n      this.setState({\n        valueMap: newValueMap\n      });\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem(id) {\n      var dataMap = this.getDataMap();\n      var item = dataMap && dataMap[id];\n\n      if (!item && !this.props.allowCustomTagCreation) {\n        return null;\n      }\n\n      if (typeof this.props.isSelectedItemValid === 'function') {\n        var isItemValid = this.props.isSelectedItemValid(item);\n\n        if (!isItemValid) {\n          return null;\n        }\n      }\n\n      var value = this.getValue();\n      var newValue;\n\n      if (this.props.multiple) {\n        newValue = (0, _getNewMultipleValue.default)({\n          id: id,\n          value: value\n        });\n      } else {\n        newValue = (0, _getNewSingleValue.default)({\n          id: id,\n          value: value,\n          toggle: this.props.changeValueOnNavigation ? false : this.props.allowSelectionToggle\n        });\n      }\n\n      this.setValue(newValue, {\n        action: 'select'\n      });\n      this.props.onItemClick({\n        item: item,\n        id: id\n      });\n    }\n  }, {\n    key: \"deselectItem\",\n    value: function deselectItem(id) {\n      var value = this.getValue();\n      var newValue = (0, _deselectValue.default)({\n        id: id,\n        value: value,\n        getIdProperty: this.getIdProperty\n      });\n      this.setValue(newValue);\n    }\n  }, {\n    key: \"deselectItems\",\n    value: function deselectItems() {\n      var _this5 = this;\n\n      var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var value = this.getValue();\n      var newValue = ids.reduce(function (acc, id) {\n        acc = (0, _deselectValue.default)({\n          id: id,\n          value: acc,\n          getIdProperty: _this5.getIdProperty\n        });\n        return acc;\n      }, value);\n      this.setValue(newValue);\n    }\n  }, {\n    key: \"getExpanded\",\n    value: function getExpanded() {\n      return this.isExpandedControlled() ? this.props.expanded : this.expanded != null ? this.expanded : this.state.expanded;\n    }\n  }, {\n    key: \"isExpandedControlled\",\n    value: function isExpandedControlled() {\n      return this.props.expanded !== undefined;\n    }\n  }, {\n    key: \"setExpanded\",\n    value: function setExpanded(expanded) {\n      var _this6 = this;\n\n      if (this.expandedPromise) {\n        this.expandedPromise.then(function (result) {\n          if (_this6.getExpanded() !== expanded) {\n            _this6.setExpanded(expanded);\n          }\n        });\n        return;\n      }\n\n      this.expandedPromise = this.doSetExpanded(expanded).then(function () {\n        delete _this6.expandedPromise;\n      });\n    }\n  }, {\n    key: \"doSetExpanded\",\n    value: function doSetExpanded(expanded) {\n      var _this7 = this;\n\n      if (this.props.disabled) {\n        return Promise.resolve(null);\n      }\n\n      var currentExpanded = this.getExpanded();\n\n      if (currentExpanded === expanded) {\n        return Promise.resolve(expanded);\n      }\n\n      if (!expanded && this.isRemoteFilter()) {\n        this.previousSkip = null;\n      }\n\n      global.requestAnimationFrame(function () {\n        if (_this7.toolsNode) {\n          _this7.handleToolsSize();\n        }\n      });\n      var promise;\n\n      if (!this.isExpandedControlled()) {\n        promise = new Promise(function (resolve, reject) {\n          _this7.setState({\n            expanded: expanded\n          }, function () {\n            resolve(expanded);\n          });\n        });\n      } else {\n        promise = Promise.resolve(expanded);\n      }\n\n      if (expanded) {\n        if (this.isRemoteDataSource() && this.state.data === undefined) {\n          this.loadDataSource(this.props.dataSource);\n        } else {\n          if (this.wasExpandedAtLeastOnce) {\n            this.doFilter({\n              text: '',\n              action: 'expand',\n              force: true\n            });\n          }\n        }\n      }\n\n      if (expanded && !this.wasExpandedAtLeastOnce) {\n        this.wasExpandedAtLeastOnce = true;\n      }\n\n      if (expanded) {\n        this.onExpand();\n      } else {\n        this.props.onCollapse();\n      }\n\n      this.props.onExpandChange(expanded);\n      this.props.onExpandedChange(expanded);\n      return promise;\n    }\n  }, {\n    key: \"onExpand\",\n    value: function onExpand() {\n      this.props.onExpand();\n\n      if (this.props.highlightFirst) {\n        var activeItem = this.getActiveItem();\n\n        if (!activeItem) {\n          var firstItem = this.getItemByIndex(0);\n\n          if (firstItem) {\n            var id = this.getIdProperty(firstItem);\n            this.setActiveItem(id);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isActiveTagControlled\",\n    value: function isActiveTagControlled() {\n      return this.props.activeTag !== undefined;\n    }\n  }, {\n    key: \"setActiveTag\",\n    value: function setActiveTag(id) {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      if (!this.isActiveTagControlled()) {\n        this.setState({\n          activeTag: id\n        });\n      }\n\n      this.props.onActiveTagChange(id);\n    }\n  }, {\n    key: \"deselectActiveTag\",\n    value: function deselectActiveTag() {\n      var activeTag = this.getActiveTag();\n\n      if (activeTag) {\n        this.setActiveTag(null);\n      }\n    }\n  }, {\n    key: \"getActiveTag\",\n    value: function getActiveTag() {\n      return this.isActiveTagControlled() ? this.props.activeTag : this.state.activeTag;\n    }\n  }, {\n    key: \"getSelectedItems\",\n    value: function getSelectedItems() {\n      var _this8 = this;\n\n      var valueMap = this.getValueMap();\n      var value = this.getValue();\n      var items = null;\n\n      if (value) {\n        value = Array.isArray(value) ? value : [value];\n        items = value.map(function (id) {\n          return valueMap[id] || {\n            id: (0, _typeof2.default)(id) === 'object' ? _this8.getIdProperty(id) : id,\n            label: (0, _typeof2.default)(id) === 'object' ? _this8.getDisplayProperty(id) : id\n          };\n        });\n      }\n\n      return items;\n    }\n  }, {\n    key: \"getItemLabel\",\n    value: function getItemLabel(id) {\n      if (this.props.multiple) {\n        return null;\n      }\n\n      id = id === undefined ? this.getValue() : id;\n      var valueMap = this.getValueMap();\n      var dataMap = this.getDataMap();\n      var label;\n\n      if (valueMap && valueMap[id]) {\n        label = valueMap[id].label;\n      } else if (dataMap && dataMap[id]) {\n        label = this.getDisplayProperty(dataMap[id]);\n      }\n\n      if (label === undefined) {\n        label = this.props.defaultDisplayValue !== undefined && id != null ? this.props.defaultDisplayValue : id;\n      }\n\n      return label;\n    }\n  }, {\n    key: \"getGroupedItems\",\n    value: function getGroupedItems(items) {\n      var maxTagsLength = this.props.maxTagsLength;\n\n      if (maxTagsLength == null || !items) {\n        return null;\n      }\n\n      return (0, _groupItems.default)({\n        maxTagsLength: maxTagsLength,\n        items: items\n      });\n    }\n  }, {\n    key: \"isActiveItemControlled\",\n    value: function isActiveItemControlled() {\n      return this.props.activeItem !== undefined;\n    }\n  }, {\n    key: \"setActiveItem\",\n    value: function setActiveItem(id) {\n      if (this.props.disabled) {\n        return null;\n      }\n\n      var activeItem = this.getActiveItem();\n\n      if (activeItem === id) {\n        return null;\n      }\n\n      if (!this.isActiveItemControlled()) {\n        var activeItemIndex = null;\n\n        if (id) {\n          activeItemIndex = this.getItemIndexById(id);\n        }\n\n        this.setState({\n          activeItemIndex: activeItemIndex,\n          activeItem: id\n        });\n\n        if (this.props.changeValueOnNavigation && !this.props.multiple) {\n          this.setValue(id, {\n            action: 'navigate'\n          });\n        }\n      }\n\n      this.scrollToId(id);\n      this.props.onActiveItemChange(id);\n    }\n  }, {\n    key: \"getActiveItem\",\n    value: function getActiveItem() {\n      return this.isActiveItemControlled() ? this.props.activeItem : this.state.activeItem;\n    }\n  }, {\n    key: \"isTextControled\",\n    value: function isTextControled() {\n      return this.props.text != null;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText() {\n      return this.isTextControled() ? this.props.text : this.state.text;\n    }\n  }, {\n    key: \"setText\",\n    value: function setText(text) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFn;\n\n      if (typeof config === 'function') {\n        callback = config;\n        config = emptyObject;\n      }\n\n      if (text === this.getText()) {\n        callback();\n        return;\n      }\n\n      if (!this.isTextControled()) {\n        this.setStateText(text, config, callback);\n      }\n\n      this.props.onTextChange(text);\n    }\n  }, {\n    key: \"setStateText\",\n    value: function setStateText(text) {\n      var _this9 = this;\n\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : emptyFn;\n\n      if (typeof config === 'function') {\n        callback = config;\n        config = emptyObject;\n      }\n\n      this.setState({\n        text: text\n      }, function () {\n        _this9.onTextUpdate(text, config);\n\n        callback();\n      });\n    }\n  }, {\n    key: \"onTextUpdate\",\n    value: function onTextUpdate(text) {\n      var _ref12 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : emptyObject,\n          skipFilter = _ref12.skipFilter;\n\n      this.clearValueOnEmptyIfNecessary(text);\n\n      if (!skipFilter) {\n        this.doFilter({\n          text: text,\n          filterType: 'text'\n        });\n      }\n    }\n  }, {\n    key: \"clearValueOnEmptyIfNecessary\",\n    value: function clearValueOnEmptyIfNecessary(text) {\n      if (this.props.clearValueOnEmpty && !this.props.multiple && text === '') {\n        this.setValue(null);\n      }\n    }\n  }, {\n    key: \"getLoading\",\n    value: function getLoading() {\n      return this.isLoadingControlled() ? this.props.loading : this.state.loading;\n    }\n  }, {\n    key: \"isLoadingControlled\",\n    value: function isLoadingControlled() {\n      return this.props.loading != null;\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(loading) {\n      if (loading === this.state.loading) {\n        return;\n      }\n\n      if (!this.isLoadingControlled()) {\n        this.setState({\n          loading: loading\n        });\n      }\n\n      this.props.onLoadingChange(loading);\n    }\n  }, {\n    key: \"handleComboClick\",\n    value: function handleComboClick(event) {\n      event.preventDefault();\n\n      if (this.props.toggleExpandOnClick) {\n        this.toggleExpand();\n      } else if (this.props.expandOnClick) {\n        this.expand();\n      }\n\n      if (this.props.focusOnClick && !this.hasFocus()) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"handleMouseEnter\",\n    value: function handleMouseEnter() {\n      this.setState({\n        over: true\n      });\n    }\n  }, {\n    key: \"handleMouseLeave\",\n    value: function handleMouseLeave() {\n      this.setState({\n        over: false\n      });\n    }\n  }, {\n    key: \"handleComboFocus\",\n    value: function handleComboFocus() {\n      if (this.props.expandOnFocus) {\n        this.expand();\n      }\n\n      this.setState({\n        focus: true\n      });\n      this.props.onFocus();\n    }\n  }, {\n    key: \"handleComboBlur\",\n    value: function handleComboBlur(event) {\n      var _this10 = this;\n\n      if (this.isFocused() && event && event.relatedTarget && (0, _containsNode.default)(this.comboNode, event.relatedTarget)) {\n        global.requestAnimationFrame(function () {\n          _this10.focus();\n        });\n        return;\n      }\n\n      if (this.props.collapseOnBlur) {\n        this.collapse();\n      }\n\n      if (this.props.clearTextOnBlur) {\n        this.setText(null);\n      }\n\n      this.setState({\n        focus: false\n      });\n      this.props.onBlur();\n    }\n  }, {\n    key: \"isFocused\",\n    value: function isFocused() {\n      return this.state.focus;\n    }\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(id) {\n      if (!this.isFocused() && this.props.focusOnClick) {\n        this.focus();\n      }\n\n      this.setActiveItem(id);\n      this.selectItem(id);\n    }\n  }, {\n    key: \"handleTextChange\",\n    value: function handleTextChange(text) {\n      var _this11 = this;\n\n      this.deselectActiveTag();\n      this.setText(text, {\n        skipFilter: this.props.expandOnTextChange && !this.getExpanded()\n      }, function () {\n        if (_this11.props.expandOnTextChange) {\n          _this11.expand();\n        }\n      });\n    }\n  }, {\n    key: \"handleTextInputClick\",\n    value: function handleTextInputClick() {\n      this.deselectActiveTag();\n    }\n  }, {\n    key: \"handleRemoveTag\",\n    value: function handleRemoveTag(id) {\n      this.removeTag(id);\n    }\n  }, {\n    key: \"handleRemoveMultipleTag\",\n    value: function handleRemoveMultipleTag(ids) {\n      this.deselectItems(ids);\n    }\n  }, {\n    key: \"handleListScrollBottom\",\n    value: function handleListScrollBottom() {\n      this.loadNextPage();\n    }\n  }, {\n    key: \"removeTag\",\n    value: function removeTag(id) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === id && activeTag != null) {\n        var value = this.getValue();\n        var newActiveTag = (0, _getNewActiveTagOnRemove.default)({\n          id: id,\n          value: value,\n          dir: dir\n        });\n        this.setActiveTag(newActiveTag);\n      }\n\n      this.deselectItem(id);\n    }\n  }, {\n    key: \"removeRemainingTags\",\n    value: function removeRemainingTags() {\n      var ids = this.groupedItems.remainingItems.map(function (item) {\n        return item.id;\n      });\n      var visibleItems = this.groupedItems.visibleItems;\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === REMAINING_ITEMS) {\n        var lastItem = Array.isArray(visibleItems) && visibleItems[visibleItems.length - 1];\n\n        if (lastItem) {\n          this.setActiveTag(lastItem.id);\n        }\n      } else {\n        this.deselectActiveTag();\n      }\n\n      this.removeTags(ids);\n    }\n  }, {\n    key: \"removeTags\",\n    value: function removeTags(ids) {\n      this.deselectItems(ids);\n    }\n  }, {\n    key: \"handleTagClick\",\n    value: function handleTagClick(id) {\n      var activeTag = this.getActiveTag();\n\n      if (activeTag === id) {\n        this.setActiveTag(null);\n      } else {\n        this.setActiveTag(id);\n      }\n\n      this.props.onTagClick(this.getItemById(id));\n\n      if (this.props.focusOnClick && !this.hasFocus()) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"handleComboMouseDown\",\n    value: function handleComboMouseDown(event) {\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleComboKeyDown\",\n    value: function handleComboKeyDown(event) {\n      if (this.props.allowCustomTagCreation && event.key === 'Enter') {\n        if (this.isNewCustomTagValid) {\n          this.selectItem(this.getText());\n          this.setText(null);\n        }\n      }\n\n      if (this.props.enableNavigation) {\n        if (this.props.enableListNavigation) {\n          switch (event.key) {\n            case 'ArrowDown':\n              this.navigateToNextItem(1, event);\n              break;\n\n            case 'ArrowUp':\n              this.navigateToNextItem(-1, event);\n              break;\n\n            case 'Enter':\n              this.handleEnterKeyPress(event);\n              break;\n\n            case 'Space':\n              this.selectActiveItem();\n              break;\n          }\n        }\n\n        if (this.props.enableTagNavigation) {\n          switch (event.key) {\n            case 'ArrowLeft':\n              this.navigateToNextTag(-1, event);\n              break;\n\n            case 'ArrowRight':\n              this.navigateToNextTag(1, event);\n              break;\n\n            case 'Backspace':\n              this.handleBackspace(event);\n              break;\n\n            case 'Delete':\n              this.handleDelete(event);\n          }\n        }\n      }\n\n      if (event.key === 'Escape') {\n        var expanded = this.getExpanded();\n\n        if (this.props.collapseOnEscape) {\n          if (expanded) {\n            this.collapse();\n          }\n        }\n\n        if (!expanded && this.getActiveTag()) {\n          this.setActiveTag(null);\n        }\n\n        if (!this.props.multiple) {\n          this.setText(null);\n        }\n      }\n\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(event, this);\n      }\n    }\n  }, {\n    key: \"navigateToNextItem\",\n    value: function navigateToNextItem(direction, event) {\n      var data = this.getFilteredData();\n\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      if (this.getExpanded()) {\n        var activeItem = this.getActiveItem();\n        var newActiveItem;\n\n        if (activeItem != null) {\n          newActiveItem = (0, _getNextItem.default)({\n            direction: direction,\n            data: data,\n            id: activeItem,\n            activeItem: activeItem,\n            getIdProperty: this.getIdProperty\n          });\n        } else {\n          var firstItemId;\n          var lastItemId;\n\n          if (data && data.length) {\n            firstItemId = this.getIdProperty(data[0]);\n            lastItemId = this.getIdProperty(data[data.length - 1]);\n\n            if (direction && firstItemId != null) {\n              newActiveItem = firstItemId;\n            }\n\n            if (direction === -1 && lastItemId != null) {\n              newActiveItem = lastItemId;\n            }\n          }\n        }\n\n        this.setActiveItem(newActiveItem);\n      } else {\n        this.expand();\n      }\n    }\n  }, {\n    key: \"selectActiveItem\",\n    value: function selectActiveItem() {\n      var activeItem = this.getActiveItem();\n\n      if (activeItem) {\n        this.selectItem(activeItem);\n      }\n    }\n  }, {\n    key: \"handleEnterKeyPress\",\n    value: function handleEnterKeyPress(event) {\n      var expanded = this.getExpanded();\n\n      if (expanded) {\n        this.selectActiveItem();\n      }\n\n      var activeItem = this.getActiveItem();\n\n      if (this.props.collapseOnSelectWithEnter) {\n        if (activeItem && expanded) {\n          this.collapse();\n        }\n      }\n\n      if (this.props.navigateToNextAfterSelection && this.props.multiple && activeItem) {\n        this.navigateToNextItem(1, event);\n      }\n    }\n  }, {\n    key: \"navigateToNextTag\",\n    value: function navigateToNextTag(direction, event) {\n      if (!this.isNavigationAllowed(direction)) {\n        return null;\n      }\n\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      var newActiveTag;\n      var items = this.getSelectedItems();\n      var itemsIds;\n\n      if (this.areItemsGrouped) {\n        var visibleItems = this.groupedItems.visibleItems.map(function (item) {\n          return item.id;\n        });\n        itemsIds = [].concat((0, _toConsumableArray2.default)(visibleItems), [REMAINING_ITEMS]);\n      } else {\n        itemsIds = items.map(function (item) {\n          return item.id;\n        });\n      }\n\n      var currentActiveTag = this.getActiveTag();\n      var currentIndex = itemsIds.indexOf(currentActiveTag);\n      var lastIndex = itemsIds.length - 1;\n      var lastTag = itemsIds[lastIndex];\n      var firstTag = itemsIds[0];\n      var isFirstTag = currentIndex === 0;\n      var isLastTag = currentIndex === lastIndex;\n\n      if (direction === -1 && isFirstTag) {\n        this.setActiveTag(null);\n        return null;\n      }\n\n      if (direction === 1 && isLastTag) {\n        this.setActiveTag(null);\n        return null;\n      }\n\n      if (currentActiveTag === null || currentIndex === -1) {\n        newActiveTag = direction === -1 ? lastTag : firstTag;\n      } else {\n        if (direction === -1) {\n          newActiveTag = isFirstTag ? lastTag : itemsIds[currentIndex - 1];\n        } else if (direction === 1) {\n          newActiveTag = isLastTag ? firstTag : itemsIds[currentIndex + 1];\n        }\n      }\n\n      this.setActiveTag(newActiveTag);\n      return null;\n    }\n  }, {\n    key: \"isNavigationAllowed\",\n    value: function isNavigationAllowed(direction) {\n      if (!this.props.multiple) {\n        return false;\n      }\n\n      var inputNode = this.getTextInputNode();\n\n      if (inputNode.hasSelection()) {\n        return false;\n      }\n\n      var currentActiveTag = this.getActiveTag();\n      var canNavigateLeft = inputNode.isCursorAtStartPosition() && direction === -1;\n      var canNavigateRight = inputNode.isCursorAtEndPosition() && direction === 1;\n\n      if (!canNavigateRight && !canNavigateLeft && !currentActiveTag) {\n        return false;\n      }\n\n      var items = this.getSelectedItems();\n\n      if (!Array.isArray(items)) {\n        return false;\n      }\n\n      if (items.length === 1 && currentActiveTag) {\n        this.setActiveTag(null);\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"handleBackspace\",\n    value: function handleBackspace(event) {\n      if (this.props.multiple) {\n        this.handleTagBackspaceRemove(event);\n      }\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(event) {\n      var activeTag = this.getActiveTag();\n\n      if (this.props.multiple && activeTag) {\n        this.removeTag(activeTag, 1);\n      }\n    }\n  }, {\n    key: \"handleTagBackspaceRemove\",\n    value: function handleTagBackspaceRemove(event) {\n      if (!this.props.removeTagOnBackspace) {\n        return null;\n      }\n\n      var value = this.getValue();\n\n      if (!value) {\n        return null;\n      }\n\n      var activeTag = this.getActiveTag();\n\n      if (activeTag != null) {\n        event.preventDefault();\n\n        if (activeTag === REMAINING_ITEMS) {\n          this.removeRemainingTags();\n        } else {\n          this.removeTag(activeTag, -1);\n        }\n\n        return null;\n      }\n\n      var inputNode = this.getTextInputNode();\n      var canDeleteTag = value && value.length && inputNode.isCursorAtStartPosition();\n\n      if (canDeleteTag) {\n        if (this.areItemsGrouped) {\n          var ids = this.groupedItems.remainingItems.map(function (item) {\n            return item.id;\n          });\n          this.removeTags(ids);\n        } else {\n          var items = this.getSelectedItems();\n          var lastItem = items[items.length - 1];\n          var lastItemId = lastItem.id;\n\n          if (this.props.keepTagTextOnRemove) {\n            var label = lastItem.label;\n\n            if (label && typeof label === 'string') {\n              this.setText(label);\n            }\n          }\n\n          this.removeTag(lastItemId);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"handleToolsSize\",\n    value: function handleToolsSize() {\n      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toolsNode ? this.toolsNode.getBoundingClientRect() : {\n        width: 0,\n        height: 0\n      };\n      var node = this.comboNode;\n      var computedStyle = global.getComputedStyle(node);\n      var width = size.width + parseInt(computedStyle.paddingLeft, 10) + parseInt(computedStyle.paddingRight, 10);\n      this.setState({\n        toolsSize: {\n          height: size.height,\n          width: width\n        }\n      });\n    }\n  }, {\n    key: \"expand\",\n    value: function expand() {\n      this.setExpanded(true);\n    }\n  }, {\n    key: \"collapse\",\n    value: function collapse() {\n      this.setExpanded(false);\n    }\n  }, {\n    key: \"scrollToIndex\",\n    value: function scrollToIndex(index) {\n      var listNode = this.getListNode();\n      return listNode && listNode.scrollToIndex(index);\n    }\n  }, {\n    key: \"getItemIndexById\",\n    value: function getItemIndexById(id) {\n      var index = (0, _findItemIndex.default)({\n        id: id,\n        data: this.getFilteredData(),\n        getIdProperty: this.getIdProperty\n      });\n      return index;\n    }\n  }, {\n    key: \"scrollToId\",\n    value: function scrollToId(id) {\n      var index = this.getItemIndexById(id);\n\n      if (index != null) {\n        this.scrollToIndex(index);\n      }\n    }\n  }, {\n    key: \"toggleExpand\",\n    value: function toggleExpand() {\n      var expanded = this.getExpanded();\n\n      if (expanded) {\n        this.collapse();\n      } else {\n        this.expand();\n      }\n    }\n  }, {\n    key: \"getItemByIndex\",\n    value: function getItemByIndex(index) {\n      var data = this.getFilteredData();\n\n      if (!data || !Array.isArray(data) || !data[index]) {\n        return null;\n      }\n\n      return data[index];\n    }\n  }, {\n    key: \"getItemById\",\n    value: function getItemById(id) {\n      var dataMap = this.getDataMap();\n      return dataMap && dataMap[id] || id;\n    }\n  }, {\n    key: \"updateGetIdProperty\",\n    value: function updateGetIdProperty(props) {\n      props = props || this.props;\n      this.getIdProperty = (0, _getDataProp.default)(props.idProperty);\n    }\n  }, {\n    key: \"updateGetDisplayProperty\",\n    value: function updateGetDisplayProperty(props) {\n      props = props || this.props;\n      this.getDisplayProperty = (0, _getDataProp.default)(props.displayProperty);\n    }\n  }, {\n    key: \"updateGetFilterProperty\",\n    value: function updateGetFilterProperty(props) {\n      props = props || this.props;\n      this.getFilterProperty = (0, _getDataProp.default)(props.filterProperty);\n    }\n  }, {\n    key: \"updateGroups\",\n    value: function updateGroups(_ref13) {\n      var _ref13$groupProperty = _ref13.groupProperty,\n          groupProperty = _ref13$groupProperty === void 0 ? this.props.groupProperty : _ref13$groupProperty,\n          _ref13$data = _ref13.data,\n          data = _ref13$data === void 0 ? this.getFilteredData() : _ref13$data;\n\n      if (!data) {\n        return null;\n      }\n\n      var groups = (0, _getGroups.default)(data, groupProperty);\n      this.setState({\n        groups: groups\n      });\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.focus && !this.hasFocus()) {\n        textInput.focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.blur) {\n        textInput.blur();\n      }\n    }\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      var textInput = this.getTextInputNode();\n\n      if (textInput && textInput.hasFocus) {\n        return textInput.hasFocus();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getTextInputNode\",\n    value: function getTextInputNode() {\n      return this.textInput;\n    }\n  }, {\n    key: \"getComboNode\",\n    value: function getComboNode() {\n      return this.comboNode;\n    }\n  }, {\n    key: \"getListNode\",\n    value: function getListNode() {\n      return this.listNode;\n    }\n  }, {\n    key: \"getVirtualListNode\",\n    value: function getVirtualListNode() {\n      return this.listNode && this.listNode.getVirtualListNode();\n    }\n  }, {\n    key: \"getlListNode\",\n    value: function getlListNode() {\n      return this.listNode && this.listNode.getlListNode();\n    }\n  }, {\n    key: \"addItem\",\n    value: function addItem(item) {\n      var newData = [].concat((0, _toConsumableArray2.default)(this.getData()), [item]);\n      this.setData(newData);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this12 = this;\n\n      this.setValue(null);\n      this.setText(null);\n      global.requestAnimationFrame(function () {\n        if (_this12.toolsNode) {\n          _this12.handleToolsSize();\n        }\n      });\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(id) {\n      return this.getItemById(id);\n    }\n  }, {\n    key: \"getItemCount\",\n    value: function getItemCount() {\n      var data = this.getData();\n      return Array.isArray(data) ? data.length : null;\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(_ref14) {\n      var index = _ref14.index,\n          item = _ref14.item;\n      var data = this.getData();\n      var newData = [].concat((0, _toConsumableArray2.default)(data.slice(0, index)), [item], (0, _toConsumableArray2.default)(data.slice(index)));\n      this.setData(newData);\n    }\n  }, {\n    key: \"removeItems\",\n    value: function removeItems(ids) {\n      var _this13 = this;\n\n      ids = Array.isArray(ids) ? ids : [ids];\n      var data = this.getData();\n      var newData = data.filter(function (item) {\n        var id = _this13.getIdProperty(item);\n\n        return ids.indexOf(id) === -1;\n      });\n      this.setData(newData);\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      var expanded = this.getExpanded();\n      this.setExpanded(!expanded);\n    }\n  }]);\n  return InovuaComboBox;\n}(_react.Component);\n\nfunction emptyFn() {}\n\nInovuaComboBox.defaultProps = {\n  rootClassName: 'inovua-react-toolkit-combo-box',\n  inlineFlex: false,\n  itemEllipsis: true,\n  borderRadius: 0,\n  shadow: true,\n  showShadowOnMouseOver: false,\n  clearTextOnBlur: true,\n  onKeyDown: emptyFn,\n  autoFocus: false,\n  autoBlur: false,\n  focusOnClick: true,\n  onFocus: emptyFn,\n  onBlur: emptyFn,\n  defaultActiveItem: null,\n  highlightFirst: false,\n  onTextChange: emptyFn,\n  searchable: true,\n  tagCloseIconPosition: 'end',\n  removeTagOnBackspace: true,\n  tagEllipsis: true,\n  filterMinLength: 0,\n  filterDelay: 300,\n  activeFirstItemOnFilter: true,\n  clearIcon: true,\n  toggleIcon: true,\n  showClearIconOnMouseOver: false,\n  clearTextOnSelect: true,\n  filterMode: 'contains',\n  highlightMatchedText: false,\n  onActiveTagChange: emptyFn,\n  enableTagNavigation: true,\n  onTagClick: emptyFn,\n  onActiveItemChange: emptyFn,\n  keepTagTextOnRemove: true,\n  onItemClick: emptyFn,\n  onChange: emptyFn,\n  minAutocompleteLength: 3,\n  autocompleteDelay: 300,\n  autocomplete: false,\n  defaultValue: null,\n  multiple: false,\n  removeSelectedItems: false,\n  allowSelectionToggle: true,\n  clearValueOnEmpty: true,\n  onDataSourceLoad: emptyFn,\n  idProperty: 'id',\n  displayProperty: 'label',\n  groupProperty: 'group',\n  limit: 50,\n  skip: 0,\n  onLoadingChange: emptyFn,\n  listLoadingText: 'Loading...',\n  loadingSpinner: true,\n  listEmptyText: 'No data found',\n  defaultText: null,\n  defaultExpanded: false,\n  onExpandedChange: emptyFn,\n  onExpandChange: emptyFn,\n  collapseOnEscape: true,\n  expandOnClick: true,\n  expandOnFocus: true,\n  collapseOnBlur: true,\n  onExpand: emptyFn,\n  onCollapse: emptyFn,\n  expandOnTextChange: true,\n  toggleExpandOnClick: true,\n  wrapMultiple: true,\n  theme: 'default-light',\n  enableNavigation: true,\n  enableListNavigation: true,\n  navigateToNextAfterSelection: true,\n  positions: ['bottom', 'top'],\n  offset: 2,\n  constrainTo: true\n};\n\nvar VALUE_TYPE = _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number, _propTypes.default.object, _propTypes.default.bool, _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number, _propTypes.default.object, _propTypes.default.bool]))]);\n\nInovuaComboBox.propTypes = {\n  rootClassName: _propTypes.default.string,\n  theme: _propTypes.default.string,\n  inlineFlex: _propTypes.default.bool,\n  shouldComponentUpdate: _propTypes.default.func,\n  lazyDataSource: _propTypes.default.bool,\n  remoteFilter: _propTypes.default.bool,\n  disabled: _propTypes.default.bool,\n  readOnly: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  tabIndex: _propTypes.default.number,\n  collapseOnSelect: _propTypes.default.bool,\n  clearTextOnBlur: _propTypes.default.bool,\n  listEmptyText: _propTypes.default.node,\n  listMaxHeight: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  listMinHeight: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  maxTagsLength: _propTypes.default.number,\n  defaultLoading: _propTypes.default.bool,\n  loading: _propTypes.default.bool,\n  onLoadingChange: _propTypes.default.func,\n  listLoadingText: _propTypes.default.node,\n  loadingSpinner: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.bool]),\n  onKeyDown: _propTypes.default.func,\n  onTagClick: _propTypes.default.func,\n  clearIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.func, _propTypes.default.node]),\n  toggleIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.func, _propTypes.default.node]),\n  showClearIconOnMouseOver: _propTypes.default.bool,\n  autoFocus: _propTypes.default.bool,\n  autoBlur: _propTypes.default.bool,\n  focusOnClick: _propTypes.default.bool,\n  onFocus: _propTypes.default.func,\n  onBlur: _propTypes.default.func,\n  borderRadius: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  padding: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  border: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  background: _propTypes.default.string,\n  shadow: _propTypes.default.bool,\n  showShadowOnMouseOver: _propTypes.default.bool,\n  emptyClassName: _propTypes.default.string,\n  emptyStyle: _propTypes.default.object,\n  disabledClassName: _propTypes.default.string,\n  disabledStyle: _propTypes.default.object,\n  focusedClassName: _propTypes.default.string,\n  focusedStyle: _propTypes.default.object,\n  itemBackground: _propTypes.default.string,\n  disabledItemStyle: _propTypes.default.object,\n  disabledItemClassName: _propTypes.default.string,\n  renderItem: _propTypes.default.func,\n  itemEllipsis: _propTypes.default.bool,\n  activeItemStyle: _propTypes.default.object,\n  activeItemClassName: _propTypes.default.string,\n  selectedItemStyle: _propTypes.default.object,\n  limit: _propTypes.default.number,\n  skip: _propTypes.default.number,\n  loadNextPage: _propTypes.default.func,\n  searchable: _propTypes.default.bool,\n  placeholder: _propTypes.default.node,\n  text: _propTypes.default.string,\n  defaultText: _propTypes.default.string,\n  onTextChange: _propTypes.default.func,\n  filterFunction: _propTypes.default.func,\n  filterProperty: _propTypes.default.string,\n  loadLazyDataSource: _propTypes.default.func,\n  filterMinLength: _propTypes.default.number,\n  filterDelay: _propTypes.default.number,\n  activeFirstItemOnFilter: _propTypes.default.bool,\n  renderInput: _propTypes.default.func,\n  inputClassName: _propTypes.default.string,\n  inputStyle: _propTypes.default.object,\n  clearTextOnSelect: _propTypes.default.bool,\n  filterMode: _propTypes.default.oneOf(['startsWith', 'contains']),\n  highlightMatchedText: _propTypes.default.bool,\n  autocomplete: _propTypes.default.bool,\n  minAutocompleteLength: _propTypes.default.number,\n  autocompleteDelay: _propTypes.default.number,\n  enableNavigatio: _propTypes.default.bool,\n  keepTagTextOnRemove: _propTypes.default.bool,\n  tagActiveStyle: _propTypes.default.object,\n  enableTagNavigation: _propTypes.default.bool,\n  activeTag: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  defaultActiveTag: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  onActiveTagChange: _propTypes.default.func,\n  allowCustomTagCreation: _propTypes.default.bool,\n  enableNavigation: _propTypes.default.bool,\n  enableListNavigation: _propTypes.default.bool,\n  highlightFirst: _propTypes.default.bool,\n  activeItem: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  defaultActiveItem: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  onActiveItemChange: _propTypes.default.func,\n  navigateToNextAfterSelection: _propTypes.default.bool,\n  onItemClick: _propTypes.default.func,\n  onChange: _propTypes.default.func,\n  listClassName: _propTypes.default.string,\n  selectedStyle: _propTypes.default.object,\n  selectedClassName: _propTypes.default.string,\n  renderGroup: _propTypes.default.func,\n  renderFooter: _propTypes.default.func,\n  renderHeader: _propTypes.default.func,\n  renderList: _propTypes.default.func,\n  renderListComponent: _propTypes.default.func,\n  value: VALUE_TYPE,\n  defaultValue: VALUE_TYPE,\n  defaultDisplayValue: VALUE_TYPE,\n  removeSelectedItems: _propTypes.default.bool,\n  isSelectedItemValid: _propTypes.default.func,\n  maxValueLength: _propTypes.default.number,\n  changeValueOnNavigation: _propTypes.default.bool,\n  allowSelectionToggle: _propTypes.default.bool,\n  clearSelectedOnTextChange: _propTypes.default.bool,\n  clearValueOnEmpty: _propTypes.default.bool,\n  isNewCustomTagValid: _propTypes.default.func,\n  multiple: _propTypes.default.bool,\n  renderTag: _propTypes.default.func,\n  renderTagLabel: _propTypes.default.func,\n  renderRemainingTags: _propTypes.default.func,\n  renderTags: _propTypes.default.func,\n  tagStyle: _propTypes.default.object,\n  tagBorder: _propTypes.default.string,\n  tagPadding: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagHeight: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagWidth: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  tagMinSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  tagMaxSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  tagCloseIcon: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.node, _propTypes.default.func]),\n  tagCloseIconPosition: _propTypes.default.oneOf(['start', 'end']),\n  tagEllipsis: _propTypes.default.bool,\n  removeTagOnBackspace: _propTypes.default.bool,\n  renderDisplayValue: _propTypes.default.func,\n  dataSource: function dataSource(props, propName) {\n    var dataSource = props[propName];\n\n    if (dataSource != null && typeof dataSource !== 'function' && !Array.isArray(dataSource) && !(dataSource && dataSource.then)) {\n      return new Error('dataSource must be an array, null, a promise or a function returning a promise.');\n    }\n\n    return null;\n  },\n  onDataSourceLoad: _propTypes.default.func,\n  idProperty: _propTypes.default.string,\n  displayProperty: _propTypes.default.string,\n  groupProperty: _propTypes.default.string,\n  listStyle: _propTypes.default.object,\n  relativeToViewport: _propTypes.default.bool,\n  expanded: _propTypes.default.bool,\n  defaultExpanded: _propTypes.default.bool,\n  onExpandedChange: _propTypes.default.func,\n  onExpandChange: _propTypes.default.func,\n  collapseOnEscape: _propTypes.default.bool,\n  expandOnClick: _propTypes.default.bool,\n  expandOnFocus: _propTypes.default.bool,\n  collapseOnBlur: _propTypes.default.bool,\n  enablePagination: _propTypes.default.bool,\n  onExpand: _propTypes.default.func,\n  onCollapse: _propTypes.default.func,\n  virtualListFactory: _propTypes.default.func,\n  renderListScroller: _propTypes.default.func,\n  renderVirtualList: _propTypes.default.func,\n  expandOnTextChange: _propTypes.default.bool,\n  toggleExpandOnClick: _propTypes.default.bool,\n  collapseOnSelectWithEnter: _propTypes.default.bool,\n  wrapMultiple: _propTypes.default.bool,\n  newCustomTagText: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  positions: _propTypes.default.arrayOf(_propTypes.default.string),\n  constrainTo: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.func, _propTypes.default.object, _propTypes.default.bool]),\n  offset: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }), _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  })]))])\n};\nvar _default = InovuaComboBox;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}