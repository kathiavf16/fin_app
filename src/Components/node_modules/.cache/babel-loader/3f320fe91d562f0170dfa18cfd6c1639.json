{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../../../common/isMobile\"));\n\nvar _clamp = _interopRequireDefault(require(\"../../../common/clamp\"));\n\nvar _containsNode = _interopRequireDefault(require(\"../../../common/containsNode\"));\n\nvar _matchesSelector = _interopRequireDefault(require(\"../../../common/matchesSelector\"));\n\nfunction ypos(e) {\n  if (e.targetTouches && e.targetTouches.length >= 1) {\n    return e.targetTouches[0].clientY;\n  }\n\n  return e.clientY;\n}\n\nvar InertialManager = function () {\n  function InertialManager(_ref) {\n    var node = _ref.node,\n        viewNode = _ref.viewNode,\n        arrowSelector = _ref.arrowSelector,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 5 : _ref$threshold,\n        _ref$timeConstant = _ref.timeConstant,\n        timeConstant = _ref$timeConstant === void 0 ? 360 : _ref$timeConstant,\n        _ref$initialAmplitude = _ref.initialAmplitude,\n        initialAmplitude = _ref$initialAmplitude === void 0 ? 0.8 : _ref$initialAmplitude,\n        _ref$enableMouseDrag = _ref.enableMouseDrag,\n        enableMouseDrag = _ref$enableMouseDrag === void 0 ? true : _ref$enableMouseDrag,\n        _ref$enableTouchDrag = _ref.enableTouchDrag,\n        enableTouchDrag = _ref$enableTouchDrag === void 0 ? true : _ref$enableTouchDrag,\n        _ref$setScrollPositio = _ref.setScrollPosition,\n        setScrollPosition = _ref$setScrollPositio === void 0 ? function () {} : _ref$setScrollPositio;\n    (0, _classCallCheck2.default)(this, InertialManager);\n    this.node = node;\n    this.viewNode = viewNode;\n\n    if (!arrowSelector) {\n      throw 'Please provide an arrowselector';\n    }\n\n    this.arrowSelector = arrowSelector;\n    this.tap = this.tap.bind(this);\n    this.drag = this.drag.bind(this);\n    this.release = this.release.bind(this);\n    this.track = this.track.bind(this);\n    this.autoScroll = this.autoScroll.bind(this);\n    this.min = 0;\n    this.max = null;\n    this.pressed = null;\n    this.reference = null;\n    this.offset = 0;\n    this.threshold = threshold;\n    this.timeConstant = timeConstant;\n    this.enableTouchDrag = enableTouchDrag;\n    this.enableMouseDrag = enableMouseDrag;\n    this.setScrollPosition = setScrollPosition;\n    this.initialAmplitude = initialAmplitude;\n    this.updateMaxScroll();\n    this.addEventListeners();\n  }\n\n  (0, _createClass2.default)(InertialManager, [{\n    key: \"addEventListeners\",\n    value: function addEventListeners() {\n      if (!this.node || !this.node.addEventListener) {\n        return;\n      }\n\n      if (_isMobile.default && this.enableTouchDrag) {\n        this.node.addEventListener('touchstart', this.tap, {\n          passive: false\n        });\n        this.node.addEventListener('touchend', this.release, {\n          passive: false\n        });\n        this.node.addEventListener('touchmove', this.drag, {\n          passive: false\n        });\n      }\n\n      if (!_isMobile.default && this.enableMouseDrag) {\n        this.node.addEventListener('mousedown', this.tap, {\n          passive: false\n        });\n        this.node.addEventListener('mouseup', this.release, {\n          passive: false\n        });\n        this.node.addEventListener('mousemove', this.drag, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      if (this.node && this.node.removeEventListener) {\n        this.node.removeEventListener('touchstart', this.tap, {\n          passive: false\n        });\n        this.node.removeEventListener('touchend', this.release, {\n          passive: false\n        });\n        this.node.removeEventListener('touchmove', this.drag, {\n          passive: false\n        });\n        this.node.removeEventListener('mousedown', this.tap, {\n          passive: false\n        });\n        this.node.removeEventListener('mouseup', this.release, {\n          passive: false\n        });\n        this.node.removeEventListener('mousemove', this.drag, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"getEventListneres\",\n    value: function getEventListneres() {\n      var events;\n\n      if (_isMobile.default && this.enableTouchDrag) {\n        events = {\n          onTouchStart: this.tap,\n          onTouchEnd: this.release,\n          onTouchMove: this.drag\n        };\n      }\n\n      if (!_isMobile.default && this.enableMouseDrag) {\n        events = {\n          onMouseDown: this.tap,\n          onMouseUp: this.release,\n          onMouseMove: this.drag\n        };\n      }\n\n      return events;\n    }\n  }, {\n    key: \"isArrowTarget\",\n    value: function isArrowTarget(target) {\n      if ((0, _matchesSelector.default)(target, this.arrowSelector)) {\n        return true;\n      }\n\n      var arrows = this.arrowSelector ? this.arrows || (0, _toConsumableArray2.default)(this.node.querySelectorAll(this.arrowSelector)) : [];\n\n      if (arrows.length) {\n        this.arrows = arrows;\n      }\n\n      if (arrows.length && arrows.map(function (arrow) {\n        return (0, _containsNode.default)(arrow, target);\n      }).filter(function (x) {\n        return x;\n      })[0]) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"tap\",\n    value: function tap(event) {\n      if (!this.hasScroll()) {\n        return;\n      }\n\n      if (this.isArrowTarget(event.target)) {\n        event.preventDefault();\n      }\n\n      this.pressed = true;\n      this.reference = ypos(event);\n      this.timeStamp = Date.now();\n      this.frame = this.offset;\n      this.velocity = 0;\n      this.amplitude = 0;\n      clearInterval(this.ticker);\n      this.ticker = setInterval(this.track, 16);\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(event) {\n      if (this.pressed) {\n        if (!this.hasScroll()) {\n          return;\n        }\n\n        event.preventDefault();\n        var y = ypos(event);\n        var delta = this.reference - y;\n\n        if (delta > this.threshold || delta < -this.threshold) {\n          this.reference = y;\n          this.scrollTo(this.offset + delta);\n        }\n      }\n    }\n  }, {\n    key: \"release\",\n    value: function release(event) {\n      if (!this.hasScroll() || !this.pressed) {\n        return;\n      }\n\n      this.pressed = false;\n      this.updateMaxScroll();\n\n      if (this.isArrowTarget(event.target)) {\n        event.preventDefault();\n      }\n\n      clearInterval(this.ticker);\n\n      if (this.velocity > 10 || this.velocity < -10) {\n        this.amplitude = this.initialAmplitude * this.velocity;\n        this.target = Math.round(this.offset + this.amplitude);\n        this.timestamp = Date.now();\n        requestAnimationFrame(this.autoScroll);\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(offset) {\n      if (!this.viewNode) {\n        return null;\n      }\n\n      this.offset = (0, _clamp.default)(offset, 0, this.max);\n      this.setScrollPosition(this.offset);\n    }\n  }, {\n    key: \"autoScroll\",\n    value: function autoScroll() {\n      var elapsed, delta;\n      var timeConstant = this.timeConstant;\n\n      if (this.amplitude) {\n        elapsed = Date.now() - this.timestamp;\n        delta = -this.amplitude * Math.exp(-elapsed / timeConstant);\n\n        if (delta > 0.1 || delta < -0.1) {\n          this.scrollTo(this.target + delta);\n          requestAnimationFrame(this.autoScroll);\n        } else {\n          this.scrollTo(this.target);\n        }\n      }\n    }\n  }, {\n    key: \"updateMaxScroll\",\n    value: function updateMaxScroll() {\n      this.max = this.viewNode && this.viewNode.offsetHeight - this.node.offsetHeight;\n    }\n  }, {\n    key: \"hasScroll\",\n    value: function hasScroll() {\n      if ((this.viewNode && this.viewNode.offsetHeight) !== undefined && (this.node && this.node.offsetHeight) !== undefined) {\n        return this.viewNode.offsetHeight > this.node.offsetHeight;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"track\",\n    value: function track() {\n      var now, elapsed, delta, v;\n      now = Date.now();\n      elapsed = now - this.timeStamp;\n      this.timeStamp = now;\n      delta = this.offset - this.frame;\n      this.frame = this.offset;\n      v = 1000 * delta / (1 + elapsed);\n      this.velocity = 0.8 * v + 0.2 * this.velocity;\n    }\n  }]);\n  return InertialManager;\n}();\n\nvar _default = InertialManager;\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/InertialScroller/src/InertialManager.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_toConsumableArray2","_classCallCheck2","_createClass2","_isMobile","_clamp","_containsNode","_matchesSelector","ypos","e","targetTouches","length","clientY","InertialManager","_ref","node","viewNode","arrowSelector","_ref$threshold","threshold","_ref$timeConstant","timeConstant","_ref$initialAmplitude","initialAmplitude","_ref$enableMouseDrag","enableMouseDrag","_ref$enableTouchDrag","enableTouchDrag","_ref$setScrollPositio","setScrollPosition","tap","bind","drag","release","track","autoScroll","min","max","pressed","reference","offset","updateMaxScroll","addEventListeners","key","addEventListener","passive","removeEventListeners","removeEventListener","getEventListneres","events","onTouchStart","onTouchEnd","onTouchMove","onMouseDown","onMouseUp","onMouseMove","isArrowTarget","target","arrows","querySelectorAll","map","arrow","filter","x","event","hasScroll","preventDefault","timeStamp","Date","now","frame","velocity","amplitude","clearInterval","ticker","setInterval","y","delta","scrollTo","Math","round","timestamp","requestAnimationFrame","elapsed","exp","offsetHeight","undefined","v","_default"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../../../common/isMobile\"));\n\nvar _clamp = _interopRequireDefault(require(\"../../../common/clamp\"));\n\nvar _containsNode = _interopRequireDefault(require(\"../../../common/containsNode\"));\n\nvar _matchesSelector = _interopRequireDefault(require(\"../../../common/matchesSelector\"));\n\nfunction ypos(e) {\n  if (e.targetTouches && e.targetTouches.length >= 1) {\n    return e.targetTouches[0].clientY;\n  }\n\n  return e.clientY;\n}\n\nvar InertialManager = function () {\n  function InertialManager(_ref) {\n    var node = _ref.node,\n        viewNode = _ref.viewNode,\n        arrowSelector = _ref.arrowSelector,\n        _ref$threshold = _ref.threshold,\n        threshold = _ref$threshold === void 0 ? 5 : _ref$threshold,\n        _ref$timeConstant = _ref.timeConstant,\n        timeConstant = _ref$timeConstant === void 0 ? 360 : _ref$timeConstant,\n        _ref$initialAmplitude = _ref.initialAmplitude,\n        initialAmplitude = _ref$initialAmplitude === void 0 ? 0.8 : _ref$initialAmplitude,\n        _ref$enableMouseDrag = _ref.enableMouseDrag,\n        enableMouseDrag = _ref$enableMouseDrag === void 0 ? true : _ref$enableMouseDrag,\n        _ref$enableTouchDrag = _ref.enableTouchDrag,\n        enableTouchDrag = _ref$enableTouchDrag === void 0 ? true : _ref$enableTouchDrag,\n        _ref$setScrollPositio = _ref.setScrollPosition,\n        setScrollPosition = _ref$setScrollPositio === void 0 ? function () {} : _ref$setScrollPositio;\n    (0, _classCallCheck2.default)(this, InertialManager);\n    this.node = node;\n    this.viewNode = viewNode;\n\n    if (!arrowSelector) {\n      throw 'Please provide an arrowselector';\n    }\n\n    this.arrowSelector = arrowSelector;\n    this.tap = this.tap.bind(this);\n    this.drag = this.drag.bind(this);\n    this.release = this.release.bind(this);\n    this.track = this.track.bind(this);\n    this.autoScroll = this.autoScroll.bind(this);\n    this.min = 0;\n    this.max = null;\n    this.pressed = null;\n    this.reference = null;\n    this.offset = 0;\n    this.threshold = threshold;\n    this.timeConstant = timeConstant;\n    this.enableTouchDrag = enableTouchDrag;\n    this.enableMouseDrag = enableMouseDrag;\n    this.setScrollPosition = setScrollPosition;\n    this.initialAmplitude = initialAmplitude;\n    this.updateMaxScroll();\n    this.addEventListeners();\n  }\n\n  (0, _createClass2.default)(InertialManager, [{\n    key: \"addEventListeners\",\n    value: function addEventListeners() {\n      if (!this.node || !this.node.addEventListener) {\n        return;\n      }\n\n      if (_isMobile.default && this.enableTouchDrag) {\n        this.node.addEventListener('touchstart', this.tap, {\n          passive: false\n        });\n        this.node.addEventListener('touchend', this.release, {\n          passive: false\n        });\n        this.node.addEventListener('touchmove', this.drag, {\n          passive: false\n        });\n      }\n\n      if (!_isMobile.default && this.enableMouseDrag) {\n        this.node.addEventListener('mousedown', this.tap, {\n          passive: false\n        });\n        this.node.addEventListener('mouseup', this.release, {\n          passive: false\n        });\n        this.node.addEventListener('mousemove', this.drag, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      if (this.node && this.node.removeEventListener) {\n        this.node.removeEventListener('touchstart', this.tap, {\n          passive: false\n        });\n        this.node.removeEventListener('touchend', this.release, {\n          passive: false\n        });\n        this.node.removeEventListener('touchmove', this.drag, {\n          passive: false\n        });\n        this.node.removeEventListener('mousedown', this.tap, {\n          passive: false\n        });\n        this.node.removeEventListener('mouseup', this.release, {\n          passive: false\n        });\n        this.node.removeEventListener('mousemove', this.drag, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"getEventListneres\",\n    value: function getEventListneres() {\n      var events;\n\n      if (_isMobile.default && this.enableTouchDrag) {\n        events = {\n          onTouchStart: this.tap,\n          onTouchEnd: this.release,\n          onTouchMove: this.drag\n        };\n      }\n\n      if (!_isMobile.default && this.enableMouseDrag) {\n        events = {\n          onMouseDown: this.tap,\n          onMouseUp: this.release,\n          onMouseMove: this.drag\n        };\n      }\n\n      return events;\n    }\n  }, {\n    key: \"isArrowTarget\",\n    value: function isArrowTarget(target) {\n      if ((0, _matchesSelector.default)(target, this.arrowSelector)) {\n        return true;\n      }\n\n      var arrows = this.arrowSelector ? this.arrows || (0, _toConsumableArray2.default)(this.node.querySelectorAll(this.arrowSelector)) : [];\n\n      if (arrows.length) {\n        this.arrows = arrows;\n      }\n\n      if (arrows.length && arrows.map(function (arrow) {\n        return (0, _containsNode.default)(arrow, target);\n      }).filter(function (x) {\n        return x;\n      })[0]) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"tap\",\n    value: function tap(event) {\n      if (!this.hasScroll()) {\n        return;\n      }\n\n      if (this.isArrowTarget(event.target)) {\n        event.preventDefault();\n      }\n\n      this.pressed = true;\n      this.reference = ypos(event);\n      this.timeStamp = Date.now();\n      this.frame = this.offset;\n      this.velocity = 0;\n      this.amplitude = 0;\n      clearInterval(this.ticker);\n      this.ticker = setInterval(this.track, 16);\n    }\n  }, {\n    key: \"drag\",\n    value: function drag(event) {\n      if (this.pressed) {\n        if (!this.hasScroll()) {\n          return;\n        }\n\n        event.preventDefault();\n        var y = ypos(event);\n        var delta = this.reference - y;\n\n        if (delta > this.threshold || delta < -this.threshold) {\n          this.reference = y;\n          this.scrollTo(this.offset + delta);\n        }\n      }\n    }\n  }, {\n    key: \"release\",\n    value: function release(event) {\n      if (!this.hasScroll() || !this.pressed) {\n        return;\n      }\n\n      this.pressed = false;\n      this.updateMaxScroll();\n\n      if (this.isArrowTarget(event.target)) {\n        event.preventDefault();\n      }\n\n      clearInterval(this.ticker);\n\n      if (this.velocity > 10 || this.velocity < -10) {\n        this.amplitude = this.initialAmplitude * this.velocity;\n        this.target = Math.round(this.offset + this.amplitude);\n        this.timestamp = Date.now();\n        requestAnimationFrame(this.autoScroll);\n      }\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo(offset) {\n      if (!this.viewNode) {\n        return null;\n      }\n\n      this.offset = (0, _clamp.default)(offset, 0, this.max);\n      this.setScrollPosition(this.offset);\n    }\n  }, {\n    key: \"autoScroll\",\n    value: function autoScroll() {\n      var elapsed, delta;\n      var timeConstant = this.timeConstant;\n\n      if (this.amplitude) {\n        elapsed = Date.now() - this.timestamp;\n        delta = -this.amplitude * Math.exp(-elapsed / timeConstant);\n\n        if (delta > 0.1 || delta < -0.1) {\n          this.scrollTo(this.target + delta);\n          requestAnimationFrame(this.autoScroll);\n        } else {\n          this.scrollTo(this.target);\n        }\n      }\n    }\n  }, {\n    key: \"updateMaxScroll\",\n    value: function updateMaxScroll() {\n      this.max = this.viewNode && this.viewNode.offsetHeight - this.node.offsetHeight;\n    }\n  }, {\n    key: \"hasScroll\",\n    value: function hasScroll() {\n      if ((this.viewNode && this.viewNode.offsetHeight) !== undefined && (this.node && this.node.offsetHeight) !== undefined) {\n        return this.viewNode.offsetHeight > this.node.offsetHeight;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"track\",\n    value: function track() {\n      var now, elapsed, delta, v;\n      now = Date.now();\n      elapsed = now - this.timeStamp;\n      this.timeStamp = now;\n      delta = this.offset - this.frame;\n      this.frame = this.offset;\n      v = 1000 * delta / (1 + elapsed);\n      this.velocity = 0.8 * v + 0.2 * this.velocity;\n    }\n  }]);\n  return InertialManager;\n}();\n\nvar _default = InertialManager;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}