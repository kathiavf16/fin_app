{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _hasSticky = require(\"../../../packages/hasSticky\");\n\nvar StickyRowsContainer = function StickyRowsContainer(props) {\n  var latestProps = (0, _react.useRef)(props);\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  var currentHeightRef = (0, _react.useRef)(0);\n  var domNodeRef = (0, _react.useRef)(null);\n  var nonEmptyRowElementsRefRef = (0, _react.useRef)(null);\n  var rowElementsRef = (0, _react.useRef)(null);\n  var renderedRowsRef = (0, _react.useRef)([]);\n  var scrollTopRef = (0, _react.useRef)(0);\n  latestProps.current = props;\n\n  var setEnteringRow = function setEnteringRow(_ref) {\n    var scrollTop = _ref.scrollTop,\n        enteringRow = _ref.enteringRow;\n\n    if (enteringRow == null) {\n      scrollTopRef.current = scrollTop;\n      var domNode = domNodeRef.current;\n      (0, _toConsumableArray2.default)(domNode.children).forEach(function (rowNode) {\n        rowNode.style.transform = \"translate3d(0px, 0px, 0px)\";\n      });\n      return;\n    }\n\n    scrollTopRef.current = scrollTop;\n    var rowsToTranslateIndexes = [];\n    var rowsToTranslate = renderedRowsRef.current.filter(function (r, i) {\n      var result = r.scale >= enteringRow.scale;\n\n      if (result) {\n        rowsToTranslateIndexes.push(i);\n      }\n\n      return result;\n    });\n    rowsToTranslate.forEach(function (rowToTranslate, i) {\n      var rowToTranslateIndex = rowsToTranslateIndexes[i];\n      var domNode = domNodeRef.current;\n      var rowNode = domNode.children[rowToTranslateIndex];\n\n      if (rowNode) {\n        var y = props.rowHeightManager.getRowOffset(enteringRow.index) - scrollTop - currentHeightRef.current;\n        rowNode.style.transform = \"translate3d(0px, \".concat(y, \"px, 0px)\");\n      }\n    });\n  };\n\n  var setStickyRows = function setStickyRows(content, rows, config) {\n    var domNode = domNodeRef.current;\n    var renderedContent = content;\n\n    if (content == null) {\n      renderedContent = nonEmptyRowElementsRefRef.current;\n\n      if (domNode && rowElementsRef.current) {\n        domNode.style.opacity = '0';\n        domNode.style.pointerEvents = 'none';\n      }\n    } else {\n      if (domNode && !rowElementsRef.current) {\n        domNode.style.opacity = '1';\n        domNode.style.pointerEvents = 'all';\n      }\n    }\n\n    setContent(renderedContent);\n\n    if (content) {\n      nonEmptyRowElementsRefRef.current = content;\n    }\n\n    renderedRowsRef.current = rows;\n    rowElementsRef.current = content;\n    setEnteringRow(config);\n  };\n\n  var getCurrentVisibleStickyRowsCount = function getCurrentVisibleStickyRowsCount() {\n    return rowElementsRef.current ? rowElementsRef.current.length : 0;\n  };\n\n  (0, _react.useLayoutEffect)(function () {\n    var domNode = domNodeRef.current;\n    var totalHeight = 0;\n\n    if (domNode && domNode.children) {\n      (0, _toConsumableArray2.default)(domNode.children).forEach(function (c, i) {\n        c.style.zIndex = 1000 - i;\n        totalHeight += c.offsetHeight;\n      });\n      currentHeightRef.current = totalHeight;\n    }\n  }, [content]);\n  (0, _react.useLayoutEffect)(function () {\n    if (props.handle) {\n      props.handle({\n        setStickyRows: setStickyRows,\n        getCurrentVisibleStickyRowsCount: getCurrentVisibleStickyRowsCount,\n        setEnteringRow: setEnteringRow\n      });\n    }\n\n    return function () {\n      var props = latestProps.current;\n\n      if (props && typeof props.handle === 'function') {\n        props.handle(null);\n      }\n    };\n  }, []);\n  return _react.default.createElement(\"div\", {\n    className: \"InovuaReactDataGrid__virtual-list-sticky-rows-container\",\n    ref: domNodeRef,\n    style: (0, _defineProperty2.default)({\n      position: _hasSticky.sticky,\n      top: 0,\n      left: 0,\n      right: 0,\n      height: 0,\n      zIndex: 1,\n      contain: 'layout'\n    }, props.rtl ? 'transform' : '', props.rtl ? \"translate3d(\".concat(props.stickyOffset, \"px, 0px, 0px)\") : '')\n  }, content);\n};\n\nvar _default = _react.default.memo(StickyRowsContainer);\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/react-virtual-list-pro/src/StickyRowsContainer.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_defineProperty2","_toConsumableArray2","_slicedToArray2","_react","_hasSticky","StickyRowsContainer","props","latestProps","useRef","_useState","useState","_useState2","content","setContent","currentHeightRef","domNodeRef","nonEmptyRowElementsRefRef","rowElementsRef","renderedRowsRef","scrollTopRef","current","setEnteringRow","_ref","scrollTop","enteringRow","domNode","children","forEach","rowNode","style","transform","rowsToTranslateIndexes","rowsToTranslate","filter","r","i","result","scale","push","rowToTranslate","rowToTranslateIndex","y","rowHeightManager","getRowOffset","index","concat","setStickyRows","rows","config","renderedContent","opacity","pointerEvents","getCurrentVisibleStickyRowsCount","length","useLayoutEffect","totalHeight","c","zIndex","offsetHeight","handle","createElement","className","ref","position","sticky","top","left","right","height","contain","rtl","stickyOffset","_default","memo"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _hasSticky = require(\"../../../packages/hasSticky\");\n\nvar StickyRowsContainer = function StickyRowsContainer(props) {\n  var latestProps = (0, _react.useRef)(props);\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  var currentHeightRef = (0, _react.useRef)(0);\n  var domNodeRef = (0, _react.useRef)(null);\n  var nonEmptyRowElementsRefRef = (0, _react.useRef)(null);\n  var rowElementsRef = (0, _react.useRef)(null);\n  var renderedRowsRef = (0, _react.useRef)([]);\n  var scrollTopRef = (0, _react.useRef)(0);\n  latestProps.current = props;\n\n  var setEnteringRow = function setEnteringRow(_ref) {\n    var scrollTop = _ref.scrollTop,\n        enteringRow = _ref.enteringRow;\n\n    if (enteringRow == null) {\n      scrollTopRef.current = scrollTop;\n      var domNode = domNodeRef.current;\n      (0, _toConsumableArray2.default)(domNode.children).forEach(function (rowNode) {\n        rowNode.style.transform = \"translate3d(0px, 0px, 0px)\";\n      });\n      return;\n    }\n\n    scrollTopRef.current = scrollTop;\n    var rowsToTranslateIndexes = [];\n    var rowsToTranslate = renderedRowsRef.current.filter(function (r, i) {\n      var result = r.scale >= enteringRow.scale;\n\n      if (result) {\n        rowsToTranslateIndexes.push(i);\n      }\n\n      return result;\n    });\n    rowsToTranslate.forEach(function (rowToTranslate, i) {\n      var rowToTranslateIndex = rowsToTranslateIndexes[i];\n      var domNode = domNodeRef.current;\n      var rowNode = domNode.children[rowToTranslateIndex];\n\n      if (rowNode) {\n        var y = props.rowHeightManager.getRowOffset(enteringRow.index) - scrollTop - currentHeightRef.current;\n        rowNode.style.transform = \"translate3d(0px, \".concat(y, \"px, 0px)\");\n      }\n    });\n  };\n\n  var setStickyRows = function setStickyRows(content, rows, config) {\n    var domNode = domNodeRef.current;\n    var renderedContent = content;\n\n    if (content == null) {\n      renderedContent = nonEmptyRowElementsRefRef.current;\n\n      if (domNode && rowElementsRef.current) {\n        domNode.style.opacity = '0';\n        domNode.style.pointerEvents = 'none';\n      }\n    } else {\n      if (domNode && !rowElementsRef.current) {\n        domNode.style.opacity = '1';\n        domNode.style.pointerEvents = 'all';\n      }\n    }\n\n    setContent(renderedContent);\n\n    if (content) {\n      nonEmptyRowElementsRefRef.current = content;\n    }\n\n    renderedRowsRef.current = rows;\n    rowElementsRef.current = content;\n    setEnteringRow(config);\n  };\n\n  var getCurrentVisibleStickyRowsCount = function getCurrentVisibleStickyRowsCount() {\n    return rowElementsRef.current ? rowElementsRef.current.length : 0;\n  };\n\n  (0, _react.useLayoutEffect)(function () {\n    var domNode = domNodeRef.current;\n    var totalHeight = 0;\n\n    if (domNode && domNode.children) {\n      (0, _toConsumableArray2.default)(domNode.children).forEach(function (c, i) {\n        c.style.zIndex = 1000 - i;\n        totalHeight += c.offsetHeight;\n      });\n      currentHeightRef.current = totalHeight;\n    }\n  }, [content]);\n  (0, _react.useLayoutEffect)(function () {\n    if (props.handle) {\n      props.handle({\n        setStickyRows: setStickyRows,\n        getCurrentVisibleStickyRowsCount: getCurrentVisibleStickyRowsCount,\n        setEnteringRow: setEnteringRow\n      });\n    }\n\n    return function () {\n      var props = latestProps.current;\n\n      if (props && typeof props.handle === 'function') {\n        props.handle(null);\n      }\n    };\n  }, []);\n  return _react.default.createElement(\"div\", {\n    className: \"InovuaReactDataGrid__virtual-list-sticky-rows-container\",\n    ref: domNodeRef,\n    style: (0, _defineProperty2.default)({\n      position: _hasSticky.sticky,\n      top: 0,\n      left: 0,\n      right: 0,\n      height: 0,\n      zIndex: 1,\n      contain: 'layout'\n    }, props.rtl ? 'transform' : '', props.rtl ? \"translate3d(\".concat(props.stickyOffset, \"px, 0px, 0px)\") : '')\n  }, content);\n};\n\nvar _default = _react.default.memo(StickyRowsContainer);\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}