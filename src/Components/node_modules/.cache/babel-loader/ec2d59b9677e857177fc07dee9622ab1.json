{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _region = _interopRequireDefault(require(\"../../packages/region\"));\n\nvar _ResizeOverlay = _interopRequireDefault(require(\"./ResizeOverlay\"));\n\nvar _setupColumnResize = _interopRequireDefault(require(\"./setupColumnResize\"));\n\nvar _join = _interopRequireDefault(require(\"../../packages/join\"));\n\nvar _FakeFlex = _interopRequireDefault(require(\"../../FakeFlex\"));\n\nvar _HeaderLayout = _interopRequireDefault(require(\"./HeaderLayout\"));\n\nvar _Content = _interopRequireDefault(require(\"./Content\"));\n\nvar _context = require(\"../../context\");\n\nvar _isMobile = _interopRequireDefault(require(\"../../packages/isMobile\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar height100 = {\n  height: '100%'\n};\n\nvar InovuaDataGridColumnLayout = function (_React$Component) {\n  (0, _inherits2.default)(InovuaDataGridColumnLayout, _React$Component);\n\n  var _super = _createSuper(InovuaDataGridColumnLayout);\n\n  function InovuaDataGridColumnLayout(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaDataGridColumnLayout);\n    _this = _super.call(this, props);\n    _this.scrollTop = 0;\n    _this.headerLayout = null;\n\n    _this.getDOMNode = function () {\n      return _this.columnLayoutRef.current;\n    };\n\n    _this.getContentRows = function () {\n      return _this.content.getRows();\n    };\n\n    _this.getScrollTop = function () {\n      return _this.scrollTop || 0;\n    };\n\n    _this.renderHeaderLayout = function (computedProps) {\n      return _react.default.createElement(_HeaderLayout.default, Object.assign({}, computedProps, {\n        onResizeMouseDown: _this.onResizeMouseDown.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeTouchStart: _this.onResizeTouchStart.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onFilterValueChange: computedProps.computedOnColumnFilterValueChange,\n        ref: _this.refHeaderLayout,\n        getScrollLeftMax: _this.getScrollLeftMax,\n        setScrollLeft: _this.setScrollLeft\n      }));\n    };\n\n    _this.renderContent = function (computedProps) {\n      var groupBy = computedProps.groupBy;\n      var groupByValue = groupBy && groupBy.length ? groupBy : null;\n      return _react.default.createElement(_Content.default, Object.assign({\n        key: \"content\"\n      }, computedProps, {\n        getScrollLeftMax: _this.getScrollLeftMax,\n        groupBy: groupByValue,\n        before: _this.renderLockedStartRows(computedProps),\n        after: _this.renderLockedEndRows(computedProps),\n        ref: _this.refContent,\n        columns: computedProps.visibleColumns,\n        minWidth: computedProps.minWidth,\n        maxWidth: computedProps.maxWidth,\n        onDragRowMouseDown: _this.onDragRowMouseDownHandle,\n        onContainerScrollHorizontal: _this.onContainerScrollHorizontal.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onContainerScrollVertical: _this.onContainerScrollVertical.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onColumnRenderStartIndexChange: _this.onColumnRenderStartIndexChange\n      }));\n    };\n\n    _this.onDragRowMouseDownHandle = function (ev, index, cellNode) {};\n\n    _this.renderLockedEndRows = function (computedProps) {\n      return null;\n    };\n\n    _this.renderLockedStartRows = function (computedProps) {\n      return null;\n    };\n\n    _this.renderLockedRows = function (rows, position, computedProps) {\n      return null;\n    };\n\n    _this.renderResizeOverlay = function (computedProps) {\n      return _react.default.createElement(_ResizeOverlay.default, {\n        resizeProxyStyle: computedProps.resizeProxyStyle,\n        columnResizeProxyWidth: computedProps.columnResizeProxyWidth,\n        columnResizeHandleWidth: computedProps.columnResizeHandleWidth,\n        rtl: computedProps.rtl,\n        ref: _this.refResizeOverlay\n      });\n    };\n\n    _this.onColumnRenderStartIndexChange = function (columnRenderStartIndex) {\n      if (_this.headerLayout) {\n        _this.headerLayout.setColumnRenderStartIndex(columnRenderStartIndex);\n      }\n    };\n\n    _this.onContainerScrollVertical = function (computedProps, scrollTop) {\n      _this.scrollTop = scrollTop;\n      var computedLockedRows = computedProps.computedLockedRows,\n          rowHeight = computedProps.rowHeight,\n          stickyHeaders = computedProps.stickyHeaders,\n          groupBy = computedProps.groupBy;\n\n      if (rowHeight && stickyHeaders && groupBy && groupBy.length) {\n        _this.updateStickyHeader(scrollTop);\n      }\n\n      if (computedLockedRows && computedLockedRows.length) {\n        _this.updateLockedRows(scrollTop);\n      }\n\n      if (computedProps.onScroll) {\n        computedProps.onScroll();\n      }\n    };\n\n    _this.onContainerScrollHorizontal = function (computedProps, scrollLeft) {\n      _this.scrollLeft = scrollLeft;\n\n      if (_this.headerLayout) {\n        _this.headerLayout.onContainerScrollHorizontal(scrollLeft);\n      }\n\n      if (computedProps.onScroll) {\n        computedProps.onScroll();\n      }\n    };\n\n    _this.getScrollLeft = function () {\n      return _this.scrollLeft || 0;\n    };\n\n    _this.getScrollLeftMax = function () {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return 0;\n      }\n\n      return vl.scrollContainer.scrollLeftMax;\n    };\n\n    _this.getScrollTopMax = function () {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      return vl.scrollContainer.scrollTopMax;\n    };\n\n    _this.setScrollLeft = function (scrollLeft) {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      vl.scrollLeft = scrollLeft;\n    };\n\n    _this.setScrollTop = function (scrollTop) {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      vl.scrollTop = scrollTop;\n    };\n\n    _this.getVirtualList = function () {\n      return _this.content ? _this.content.virtualList : null;\n    };\n\n    _this.startEdit = function (args) {\n      return _this.content.startEdit(args);\n    };\n\n    _this.cancelEdit = function (args) {\n      return _this.content.cancelEdit(args);\n    };\n\n    _this.completeEdit = function (args) {\n      return _this.content.completeEdit(args);\n    };\n\n    _this.getRenderRange = function () {\n      return _this.content.getRenderRange();\n    };\n\n    _this.getHeaderLayout = function () {\n      return _this.headerLayout;\n    };\n\n    _this.getHeaderCells = function () {\n      return _this.getHeaderLayout().getHeaderCells();\n    };\n\n    _this.getHeader = function () {\n      return _this.headerLayout.getHeader();\n    };\n\n    _this.getGroupToolbar = function () {\n      return _this.headerLayout.getGroupToolbar();\n    };\n\n    _this.getDOMColumnHeaderAt = function (index) {\n      return _this.headerLayout.getCellDOMNodeAt(index);\n    };\n\n    _this.onResizeMouseDown = function () {\n      var _this2;\n\n      if (_isMobile.default) {\n        return;\n      }\n\n      (_this2 = _this).onResizeDownAction.apply(_this2, arguments);\n    };\n\n    _this.onResizeDownAction = function (computedProps, config, _ref) {\n      var colHeaderNode = _ref.colHeaderNode,\n          event = _ref.event,\n          groupColumns = _ref.groupColumns;\n      var visibleIndex = config.computedVisibleIndex;\n\n      _this.setupColumnResize(computedProps, {\n        groupColumns: groupColumns,\n        visibleIndex: visibleIndex !== undefined ? visibleIndex : config.visibleIndex,\n        colHeaderNode: colHeaderNode,\n        headerNode: _this.getHeader().getDOMNode(),\n        event: event\n      });\n    };\n\n    _this.onResizeTouchStart = function () {\n      var _this3;\n\n      (_this3 = _this).onResizeDownAction.apply(_this3, arguments);\n    };\n\n    _this.setupColumnResize = function (computedProps, _ref2) {\n      var visibleIndex = _ref2.visibleIndex,\n          groupColumns = _ref2.groupColumns,\n          colHeaderNode = _ref2.colHeaderNode,\n          event = _ref2.event;\n      event.stopPropagation();\n\n      if (event.ctrlKey) {\n        return;\n      }\n\n      var rtl = computedProps.rtl;\n\n      var region = _region.default.from(event.currentTarget.firstChild || event.currentTarget);\n\n      var columns = computedProps.visibleColumns;\n      var firstFlexIndex = columns.reduce(function (index, col, i) {\n        if (col.flex != null && index == -1) {\n          return i;\n        }\n\n        return index;\n      }, -1);\n      var index = visibleIndex;\n\n      var headerRegion = _region.default.from(_this.getHeaderLayout().headerDomNode.current);\n\n      var constrainTo = _region.default.from(headerRegion.get());\n\n      constrainTo.set((0, _defineProperty2.default)({}, _this.props.rtl ? 'left' : 'right', (_this.props.rtl ? -1 : 1) * (global.screen ? global.screen.width * 3 : _region.default.from(document.documentElement).getRight() * 2)));\n      var column = columns[index];\n\n      var columnRegion = _region.default.from(colHeaderNode);\n\n      var extraOffset = column.lastInGroup ? region.width : region.width / 2;\n      var maxPos;\n\n      if (groupColumns) {\n        var columnsMap = computedProps.columnsMap;\n        var groupCols = groupColumns.map(function (colId) {\n          return columnsMap[colId];\n        });\n\n        var firstColumnRegion = _region.default.from(_this.getDOMColumnHeaderAt(groupCols[0].computedVisibleIndex));\n\n        var minWidth = groupCols.reduce(function (acc, col) {\n          return acc + col.computedMinWidth;\n        }, 0);\n        var maxWidth = groupCols.reduce(function (acc, col) {\n          return acc + (col.computedMaxWidth || Infinity);\n        }, 0);\n        var pos = rtl ? firstColumnRegion.right - minWidth - extraOffset : minWidth + firstColumnRegion.left - extraOffset;\n        constrainTo.set((0, _defineProperty2.default)({}, rtl ? 'right' : 'left', pos));\n\n        if (maxWidth !== Infinity) {\n          maxPos = rtl ? firstColumnRegion.right - maxWidth : firstColumnRegion.left + maxWidth + extraOffset;\n        }\n      } else {\n        var _minWidth = column.computedMinWidth;\n\n        if (_this.props.rtl) {\n          var right = columnRegion.right - _minWidth - extraOffset;\n          constrainTo.set({\n            right: right\n          });\n\n          if (column.computedMaxWidth) {\n            maxPos = columnRegion.right - column.computedMaxWidth;\n          }\n        } else {\n          var left = _minWidth + columnRegion.left - extraOffset;\n          constrainTo.set({\n            left: left\n          });\n\n          if (column.computedMaxWidth) {\n            maxPos = columnRegion.left + column.computedMaxWidth;\n          }\n        }\n      }\n\n      var shareSpace = computedProps.shareSpaceOnResize;\n      var nextCol = columns[index + 1];\n\n      var nextColHeaderNode = _this.getDOMColumnHeaderAt(index + 1);\n\n      var nextColumnRegion = nextCol ? _region.default.from(nextColHeaderNode) : null;\n\n      if (column && column.computedResizable === false || nextCol && nextCol.computedResizable === false) {\n        shareSpace = false;\n      }\n\n      if (shareSpace && nextColHeaderNode) {\n        if (_this.props.rtl) {\n          var nextColLeft = nextColumnRegion.left + nextCol.computedMinWidth;\n\n          if (!maxPos || nextColLeft > maxPos) {\n            maxPos = nextColLeft;\n          }\n        } else {\n          var nextColRight = nextColumnRegion.right - nextCol.computedMinWidth;\n\n          if (!maxPos || nextColRight < maxPos) {\n            maxPos = nextColRight;\n          }\n        }\n      }\n\n      if (maxPos != null) {\n        constrainTo.set((0, _defineProperty2.default)({}, _this.props.rtl ? 'left' : 'right', maxPos));\n      }\n\n      if (_this.props.rtl) {\n        if (nextCol) {\n          constrainTo.set({\n            left: constrainTo.left - computedProps.columnResizeHandleWidth / 2\n          });\n        }\n\n        constrainTo.set({\n          right: constrainTo.right + computedProps.columnResizeHandleWidth\n        });\n      }\n\n      _this.props.coverHandleRef.current.setCursor('col-resize');\n\n      (0, _setupColumnResize.default)({\n        headerRegion: headerRegion,\n        constrainTo: constrainTo,\n        region: region,\n        columns: columns,\n        index: index,\n        rtl: _this.props.rtl,\n        extraOffset: 0,\n        firstFlexIndex: firstFlexIndex,\n        groupColumns: groupColumns,\n        shareSpaceOnResize: computedProps.shareSpaceOnResize,\n        shareSpace: shareSpace,\n        nextColumnSize: nextColumnRegion ? nextColumnRegion.width : null,\n        initialSize: columnRegion.width\n      }, {\n        onResizeDragInit: _this.onResizeDragInit.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeDrag: _this.onResizeDrag.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeDrop: _this.onResizeDrop.bind((0, _assertThisInitialized2.default)(_this), computedProps)\n      }, event);\n    };\n\n    _this.onResizeDragInit = function (computedProps, _ref3) {\n      var offset = _ref3.offset,\n          constrained = _ref3.constrained;\n\n      var offsetTop = _this.getHeaderLayout().getHeader().domRef.current.offsetTop;\n\n      _this.props.coverHandleRef.current.setActive(true);\n\n      _this.resizeOverlay.setOffset(offset).setActive(true, {\n        offsetTop: offsetTop\n      }).setConstrained(constrained);\n    };\n\n    _this.onResizeDrop = function (computedProps, _ref4) {\n      var index = _ref4.index,\n          offset = _ref4.offset,\n          diff = _ref4.diff,\n          groupColumns = _ref4.groupColumns,\n          constrained = _ref4.constrained,\n          size = _ref4.size,\n          nextColumnSize = _ref4.nextColumnSize,\n          firstFlexIndex = _ref4.firstFlexIndex,\n          shareSpace = _ref4.shareSpace;\n\n      _this.props.coverHandleRef.current.setActive(false);\n\n      if (_this.resizeOverlay) {\n        _this.resizeOverlay.setOffset(offset).setConstrained(constrained).setActive(false);\n      }\n\n      computedProps.computedOnColumnResize({\n        groupColumns: groupColumns,\n        diff: diff,\n        index: index,\n        size: size,\n        nextColumnSize: nextColumnSize,\n        firstFlexIndex: firstFlexIndex,\n        shareSpace: shareSpace\n      });\n    };\n\n    _this.onResizeDrag = function (computedProps, _ref5) {\n      var offset = _ref5.offset,\n          constrained = _ref5.constrained;\n\n      if (_this.resizeOverlay) {\n        _this.resizeOverlay.setOffset(offset).setConstrained(constrained);\n      }\n    };\n\n    _this.isRowFullyVisible = function (index) {\n      return _this.content.isRowFullyVisible(index);\n    };\n\n    _this.refResizeOverlay = function (r) {\n      _this.resizeOverlay = r;\n    };\n\n    _this.refHeaderLayout = function (layout) {\n      _this.headerLayout = layout;\n    };\n\n    _this.columnLayoutRef = (0, _react.createRef)();\n\n    _this.refContent = function (c) {\n      _this.content = c;\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaDataGridColumnLayout, [{\n    key: \"tryStartEdit\",\n    value: function tryStartEdit(args) {\n      return this.content.tryStartEdit(args);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var className = (0, _join.default)('InovuaReactDataGrid__column-layout');\n      return _react.default.createElement(_context.Consumer, null, function (computedProps) {\n        var flexIndex = 1;\n        var useNativeFlex = computedProps.useNativeFlex;\n        _this4.lastComputedProps = computedProps;\n        return _react.default.createElement(\"div\", {\n          ref: _this4.columnLayoutRef,\n          className: className,\n          style: _objectSpread(_objectSpread({}, height100), _this4.props.style)\n        }, _react.default.createElement(_FakeFlex.default, {\n          useNativeFlex: useNativeFlex,\n          flexIndex: flexIndex,\n          getNode: _this4.getDOMNode\n        }, _this4.renderHeaderLayout(computedProps), _this4.renderContent(computedProps)), _this4.renderReorderRowProxy(computedProps), _this4.renderResizeOverlay(computedProps), _this4.renderDragRowArrow(computedProps));\n      });\n    }\n  }, {\n    key: \"renderReorderRowProxy\",\n    value: function renderReorderRowProxy() {\n      return null;\n    }\n  }, {\n    key: \"renderDragRowArrow\",\n    value: function renderDragRowArrow() {\n      return null;\n    }\n  }, {\n    key: \"updateLockedRows\",\n    value: function updateLockedRows(scrollTop) {\n      return;\n    }\n  }, {\n    key: \"updateStickyHeader\",\n    value: function updateStickyHeader() {}\n  }]);\n  return InovuaDataGridColumnLayout;\n}(_react.default.Component);\n\nexports.default = InovuaDataGridColumnLayout;\nInovuaDataGridColumnLayout.defaultProps = {\n  reorderProxySize: 3\n};\nInovuaDataGridColumnLayout.propTypes = {\n  minRowWidth: _propTypes.default.number,\n  onMount: _propTypes.default.func,\n  onUnmount: _propTypes.default.func,\n  onRowMouseEnter: _propTypes.default.func,\n  onRowMouseLeave: _propTypes.default.func,\n  reorderProxySize: _propTypes.default.number.isRequired\n};","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/Layout/ColumnLayout/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_defineProperty2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_propTypes","_region","_ResizeOverlay","_setupColumnResize","_join","_FakeFlex","_HeaderLayout","_Content","_context","_isMobile","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","height100","height","InovuaDataGridColumnLayout","_React$Component","_super","props","_this","scrollTop","headerLayout","getDOMNode","columnLayoutRef","current","getContentRows","content","getRows","getScrollTop","renderHeaderLayout","computedProps","createElement","assign","onResizeMouseDown","bind","onResizeTouchStart","onFilterValueChange","computedOnColumnFilterValueChange","ref","refHeaderLayout","getScrollLeftMax","setScrollLeft","renderContent","groupBy","groupByValue","before","renderLockedStartRows","after","renderLockedEndRows","refContent","columns","visibleColumns","minWidth","maxWidth","onDragRowMouseDown","onDragRowMouseDownHandle","onContainerScrollHorizontal","onContainerScrollVertical","onColumnRenderStartIndexChange","ev","index","cellNode","renderLockedRows","rows","position","renderResizeOverlay","resizeProxyStyle","columnResizeProxyWidth","columnResizeHandleWidth","rtl","refResizeOverlay","columnRenderStartIndex","setColumnRenderStartIndex","computedLockedRows","rowHeight","stickyHeaders","updateStickyHeader","updateLockedRows","onScroll","scrollLeft","getScrollLeft","vl","getVirtualList","scrollContainer","scrollLeftMax","getScrollTopMax","scrollTopMax","setScrollTop","virtualList","startEdit","args","cancelEdit","completeEdit","getRenderRange","getHeaderLayout","getHeaderCells","getHeader","getGroupToolbar","getDOMColumnHeaderAt","getCellDOMNodeAt","_this2","onResizeDownAction","config","_ref","colHeaderNode","event","groupColumns","visibleIndex","computedVisibleIndex","setupColumnResize","undefined","headerNode","_this3","_ref2","stopPropagation","ctrlKey","region","from","currentTarget","firstChild","firstFlexIndex","reduce","col","flex","headerRegion","headerDomNode","constrainTo","get","set","global","screen","width","document","documentElement","getRight","column","columnRegion","extraOffset","lastInGroup","maxPos","columnsMap","groupCols","map","colId","firstColumnRegion","acc","computedMinWidth","computedMaxWidth","Infinity","pos","right","left","_minWidth","shareSpace","shareSpaceOnResize","nextCol","nextColHeaderNode","nextColumnRegion","computedResizable","nextColLeft","nextColRight","coverHandleRef","setCursor","nextColumnSize","initialSize","onResizeDragInit","onResizeDrag","onResizeDrop","_ref3","offset","constrained","offsetTop","domRef","setActive","resizeOverlay","setOffset","setConstrained","_ref4","diff","size","computedOnColumnResize","_ref5","isRowFullyVisible","r","layout","createRef","c","tryStartEdit","render","_this4","className","Consumer","flexIndex","useNativeFlex","lastComputedProps","style","getNode","renderReorderRowProxy","renderDragRowArrow","Component","defaultProps","reorderProxySize","propTypes","minRowWidth","number","onMount","func","onUnmount","onRowMouseEnter","onRowMouseLeave","isRequired"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _region = _interopRequireDefault(require(\"../../packages/region\"));\n\nvar _ResizeOverlay = _interopRequireDefault(require(\"./ResizeOverlay\"));\n\nvar _setupColumnResize = _interopRequireDefault(require(\"./setupColumnResize\"));\n\nvar _join = _interopRequireDefault(require(\"../../packages/join\"));\n\nvar _FakeFlex = _interopRequireDefault(require(\"../../FakeFlex\"));\n\nvar _HeaderLayout = _interopRequireDefault(require(\"./HeaderLayout\"));\n\nvar _Content = _interopRequireDefault(require(\"./Content\"));\n\nvar _context = require(\"../../context\");\n\nvar _isMobile = _interopRequireDefault(require(\"../../packages/isMobile\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar height100 = {\n  height: '100%'\n};\n\nvar InovuaDataGridColumnLayout = function (_React$Component) {\n  (0, _inherits2.default)(InovuaDataGridColumnLayout, _React$Component);\n\n  var _super = _createSuper(InovuaDataGridColumnLayout);\n\n  function InovuaDataGridColumnLayout(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaDataGridColumnLayout);\n    _this = _super.call(this, props);\n    _this.scrollTop = 0;\n    _this.headerLayout = null;\n\n    _this.getDOMNode = function () {\n      return _this.columnLayoutRef.current;\n    };\n\n    _this.getContentRows = function () {\n      return _this.content.getRows();\n    };\n\n    _this.getScrollTop = function () {\n      return _this.scrollTop || 0;\n    };\n\n    _this.renderHeaderLayout = function (computedProps) {\n      return _react.default.createElement(_HeaderLayout.default, Object.assign({}, computedProps, {\n        onResizeMouseDown: _this.onResizeMouseDown.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeTouchStart: _this.onResizeTouchStart.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onFilterValueChange: computedProps.computedOnColumnFilterValueChange,\n        ref: _this.refHeaderLayout,\n        getScrollLeftMax: _this.getScrollLeftMax,\n        setScrollLeft: _this.setScrollLeft\n      }));\n    };\n\n    _this.renderContent = function (computedProps) {\n      var groupBy = computedProps.groupBy;\n      var groupByValue = groupBy && groupBy.length ? groupBy : null;\n      return _react.default.createElement(_Content.default, Object.assign({\n        key: \"content\"\n      }, computedProps, {\n        getScrollLeftMax: _this.getScrollLeftMax,\n        groupBy: groupByValue,\n        before: _this.renderLockedStartRows(computedProps),\n        after: _this.renderLockedEndRows(computedProps),\n        ref: _this.refContent,\n        columns: computedProps.visibleColumns,\n        minWidth: computedProps.minWidth,\n        maxWidth: computedProps.maxWidth,\n        onDragRowMouseDown: _this.onDragRowMouseDownHandle,\n        onContainerScrollHorizontal: _this.onContainerScrollHorizontal.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onContainerScrollVertical: _this.onContainerScrollVertical.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onColumnRenderStartIndexChange: _this.onColumnRenderStartIndexChange\n      }));\n    };\n\n    _this.onDragRowMouseDownHandle = function (ev, index, cellNode) {};\n\n    _this.renderLockedEndRows = function (computedProps) {\n      return null;\n    };\n\n    _this.renderLockedStartRows = function (computedProps) {\n      return null;\n    };\n\n    _this.renderLockedRows = function (rows, position, computedProps) {\n      return null;\n    };\n\n    _this.renderResizeOverlay = function (computedProps) {\n      return _react.default.createElement(_ResizeOverlay.default, {\n        resizeProxyStyle: computedProps.resizeProxyStyle,\n        columnResizeProxyWidth: computedProps.columnResizeProxyWidth,\n        columnResizeHandleWidth: computedProps.columnResizeHandleWidth,\n        rtl: computedProps.rtl,\n        ref: _this.refResizeOverlay\n      });\n    };\n\n    _this.onColumnRenderStartIndexChange = function (columnRenderStartIndex) {\n      if (_this.headerLayout) {\n        _this.headerLayout.setColumnRenderStartIndex(columnRenderStartIndex);\n      }\n    };\n\n    _this.onContainerScrollVertical = function (computedProps, scrollTop) {\n      _this.scrollTop = scrollTop;\n      var computedLockedRows = computedProps.computedLockedRows,\n          rowHeight = computedProps.rowHeight,\n          stickyHeaders = computedProps.stickyHeaders,\n          groupBy = computedProps.groupBy;\n\n      if (rowHeight && stickyHeaders && groupBy && groupBy.length) {\n        _this.updateStickyHeader(scrollTop);\n      }\n\n      if (computedLockedRows && computedLockedRows.length) {\n        _this.updateLockedRows(scrollTop);\n      }\n\n      if (computedProps.onScroll) {\n        computedProps.onScroll();\n      }\n    };\n\n    _this.onContainerScrollHorizontal = function (computedProps, scrollLeft) {\n      _this.scrollLeft = scrollLeft;\n\n      if (_this.headerLayout) {\n        _this.headerLayout.onContainerScrollHorizontal(scrollLeft);\n      }\n\n      if (computedProps.onScroll) {\n        computedProps.onScroll();\n      }\n    };\n\n    _this.getScrollLeft = function () {\n      return _this.scrollLeft || 0;\n    };\n\n    _this.getScrollLeftMax = function () {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return 0;\n      }\n\n      return vl.scrollContainer.scrollLeftMax;\n    };\n\n    _this.getScrollTopMax = function () {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      return vl.scrollContainer.scrollTopMax;\n    };\n\n    _this.setScrollLeft = function (scrollLeft) {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      vl.scrollLeft = scrollLeft;\n    };\n\n    _this.setScrollTop = function (scrollTop) {\n      var vl = _this.getVirtualList();\n\n      if (!vl) {\n        return;\n      }\n\n      vl.scrollTop = scrollTop;\n    };\n\n    _this.getVirtualList = function () {\n      return _this.content ? _this.content.virtualList : null;\n    };\n\n    _this.startEdit = function (args) {\n      return _this.content.startEdit(args);\n    };\n\n    _this.cancelEdit = function (args) {\n      return _this.content.cancelEdit(args);\n    };\n\n    _this.completeEdit = function (args) {\n      return _this.content.completeEdit(args);\n    };\n\n    _this.getRenderRange = function () {\n      return _this.content.getRenderRange();\n    };\n\n    _this.getHeaderLayout = function () {\n      return _this.headerLayout;\n    };\n\n    _this.getHeaderCells = function () {\n      return _this.getHeaderLayout().getHeaderCells();\n    };\n\n    _this.getHeader = function () {\n      return _this.headerLayout.getHeader();\n    };\n\n    _this.getGroupToolbar = function () {\n      return _this.headerLayout.getGroupToolbar();\n    };\n\n    _this.getDOMColumnHeaderAt = function (index) {\n      return _this.headerLayout.getCellDOMNodeAt(index);\n    };\n\n    _this.onResizeMouseDown = function () {\n      var _this2;\n\n      if (_isMobile.default) {\n        return;\n      }\n\n      (_this2 = _this).onResizeDownAction.apply(_this2, arguments);\n    };\n\n    _this.onResizeDownAction = function (computedProps, config, _ref) {\n      var colHeaderNode = _ref.colHeaderNode,\n          event = _ref.event,\n          groupColumns = _ref.groupColumns;\n      var visibleIndex = config.computedVisibleIndex;\n\n      _this.setupColumnResize(computedProps, {\n        groupColumns: groupColumns,\n        visibleIndex: visibleIndex !== undefined ? visibleIndex : config.visibleIndex,\n        colHeaderNode: colHeaderNode,\n        headerNode: _this.getHeader().getDOMNode(),\n        event: event\n      });\n    };\n\n    _this.onResizeTouchStart = function () {\n      var _this3;\n\n      (_this3 = _this).onResizeDownAction.apply(_this3, arguments);\n    };\n\n    _this.setupColumnResize = function (computedProps, _ref2) {\n      var visibleIndex = _ref2.visibleIndex,\n          groupColumns = _ref2.groupColumns,\n          colHeaderNode = _ref2.colHeaderNode,\n          event = _ref2.event;\n      event.stopPropagation();\n\n      if (event.ctrlKey) {\n        return;\n      }\n\n      var rtl = computedProps.rtl;\n\n      var region = _region.default.from(event.currentTarget.firstChild || event.currentTarget);\n\n      var columns = computedProps.visibleColumns;\n      var firstFlexIndex = columns.reduce(function (index, col, i) {\n        if (col.flex != null && index == -1) {\n          return i;\n        }\n\n        return index;\n      }, -1);\n      var index = visibleIndex;\n\n      var headerRegion = _region.default.from(_this.getHeaderLayout().headerDomNode.current);\n\n      var constrainTo = _region.default.from(headerRegion.get());\n\n      constrainTo.set((0, _defineProperty2.default)({}, _this.props.rtl ? 'left' : 'right', (_this.props.rtl ? -1 : 1) * (global.screen ? global.screen.width * 3 : _region.default.from(document.documentElement).getRight() * 2)));\n      var column = columns[index];\n\n      var columnRegion = _region.default.from(colHeaderNode);\n\n      var extraOffset = column.lastInGroup ? region.width : region.width / 2;\n      var maxPos;\n\n      if (groupColumns) {\n        var columnsMap = computedProps.columnsMap;\n        var groupCols = groupColumns.map(function (colId) {\n          return columnsMap[colId];\n        });\n\n        var firstColumnRegion = _region.default.from(_this.getDOMColumnHeaderAt(groupCols[0].computedVisibleIndex));\n\n        var minWidth = groupCols.reduce(function (acc, col) {\n          return acc + col.computedMinWidth;\n        }, 0);\n        var maxWidth = groupCols.reduce(function (acc, col) {\n          return acc + (col.computedMaxWidth || Infinity);\n        }, 0);\n        var pos = rtl ? firstColumnRegion.right - minWidth - extraOffset : minWidth + firstColumnRegion.left - extraOffset;\n        constrainTo.set((0, _defineProperty2.default)({}, rtl ? 'right' : 'left', pos));\n\n        if (maxWidth !== Infinity) {\n          maxPos = rtl ? firstColumnRegion.right - maxWidth : firstColumnRegion.left + maxWidth + extraOffset;\n        }\n      } else {\n        var _minWidth = column.computedMinWidth;\n\n        if (_this.props.rtl) {\n          var right = columnRegion.right - _minWidth - extraOffset;\n          constrainTo.set({\n            right: right\n          });\n\n          if (column.computedMaxWidth) {\n            maxPos = columnRegion.right - column.computedMaxWidth;\n          }\n        } else {\n          var left = _minWidth + columnRegion.left - extraOffset;\n          constrainTo.set({\n            left: left\n          });\n\n          if (column.computedMaxWidth) {\n            maxPos = columnRegion.left + column.computedMaxWidth;\n          }\n        }\n      }\n\n      var shareSpace = computedProps.shareSpaceOnResize;\n      var nextCol = columns[index + 1];\n\n      var nextColHeaderNode = _this.getDOMColumnHeaderAt(index + 1);\n\n      var nextColumnRegion = nextCol ? _region.default.from(nextColHeaderNode) : null;\n\n      if (column && column.computedResizable === false || nextCol && nextCol.computedResizable === false) {\n        shareSpace = false;\n      }\n\n      if (shareSpace && nextColHeaderNode) {\n        if (_this.props.rtl) {\n          var nextColLeft = nextColumnRegion.left + nextCol.computedMinWidth;\n\n          if (!maxPos || nextColLeft > maxPos) {\n            maxPos = nextColLeft;\n          }\n        } else {\n          var nextColRight = nextColumnRegion.right - nextCol.computedMinWidth;\n\n          if (!maxPos || nextColRight < maxPos) {\n            maxPos = nextColRight;\n          }\n        }\n      }\n\n      if (maxPos != null) {\n        constrainTo.set((0, _defineProperty2.default)({}, _this.props.rtl ? 'left' : 'right', maxPos));\n      }\n\n      if (_this.props.rtl) {\n        if (nextCol) {\n          constrainTo.set({\n            left: constrainTo.left - computedProps.columnResizeHandleWidth / 2\n          });\n        }\n\n        constrainTo.set({\n          right: constrainTo.right + computedProps.columnResizeHandleWidth\n        });\n      }\n\n      _this.props.coverHandleRef.current.setCursor('col-resize');\n\n      (0, _setupColumnResize.default)({\n        headerRegion: headerRegion,\n        constrainTo: constrainTo,\n        region: region,\n        columns: columns,\n        index: index,\n        rtl: _this.props.rtl,\n        extraOffset: 0,\n        firstFlexIndex: firstFlexIndex,\n        groupColumns: groupColumns,\n        shareSpaceOnResize: computedProps.shareSpaceOnResize,\n        shareSpace: shareSpace,\n        nextColumnSize: nextColumnRegion ? nextColumnRegion.width : null,\n        initialSize: columnRegion.width\n      }, {\n        onResizeDragInit: _this.onResizeDragInit.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeDrag: _this.onResizeDrag.bind((0, _assertThisInitialized2.default)(_this), computedProps),\n        onResizeDrop: _this.onResizeDrop.bind((0, _assertThisInitialized2.default)(_this), computedProps)\n      }, event);\n    };\n\n    _this.onResizeDragInit = function (computedProps, _ref3) {\n      var offset = _ref3.offset,\n          constrained = _ref3.constrained;\n\n      var offsetTop = _this.getHeaderLayout().getHeader().domRef.current.offsetTop;\n\n      _this.props.coverHandleRef.current.setActive(true);\n\n      _this.resizeOverlay.setOffset(offset).setActive(true, {\n        offsetTop: offsetTop\n      }).setConstrained(constrained);\n    };\n\n    _this.onResizeDrop = function (computedProps, _ref4) {\n      var index = _ref4.index,\n          offset = _ref4.offset,\n          diff = _ref4.diff,\n          groupColumns = _ref4.groupColumns,\n          constrained = _ref4.constrained,\n          size = _ref4.size,\n          nextColumnSize = _ref4.nextColumnSize,\n          firstFlexIndex = _ref4.firstFlexIndex,\n          shareSpace = _ref4.shareSpace;\n\n      _this.props.coverHandleRef.current.setActive(false);\n\n      if (_this.resizeOverlay) {\n        _this.resizeOverlay.setOffset(offset).setConstrained(constrained).setActive(false);\n      }\n\n      computedProps.computedOnColumnResize({\n        groupColumns: groupColumns,\n        diff: diff,\n        index: index,\n        size: size,\n        nextColumnSize: nextColumnSize,\n        firstFlexIndex: firstFlexIndex,\n        shareSpace: shareSpace\n      });\n    };\n\n    _this.onResizeDrag = function (computedProps, _ref5) {\n      var offset = _ref5.offset,\n          constrained = _ref5.constrained;\n\n      if (_this.resizeOverlay) {\n        _this.resizeOverlay.setOffset(offset).setConstrained(constrained);\n      }\n    };\n\n    _this.isRowFullyVisible = function (index) {\n      return _this.content.isRowFullyVisible(index);\n    };\n\n    _this.refResizeOverlay = function (r) {\n      _this.resizeOverlay = r;\n    };\n\n    _this.refHeaderLayout = function (layout) {\n      _this.headerLayout = layout;\n    };\n\n    _this.columnLayoutRef = (0, _react.createRef)();\n\n    _this.refContent = function (c) {\n      _this.content = c;\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaDataGridColumnLayout, [{\n    key: \"tryStartEdit\",\n    value: function tryStartEdit(args) {\n      return this.content.tryStartEdit(args);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var className = (0, _join.default)('InovuaReactDataGrid__column-layout');\n      return _react.default.createElement(_context.Consumer, null, function (computedProps) {\n        var flexIndex = 1;\n        var useNativeFlex = computedProps.useNativeFlex;\n        _this4.lastComputedProps = computedProps;\n        return _react.default.createElement(\"div\", {\n          ref: _this4.columnLayoutRef,\n          className: className,\n          style: _objectSpread(_objectSpread({}, height100), _this4.props.style)\n        }, _react.default.createElement(_FakeFlex.default, {\n          useNativeFlex: useNativeFlex,\n          flexIndex: flexIndex,\n          getNode: _this4.getDOMNode\n        }, _this4.renderHeaderLayout(computedProps), _this4.renderContent(computedProps)), _this4.renderReorderRowProxy(computedProps), _this4.renderResizeOverlay(computedProps), _this4.renderDragRowArrow(computedProps));\n      });\n    }\n  }, {\n    key: \"renderReorderRowProxy\",\n    value: function renderReorderRowProxy() {\n      return null;\n    }\n  }, {\n    key: \"renderDragRowArrow\",\n    value: function renderDragRowArrow() {\n      return null;\n    }\n  }, {\n    key: \"updateLockedRows\",\n    value: function updateLockedRows(scrollTop) {\n      return;\n    }\n  }, {\n    key: \"updateStickyHeader\",\n    value: function updateStickyHeader() {}\n  }]);\n  return InovuaDataGridColumnLayout;\n}(_react.default.Component);\n\nexports.default = InovuaDataGridColumnLayout;\nInovuaDataGridColumnLayout.defaultProps = {\n  reorderProxySize: 3\n};\nInovuaDataGridColumnLayout.propTypes = {\n  minRowWidth: _propTypes.default.number,\n  onMount: _propTypes.default.func,\n  onUnmount: _propTypes.default.func,\n  onRowMouseEnter: _propTypes.default.func,\n  onRowMouseLeave: _propTypes.default.func,\n  reorderProxySize: _propTypes.default.number.isRequired\n};"]},"metadata":{},"sourceType":"script"}