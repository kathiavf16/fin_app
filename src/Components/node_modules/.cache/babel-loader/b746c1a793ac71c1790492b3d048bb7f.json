{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _regionAlign = _interopRequireDefault(require(\"../../../packages/region-align\"));\n\nvar _assign = _interopRequireDefault(require(\"../../../common/assign\"));\n\nvar _align = _interopRequireDefault(require(\"./align\"));\n\nfunction transformPxStringToInt(pxValue) {\n  var value = parseFloat(pxValue.split('px')[0]);\n  return typeof value === 'number' && !isNaN(value) ? value : 0;\n}\n\nfunction _default(props, state, domNode) {\n  var _this = this;\n\n  if (state.activeSubMenuIndex == null || !this.componentIsMounted) {\n    this.prevMenuIndex = -1;\n    return;\n  }\n\n  var overItem = this.getItemByIndex(state.activeSubMenuIndex);\n  var offset = overItem && overItem.getOffset();\n  var left = offset.left + offset.width;\n  var top = offset.top;\n  var menuIndex = state.activeSubMenuIndex;\n  var sameMenu = this.prevMenuIndex == menuIndex;\n\n  if (this.aligning && !sameMenu) {\n    this.aligning = false;\n  }\n\n  this.prevMenuIndex = menuIndex;\n  var style = {\n    left: left,\n    top: top,\n    pointerEvents: 'none',\n    position: 'absolute'\n  };\n\n  if (!this.aligning) {\n    setTimeout(function () {\n      if (!_this.componentIsMounted) {\n        return;\n      }\n\n      var thisRegion = _regionAlign.default.from(domNode);\n\n      var menuComputedStyle = global.getComputedStyle(domNode);\n      var paddingLeft = transformPxStringToInt(menuComputedStyle.paddingLeft);\n\n      var menuItemRegion = _regionAlign.default.from({\n        left: thisRegion.left + paddingLeft,\n        top: thisRegion.top + offset.top,\n        width: offset.width,\n        height: offset.height\n      });\n\n      var subMenuMounted = _this.subMenu && _this.subMenu.componentIsMounted;\n\n      if (!subMenuMounted) {\n        return;\n      }\n\n      var submenuNode = _this.subMenu.node;\n\n      var subMenuRegion = _regionAlign.default.from(submenuNode);\n\n      var initialHeight = subMenuRegion.height;\n      var alignPosition = (0, _align.default)(props, subMenuRegion, menuItemRegion, props.constrainTo, domNode);\n      var newHeight = subMenuRegion.height;\n      var maxHeight;\n\n      if (newHeight < initialHeight && props.subMenuConstrainMargin != null) {\n        maxHeight = newHeight - props.subMenuConstrainMargin;\n      } else if (newHeight < initialHeight) {\n        maxHeight = newHeight;\n      }\n\n      if (maxHeight && alignPosition == -1) {\n        subMenuRegion.top = subMenuRegion.bottom - maxHeight;\n      }\n\n      var newLeft = subMenuRegion.left - thisRegion.left;\n      var newTop = subMenuRegion.top - thisRegion.top;\n\n      if (Math.abs(newLeft - left) < 5) {\n        newLeft = left;\n      }\n\n      if (Math.abs(newTop - top) < 5) {\n        newTop = top;\n      }\n\n      _this.subMenuPosition = newLeft < 0 ? 'left' : 'right';\n\n      if (newHeight === 0) {\n        return;\n      }\n\n      _this.alignOffset = {\n        left: newLeft,\n        top: newTop\n      };\n      _this.aligning = true;\n\n      _this.setState({\n        submenuAlignPosition: alignPosition,\n        submenuMaxHeight: props.submenuMaxHeight || maxHeight\n      });\n    }, 0);\n  }\n\n  if (sameMenu || this.aligning && this.alignOffset) {\n    (0, _assign.default)(style, this.alignOffset);\n    style.visibility = 'visible';\n    delete style.pointerEvents;\n    delete style.overflow;\n  }\n\n  this.aligning = false;\n  return style;\n}","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/Menu/src/getSubMenuStyle.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_default","_regionAlign","_assign","_align","transformPxStringToInt","pxValue","parseFloat","split","isNaN","props","state","domNode","_this","activeSubMenuIndex","componentIsMounted","prevMenuIndex","overItem","getItemByIndex","offset","getOffset","left","width","top","menuIndex","sameMenu","aligning","style","pointerEvents","position","setTimeout","thisRegion","from","menuComputedStyle","global","getComputedStyle","paddingLeft","menuItemRegion","height","subMenuMounted","subMenu","submenuNode","node","subMenuRegion","initialHeight","alignPosition","constrainTo","newHeight","maxHeight","subMenuConstrainMargin","bottom","newLeft","newTop","Math","abs","subMenuPosition","alignOffset","setState","submenuAlignPosition","submenuMaxHeight","visibility","overflow"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _regionAlign = _interopRequireDefault(require(\"../../../packages/region-align\"));\n\nvar _assign = _interopRequireDefault(require(\"../../../common/assign\"));\n\nvar _align = _interopRequireDefault(require(\"./align\"));\n\nfunction transformPxStringToInt(pxValue) {\n  var value = parseFloat(pxValue.split('px')[0]);\n  return typeof value === 'number' && !isNaN(value) ? value : 0;\n}\n\nfunction _default(props, state, domNode) {\n  var _this = this;\n\n  if (state.activeSubMenuIndex == null || !this.componentIsMounted) {\n    this.prevMenuIndex = -1;\n    return;\n  }\n\n  var overItem = this.getItemByIndex(state.activeSubMenuIndex);\n  var offset = overItem && overItem.getOffset();\n  var left = offset.left + offset.width;\n  var top = offset.top;\n  var menuIndex = state.activeSubMenuIndex;\n  var sameMenu = this.prevMenuIndex == menuIndex;\n\n  if (this.aligning && !sameMenu) {\n    this.aligning = false;\n  }\n\n  this.prevMenuIndex = menuIndex;\n  var style = {\n    left: left,\n    top: top,\n    pointerEvents: 'none',\n    position: 'absolute'\n  };\n\n  if (!this.aligning) {\n    setTimeout(function () {\n      if (!_this.componentIsMounted) {\n        return;\n      }\n\n      var thisRegion = _regionAlign.default.from(domNode);\n\n      var menuComputedStyle = global.getComputedStyle(domNode);\n      var paddingLeft = transformPxStringToInt(menuComputedStyle.paddingLeft);\n\n      var menuItemRegion = _regionAlign.default.from({\n        left: thisRegion.left + paddingLeft,\n        top: thisRegion.top + offset.top,\n        width: offset.width,\n        height: offset.height\n      });\n\n      var subMenuMounted = _this.subMenu && _this.subMenu.componentIsMounted;\n\n      if (!subMenuMounted) {\n        return;\n      }\n\n      var submenuNode = _this.subMenu.node;\n\n      var subMenuRegion = _regionAlign.default.from(submenuNode);\n\n      var initialHeight = subMenuRegion.height;\n      var alignPosition = (0, _align.default)(props, subMenuRegion, menuItemRegion, props.constrainTo, domNode);\n      var newHeight = subMenuRegion.height;\n      var maxHeight;\n\n      if (newHeight < initialHeight && props.subMenuConstrainMargin != null) {\n        maxHeight = newHeight - props.subMenuConstrainMargin;\n      } else if (newHeight < initialHeight) {\n        maxHeight = newHeight;\n      }\n\n      if (maxHeight && alignPosition == -1) {\n        subMenuRegion.top = subMenuRegion.bottom - maxHeight;\n      }\n\n      var newLeft = subMenuRegion.left - thisRegion.left;\n      var newTop = subMenuRegion.top - thisRegion.top;\n\n      if (Math.abs(newLeft - left) < 5) {\n        newLeft = left;\n      }\n\n      if (Math.abs(newTop - top) < 5) {\n        newTop = top;\n      }\n\n      _this.subMenuPosition = newLeft < 0 ? 'left' : 'right';\n\n      if (newHeight === 0) {\n        return;\n      }\n\n      _this.alignOffset = {\n        left: newLeft,\n        top: newTop\n      };\n      _this.aligning = true;\n\n      _this.setState({\n        submenuAlignPosition: alignPosition,\n        submenuMaxHeight: props.submenuMaxHeight || maxHeight\n      });\n    }, 0);\n  }\n\n  if (sameMenu || this.aligning && this.alignOffset) {\n    (0, _assign.default)(style, this.alignOffset);\n    style.visibility = 'visible';\n    delete style.pointerEvents;\n    delete style.overflow;\n  }\n\n  this.aligning = false;\n  return style;\n}"]},"metadata":{},"sourceType":"script"}