{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _useProperty3 = _interopRequireDefault(require(\"./useProperty\"));\n\nvar _react = require(\"react\");\n\nvar _clamp = _interopRequireDefault(require(\"../utils/clamp\"));\n\nvar _usePrevious = _interopRequireDefault(require(\"./usePrevious\"));\n\nvar useActiveIndex = function useActiveIndex(props, computedProps, computedPropsRef) {\n  var _useProperty = (0, _useProperty3.default)(props, 'activeIndex', -1),\n      _useProperty2 = (0, _slicedToArray2.default)(_useProperty, 2),\n      computedActiveIndex = _useProperty2[0],\n      doSetActiveIndex = _useProperty2[1];\n\n  if (!props.enableKeyboardNavigation) {\n    computedActiveIndex = -1;\n  }\n\n  var setActiveIndex = function setActiveIndex(activeIndex) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps || !computedProps.computedHasRowNavigation || global.isNaN(activeIndex)) {\n      return;\n    }\n\n    var data = computedProps.data;\n    activeIndex = (0, _clamp.default)(activeIndex, 0, data.length - 1);\n\n    if (activeIndex === computedActiveIndex) {\n      return;\n    }\n\n    doSetActiveIndex(activeIndex);\n  };\n\n  var incrementActiveIndex = function incrementActiveIndex(inc) {\n    setActiveIndex(computedActiveIndex + inc);\n  };\n\n  var getActiveItem = function getActiveItem() {\n    var computedProps = computedPropsRef.current;\n    return computedProps ? computedProps.data[computedProps.computedActiveIndex] : null;\n  };\n\n  var getFirstVisibleIndex = function getFirstVisibleIndex() {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return -1;\n    }\n\n    var scrollTop = computedProps.getScrollTop();\n    return Math.ceil(scrollTop / props.rowHeight);\n  };\n\n  var oldActiveIndex = (0, _usePrevious.default)(computedActiveIndex, -1);\n  (0, _react.useEffect)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (oldActiveIndex !== computedActiveIndex) {\n      var top = computedActiveIndex < oldActiveIndex;\n      computedProps.scrollToIndexIfNeeded(computedActiveIndex, {\n        top: top\n      });\n    }\n  }, [computedActiveIndex, oldActiveIndex]);\n  computedProps.activeRowRef = (0, _react.useRef)(null);\n  return {\n    computedActiveIndex: computedActiveIndex,\n    setActiveIndex: setActiveIndex,\n    incrementActiveIndex: incrementActiveIndex,\n    getActiveItem: getActiveItem,\n    getFirstVisibleIndex: getFirstVisibleIndex\n  };\n};\n\nvar _default = useActiveIndex;\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/hooks/useActiveIndex.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_slicedToArray2","_useProperty3","_react","_clamp","_usePrevious","useActiveIndex","props","computedProps","computedPropsRef","_useProperty","_useProperty2","computedActiveIndex","doSetActiveIndex","enableKeyboardNavigation","setActiveIndex","activeIndex","current","computedHasRowNavigation","global","isNaN","data","length","incrementActiveIndex","inc","getActiveItem","getFirstVisibleIndex","scrollTop","getScrollTop","Math","ceil","rowHeight","oldActiveIndex","useEffect","top","scrollToIndexIfNeeded","activeRowRef","useRef","_default"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _useProperty3 = _interopRequireDefault(require(\"./useProperty\"));\n\nvar _react = require(\"react\");\n\nvar _clamp = _interopRequireDefault(require(\"../utils/clamp\"));\n\nvar _usePrevious = _interopRequireDefault(require(\"./usePrevious\"));\n\nvar useActiveIndex = function useActiveIndex(props, computedProps, computedPropsRef) {\n  var _useProperty = (0, _useProperty3.default)(props, 'activeIndex', -1),\n      _useProperty2 = (0, _slicedToArray2.default)(_useProperty, 2),\n      computedActiveIndex = _useProperty2[0],\n      doSetActiveIndex = _useProperty2[1];\n\n  if (!props.enableKeyboardNavigation) {\n    computedActiveIndex = -1;\n  }\n\n  var setActiveIndex = function setActiveIndex(activeIndex) {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps || !computedProps.computedHasRowNavigation || global.isNaN(activeIndex)) {\n      return;\n    }\n\n    var data = computedProps.data;\n    activeIndex = (0, _clamp.default)(activeIndex, 0, data.length - 1);\n\n    if (activeIndex === computedActiveIndex) {\n      return;\n    }\n\n    doSetActiveIndex(activeIndex);\n  };\n\n  var incrementActiveIndex = function incrementActiveIndex(inc) {\n    setActiveIndex(computedActiveIndex + inc);\n  };\n\n  var getActiveItem = function getActiveItem() {\n    var computedProps = computedPropsRef.current;\n    return computedProps ? computedProps.data[computedProps.computedActiveIndex] : null;\n  };\n\n  var getFirstVisibleIndex = function getFirstVisibleIndex() {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return -1;\n    }\n\n    var scrollTop = computedProps.getScrollTop();\n    return Math.ceil(scrollTop / props.rowHeight);\n  };\n\n  var oldActiveIndex = (0, _usePrevious.default)(computedActiveIndex, -1);\n  (0, _react.useEffect)(function () {\n    var computedProps = computedPropsRef.current;\n\n    if (!computedProps) {\n      return;\n    }\n\n    if (oldActiveIndex !== computedActiveIndex) {\n      var top = computedActiveIndex < oldActiveIndex;\n      computedProps.scrollToIndexIfNeeded(computedActiveIndex, {\n        top: top\n      });\n    }\n  }, [computedActiveIndex, oldActiveIndex]);\n  computedProps.activeRowRef = (0, _react.useRef)(null);\n  return {\n    computedActiveIndex: computedActiveIndex,\n    setActiveIndex: setActiveIndex,\n    incrementActiveIndex: incrementActiveIndex,\n    getActiveItem: getActiveItem,\n    getFirstVisibleIndex: getFirstVisibleIndex\n  };\n};\n\nvar _default = useActiveIndex;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}