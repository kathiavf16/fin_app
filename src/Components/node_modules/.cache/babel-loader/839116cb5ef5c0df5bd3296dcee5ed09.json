{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _cleanProps = _interopRequireDefault(require(\"../../../common/cleanProps\"));\n\nvar _assign = _interopRequireDefault(require(\"../../../common/assign\"));\n\nvar _eventManager = _interopRequireDefault(require(\"./eventManager\"));\n\nvar _getMinMaxSize = _interopRequireDefault(require(\"./utils/getMinMaxSize\"));\n\nvar _join = _interopRequireDefault(require(\"./utils/join\"));\n\nvar _shouldComponentUpdate2 = _interopRequireDefault(require(\"./utils/shouldComponentUpdate\"));\n\nvar _normalizeEvent = _interopRequireDefault(require(\"./utils/normalizeEvent\"));\n\nvar _getFocusableElements = _interopRequireDefault(require(\"./utils/getFocusableElements\"));\n\nvar _getPositionRelativeToElement = _interopRequireDefault(require(\"../../../common/getPositionRelativeToElement\"));\n\nvar _Arrow = _interopRequireDefault(require(\"./Arrow\"));\n\nvar _positionsMap = require(\"../../../common/getPositionRelativeToElement/positionsMap\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar InovuaOverlay = function (_Component) {\n  (0, _inherits2.default)(InovuaOverlay, _Component);\n\n  var _super = _createSuper(InovuaOverlay);\n\n  function InovuaOverlay(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaOverlay);\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: props.defaultVisible,\n      position: null,\n      arrowConfig: null,\n      renderTrigger: null\n    };\n    _this.handleDocumentScroll = _this.handleDocumentScroll.bind((0, _assertThisInitialized2.default)(_this));\n    _this.onHide = _this.onHide.bind((0, _assertThisInitialized2.default)(_this));\n    _this.onShow = _this.onShow.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getOverlayNode = _this.getOverlayNode.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getVisible = _this.getVisible.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getActiveTargetNode = _this.getActiveTargetNode.bind((0, _assertThisInitialized2.default)(_this));\n\n    _this.rootRef = function (node) {\n      _this.rootNode = node;\n    };\n\n    _this.fixedRef = function (node) {\n      _this.fixedNode = node;\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaOverlay, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _shouldComponentUpdate2.default)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.register();\n      this.componentIsMounted = true;\n\n      if (this.props.updatePositionOnScroll) {\n        window.addEventListener('scroll', this.handleDocumentScroll, true);\n      }\n\n      var doPosition = function doPosition() {\n        var target = _this2.getTarget();\n\n        if ((0, _typeof2.default)(target) === 'object') {\n          _this2.activeTargetNode = target;\n\n          _this2.setPosition(_this2.props.onInitialPosition);\n\n          if (_this2.getVisible()) {\n            _this2.onShow({\n              target: target\n            });\n          }\n        }\n      };\n\n      if (this.props.rafOnMount) {\n        requestAnimationFrame(doPosition);\n      } else {\n        doPosition();\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (this.props.visible !== nextProps.visible) {\n        this.handleVisibleChange(nextProps.visible);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unregister();\n      this.componentIsMounted = null;\n      this.activeTargetNode = null;\n\n      if (this.props.updatePositionOnScroll) {\n        window.removeEventListener('scroll', this.handleDocumentScroll, true);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      var className = this.prepareClassName();\n      var contentClassName = this.prepareContentClassName();\n      var style = this.prepareStyle();\n      var contentStyle = this.prepareContentStyle();\n      return _react.default.createElement(\"div\", (0, _extends2.default)({}, (0, _cleanProps.default)(props, InovuaOverlay.propTypes), {\n        className: className,\n        ref: this.rootRef,\n        style: style,\n        onKeyDown: this.handleKeyDown\n      }), _react.default.createElement(\"div\", (0, _extends2.default)({\n        className: contentClassName\n      }, this.getChildrenProps(), {\n        style: contentStyle\n      })), props.arrow && this.renderArrow(), props.relativeToViewport && this.renderFixed());\n    }\n  }, {\n    key: \"renderFixed\",\n    value: function renderFixed() {\n      return _react.default.createElement(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: 0,\n          height: 0\n        },\n        ref: this.fixedRef\n      });\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow() {\n      if (!this.state.arrowConfig) {\n        return null;\n      }\n\n      var rootClassName = this.props.rootClassName;\n      var position = this.state.arrowConfig.position;\n      var location = this.state.arrowConfig.location;\n      var className = (0, _join.default)(\"\".concat(rootClassName, \"__arrow\"), \"\".concat(rootClassName, \"__arrow--\").concat(location), this.props.arrowClassName);\n      var style = (0, _assign.default)({}, this.props.arrowStyle);\n\n      if (this.props.border) {\n        (0, _assign.default)(style, {\n          border: this.props.border\n        });\n      }\n\n      if (this.props.background != undefined) {\n        (0, _assign.default)(style, {\n          background: this.props.background\n        });\n      }\n\n      var wrapperClassName = (0, _join.default)(\"\".concat(rootClassName, \"__arrow-wrapper\"), \"\".concat(rootClassName, \"__arrow-wrapper--\").concat(location));\n      return _react.default.createElement(_Arrow.default, {\n        className: className,\n        wrapperClassName: wrapperClassName,\n        position: position,\n        style: style,\n        size: this.props.arrowSize\n      });\n    }\n  }, {\n    key: \"getChildrenProps\",\n    value: function getChildrenProps() {\n      var children = this.props.children;\n      var targetNode = this.getPositionTarget();\n      var childrenProps = {\n        children: children\n      };\n      var childrenParams = {\n        targetNode: targetNode,\n        visible: this.getVisible()\n      };\n\n      if (typeof children === 'function') {\n        return {\n          children: children(childrenParams)\n        };\n      }\n\n      if (children === undefined && targetNode) {\n        var tooltip = targetNode.getAttribute('data-tooltip');\n\n        if (tooltip != null) {\n          return {\n            dangerouslySetInnerHTML: {\n              __html: tooltip\n            }\n          };\n        }\n      }\n\n      return childrenProps;\n    }\n  }, {\n    key: \"prepareClassName\",\n    value: function prepareClassName() {\n      var props = this.props,\n          state = this.state;\n      var rootClassName = props.rootClassName,\n          theme = props.theme,\n          visibleClassName = props.visibleClassName,\n          relativeToViewport = props.relativeToViewport;\n      var visible = this.getVisible();\n      var className = (0, _join.default)(rootClassName, props.className, visible && \"\".concat(rootClassName, \"--visible\"), visible && visibleClassName, !visible && \"\".concat(rootClassName, \"--invisible\"), relativeToViewport && \"\".concat(rootClassName, \"--position-fixed\"), theme && \"\".concat(rootClassName, \"--theme-\").concat(theme));\n\n      if (this.props.fade) {\n        className = (0, _join.default)(className, props.fade && \"\".concat(rootClassName, \"--has-transition\"), state.transitionEnter && \"\".concat(rootClassName, \"--transition-enter\"), state.transitionEnterActive && \"\".concat(rootClassName, \"--transition-enter-active\"), state.transitionLeave && \"\".concat(rootClassName, \"--transition-leave\"), state.transitionLeaveActive && \"\".concat(rootClassName, \"--transition-leave-active\"));\n      }\n\n      return className;\n    }\n  }, {\n    key: \"prepareContentClassName\",\n    value: function prepareContentClassName() {\n      return (0, _join.default)(this.props.contentClassName, \"\".concat(this.props.rootClassName, \"__content\"));\n    }\n  }, {\n    key: \"prepareStyle\",\n    value: function prepareStyle() {\n      var style = (0, _assign.default)({\n        zIndex: this.props.zIndex\n      }, this.props.style);\n\n      if (this.props.fade) {\n        (0, _assign.default)(style, this.getTransitionStyle());\n      }\n\n      if (this.props.border) {\n        (0, _assign.default)(style, {\n          border: this.props.border\n        });\n      }\n\n      if (this.state.position) {\n        if (this.props.useTransform) {\n          style.transform = \"translate3d(\".concat(Math.round(this.state.position.left || 0), \"px, \").concat(Math.round(this.state.position.top || 0), \"px, 0px)\");\n          style.left = 0;\n          style.top = 0;\n        } else {\n          (0, _assign.default)(style, {\n            left: Math.round(this.state.position.left)\n          });\n\n          if (this.state.position.top != null) {\n            style.top = Math.round(this.state.position.top);\n          }\n        }\n\n        if (this.state.position.bottom != null) {\n          style.bottom = Math.round(this.state.position.bottom);\n        }\n\n        if (this.state.position.width) {\n          style.width = this.state.position.width;\n        }\n      }\n\n      return style;\n    }\n  }, {\n    key: \"prepareContentStyle\",\n    value: function prepareContentStyle() {\n      var style = (0, _assign.default)({}, this.props.contentStyle);\n\n      if (this.props.background != undefined) {\n        (0, _assign.default)(style, {\n          background: this.props.background\n        });\n      }\n\n      if (this.props.padding != undefined) {\n        (0, _assign.default)(style, {\n          padding: this.props.padding\n        });\n      }\n\n      if (this.props.height != undefined) {\n        (0, _assign.default)(style, {\n          height: this.props.height\n        });\n      }\n\n      if (this.props.width != undefined) {\n        (0, _assign.default)(style, {\n          width: this.props.width\n        });\n      }\n\n      var maxMinSize = (0, _getMinMaxSize.default)(this.props);\n      (0, _assign.default)(style, maxMinSize);\n      return style;\n    }\n  }, {\n    key: \"getTransitionStyle\",\n    value: function getTransitionStyle() {\n      var state = this.state;\n      var style = {};\n\n      if (state.transitionEnterActive || state.transitionLeaveActive) {\n        style.transitionDuration = state.transitionEnterActive ? \"\".concat(this.getFadeInDuration(), \"ms\") : \"\".concat(this.getFadeOutDuration(), \"ms\");\n        style.transitionTimingFunction = state.transitionEnterActive ? this.getFadeInTransitionFunction() : this.getFadeOutTransitionFunction();\n      }\n\n      return style;\n    }\n  }, {\n    key: \"onShow\",\n    value: function onShow(event) {\n      var _this3 = this;\n\n      this.activeTargetNode = event.target;\n      this.setState({\n        renderTrigger: !this.state.renderTrigger\n      }, function () {\n        _this3.setPosition();\n\n        _this3.setVisible(true);\n      });\n    }\n  }, {\n    key: \"onHide\",\n    value: function onHide(event) {\n      this.setVisible(false);\n    }\n  }, {\n    key: \"register\",\n    value: function register() {\n      var _this4 = this;\n\n      this.eventManager = this.getEventManager()({\n        showEvent: (0, _normalizeEvent.default)(this.props.showEvent),\n        hideEvent: (0, _normalizeEvent.default)(this.props.hideEvent),\n        target: this.getTarget(),\n        hideOnScroll: this.props.hideOnScroll,\n        hideOnClickOutside: this.props.hideOnClickOutside,\n        hideOnEscape: this.props.hideOnEscape,\n        onShow: this.onShow,\n        onHide: this.onHide,\n        getShowDelay: function getShowDelay() {\n          return _this4.props.showDelay;\n        },\n        getHideDelay: function getHideDelay() {\n          return _this4.props.hideDelay;\n        },\n        getVisible: this.getVisible,\n        getOverlayNode: this.getOverlayNode,\n        getActiveTargetNode: this.getActiveTargetNode\n      });\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister() {\n      if (this.eventManager) {\n        this.eventManager.unregister();\n      }\n    }\n  }, {\n    key: \"getEventManager\",\n    value: function getEventManager() {\n      return this.props.eventManager;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget() {\n      var target;\n      var rootNode = this.getOverlayNode();\n\n      if (this.props.target) {\n        target = this.props.target;\n\n        if (typeof target === 'function') {\n          target = target(this.props, rootNode, this);\n        }\n      } else {\n        if (rootNode) {\n          target = rootNode.parentElement;\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      if (!this.isVisibleControlled()) {\n        if (visible !== this.getVisible()) {\n          this.handleVisibleChange(visible);\n        }\n\n        this.setState({\n          visible: visible\n        });\n      }\n\n      if (visible) {\n        this.props.onShow();\n      } else {\n        this.props.onHide();\n      }\n\n      this.props.onVisibleChange(visible);\n    }\n  }, {\n    key: \"isVisibleControlled\",\n    value: function isVisibleControlled() {\n      return this.props.visible != null;\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible() {\n      return this.isVisibleControlled() ? this.props.visible : this.state.visible;\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(callback) {\n      this.setState(this.getPositionConfig(), callback);\n    }\n  }, {\n    key: \"getPositionConfig\",\n    value: function getPositionConfig() {\n      var _this$props = this.props,\n          constrainTo = _this$props.constrainTo,\n          offset = _this$props.offset,\n          syncWidth = _this$props.syncWidth;\n      var positions = this.props.positions;\n      var targetNode = this.getPositionTarget();\n      var tooltipPositions = targetNode ? targetNode.getAttribute('data-tooltip-positions') : null;\n\n      if (tooltipPositions) {\n        positions = tooltipPositions.split(',').map(function (position) {\n          return position && position.trim ? position.trim() : position;\n        });\n      }\n\n      var normalizedPositions = Array.isArray(positions) ? positions : [positions];\n      var newState = (0, _getPositionRelativeToElement.default)({\n        showArrow: true,\n        constrainTo: constrainTo,\n        offset: offset,\n        targetNode: targetNode,\n        overlayNode: this.getOverlayNode(),\n        positions: normalizedPositions,\n        adjustOnPositionBottom: this.props.adjustOnPositionBottom,\n        relativeToViewport: this.props.relativeToViewport,\n        arrowSize: this.props.arrowSize\n      });\n\n      if (this.props.relativeToViewport && this.fixedNode) {\n        var fixedRect = this.fixedNode.getBoundingClientRect();\n\n        if (newState && newState.position) {\n          var useTransform = this.props.useTransform;\n          newState.position = {\n            top: newState.position.top - (useTransform ? 0 : fixedRect.top),\n            left: newState.position.left - (useTransform ? 0 : fixedRect.left)\n          };\n\n          if (syncWidth) {\n            newState.position.width = newState.alignRegion.width;\n          }\n        }\n      }\n\n      return newState;\n    }\n  }, {\n    key: \"handleDocumentScroll\",\n    value: function handleDocumentScroll() {\n      if (this.props.updatePositionOnScroll) {\n        this.updateDomPosition();\n      }\n    }\n  }, {\n    key: \"updateDomPosition\",\n    value: function updateDomPosition() {\n      var positionConfig = this.getPositionConfig();\n\n      if (this.rootNode && positionConfig) {\n        var newPosition = positionConfig.position;\n\n        if (newPosition.bottom !== undefined) {\n          this.rootNode.style.bottom = \"\".concat(newPosition.bottom, \"px\");\n        }\n\n        if (this.props.useTransform) {\n          var oldPosition = this.state.position || {\n            top: 0,\n            left: 0\n          };\n          this.rootNode.style.transform = \"translate3d(\".concat(Math.round(newPosition.left || oldPosition.left), \"px, \").concat(Math.round(newPosition.top || oldPosition.top), \"px, 0px)\");\n        } else {\n          if (newPosition.top !== undefined) {\n            this.rootNode.style.top = \"\".concat(Math.round(newPosition.top), \"px\");\n          }\n\n          this.rootNode.style.left = \"\".concat(Math.round(newPosition.left), \"px\");\n        }\n      }\n    }\n  }, {\n    key: \"getOverlayNode\",\n    value: function getOverlayNode() {\n      return this.rootNode;\n    }\n  }, {\n    key: \"getActiveTargetNode\",\n    value: function getActiveTargetNode() {\n      return this.activeTargetNode;\n    }\n  }, {\n    key: \"getPositionTarget\",\n    value: function getPositionTarget() {\n      var target = this.getTarget();\n\n      if (target instanceof Element) {\n        return target;\n      }\n\n      return this.getActiveTargetNode();\n    }\n  }, {\n    key: \"handleVisibleChange\",\n    value: function handleVisibleChange(visible) {\n      if (!this.props.fade) {\n        return null;\n      }\n\n      if (visible) {\n        this.setupEnterTransition();\n      } else {\n        this.setupLeaveTransition();\n      }\n    }\n  }, {\n    key: \"setupEnterTransition\",\n    value: function setupEnterTransition() {\n      var _this5 = this;\n\n      this.props.onFadeInStart();\n      this.setState({\n        transitionEnter: true,\n        transitionEnterActive: false,\n        transitionLeave: false,\n        transitionLeaveActive: false\n      }, function () {\n        setTimeout(function () {\n          if (_this5.componentIsMounted) {\n            _this5.setState({\n              transitionEnterActive: true\n            }, function () {\n              _this5.props.onFadeInEnd();\n            });\n          }\n        }, 16);\n      });\n    }\n  }, {\n    key: \"setupLeaveTransition\",\n    value: function setupLeaveTransition() {\n      var _this6 = this;\n\n      this.props.onFadeOutStart();\n      this.setState({\n        transitionLeave: true,\n        transitionLeaveActive: false,\n        transitionEnter: false,\n        transitionEnterActive: false\n      }, function () {\n        setTimeout(function () {\n          if (_this6.componentIsMounted) {\n            _this6.setState({\n              transitionLeaveActive: true\n            }, function () {\n              setTimeout(function () {\n                if (_this6.componentIsMounted) {\n                  _this6.setState({\n                    transitionLeave: false,\n                    transitionLeaveActive: false\n                  }, function () {\n                    _this6.props.onFadeOutEnd();\n                  });\n                }\n              }, _this6.getFadeOutDuration());\n            });\n          }\n        }, 16);\n      });\n    }\n  }, {\n    key: \"getFadeInDuration\",\n    value: function getFadeInDuration() {\n      if (this.props.fadeInDuration) {\n        return this.props.fadeInDuration;\n      }\n\n      return this.props.fadeDuration;\n    }\n  }, {\n    key: \"getFadeOutDuration\",\n    value: function getFadeOutDuration() {\n      if (this.props.fadeOutDuration) {\n        return this.props.fadeOutDuration;\n      }\n\n      return this.props.fadeDuration;\n    }\n  }, {\n    key: \"getFadeInTransitionFunction\",\n    value: function getFadeInTransitionFunction() {\n      if (this.props.fadeInTransitionFunction) {\n        return this.props.fadeInTransitionFunction;\n      }\n\n      return this.props.fadeTransitionFunction;\n    }\n  }, {\n    key: \"getFadeOutTransitionFunction\",\n    value: function getFadeOutTransitionFunction() {\n      if (this.props.fadeOutTransitionFunction) {\n        return this.props.fadeOutTransitionFunction;\n      }\n\n      return this.props.fadeTransitionFunction;\n    }\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(event) {\n      if (this.props.captureTabNavigation && event.key === 'Tab') {\n        this.captureTabNavigation(event);\n      }\n\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(event);\n      }\n    }\n  }, {\n    key: \"captureTabNavigation\",\n    value: function captureTabNavigation(event) {\n      var shiftKey = event.shiftKey;\n      var nodes = (0, _getFocusableElements.default)(this.rootNode);\n\n      if (!nodes.length) {\n        return null;\n      }\n\n      var firstNode = nodes[0];\n      var lastNode = nodes[nodes.length - 1];\n\n      if (lastNode === event.target && !shiftKey) {\n        firstNode.focus();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if (firstNode === event.target && shiftKey) {\n        lastNode.focus();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.setVisible(true);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setVisible(false);\n    }\n  }]);\n  return InovuaOverlay;\n}(_react.Component);\n\nvar emptyFn = function emptyFn() {};\n\nInovuaOverlay.defaultProps = {\n  captureTabNavigation: false,\n  updatePositionOnScroll: false,\n  zIndex: 100,\n  theme: 'default',\n  rootClassName: 'inovua-react-toolkit-overlay',\n  background: null,\n  padding: null,\n  eventManager: _eventManager.default,\n  target: null,\n  showEvent: ['mouseenter'],\n  hideEvent: ['mouseleave'],\n  defaultVisible: false,\n  arrow: true,\n  arrowStyle: {},\n  arrowSize: 11,\n  showDelay: null,\n  hideDelay: null,\n  hideOnClickOutside: true,\n  hideOnScroll: false,\n  fade: false,\n  fadeDuration: 300,\n  fadeInDuration: 300,\n  fadeOutDuration: 50,\n  fadeTransitionFunction: 'ease',\n  positions: _positionsMap.posiblePositions,\n  constrainTo: true,\n  offset: 10,\n  rafOnMount: true,\n  relativeToViewport: true,\n  adjustOnPositionBottom: false,\n  onVisibleChange: emptyFn,\n  onShow: emptyFn,\n  onHide: emptyFn,\n  onFadeInStart: emptyFn,\n  onFadeOutStart: emptyFn,\n  onFadeInEnd: emptyFn,\n  onFadeOutEnd: emptyFn\n};\nInovuaOverlay.propTypes = {\n  shouldComponentUpdate: _propTypes.default.func,\n  captureTabNavigation: _propTypes.default.bool,\n  updatePositionOnScroll: _propTypes.default.bool,\n  children: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  rootClassName: _propTypes.default.string,\n  border: _propTypes.default.string,\n  background: _propTypes.default.string,\n  theme: _propTypes.default.string,\n  zIndex: _propTypes.default.number,\n  contentStyle: _propTypes.default.object,\n  contentClassName: _propTypes.default.string,\n  padding: _propTypes.default.number,\n  height: _propTypes.default.number,\n  width: _propTypes.default.number,\n  minSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  maxSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  arrow: _propTypes.default.bool,\n  arrowClassName: _propTypes.default.string,\n  arrowStyle: _propTypes.default.object,\n  arrowSize: _propTypes.default.number,\n  visible: _propTypes.default.bool,\n  visibleClassName: _propTypes.default.string,\n  defaultVisible: _propTypes.default.bool,\n  target: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object, _propTypes.default.func]),\n  eventManager: _propTypes.default.func,\n  showEvent: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.string), _propTypes.default.string]),\n  hideEvent: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.string), _propTypes.default.string]),\n  showDelay: _propTypes.default.number,\n  hideDelay: _propTypes.default.number,\n  hideOnClickOutside: _propTypes.default.bool,\n  hideOnScroll: _propTypes.default.bool,\n  hideOnEscape: _propTypes.default.bool,\n  useTransform: _propTypes.default.bool,\n  fade: _propTypes.default.bool,\n  fadeDuration: _propTypes.default.number,\n  fadeInDuration: _propTypes.default.number,\n  fadeOutDuration: _propTypes.default.number,\n  fadeTransitionFunction: _propTypes.default.string,\n  fadeInTransitionFunction: _propTypes.default.string,\n  fadeOutTransitionFunction: _propTypes.default.string,\n  constrainTo: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object, _propTypes.default.func, _propTypes.default.bool]),\n  positions: function positions(props, propName, componentName) {\n    var positions = props[propName];\n\n    if (typeof positions === 'string') {\n      if (_positionsMap.posiblePositions.indexOf(positions) === -1) {\n        return new Error(\"\\nInvalid prop \".concat(propName, \" suplied to \").concat(componentName, \".\\nFollowing values are allowed: \").concat(_positionsMap.posiblePositions.join(', '), \"\\n\"));\n      }\n    }\n  },\n  offset: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }), _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  })]))]),\n  rafOnMount: _propTypes.default.bool,\n  relativeToViewport: _propTypes.default.bool,\n  adjustOnPositionBottom: _propTypes.default.bool,\n  syncWidth: _propTypes.default.bool,\n  onInitialPosition: _propTypes.default.func,\n  onVisibleChange: _propTypes.default.func,\n  onShow: _propTypes.default.func,\n  onHide: _propTypes.default.func,\n  onFadeInStart: emptyFn,\n  onFadeOutStart: emptyFn,\n  onFadeInEnd: emptyFn,\n  onFadeOutEnd: emptyFn\n};\nvar _default = InovuaOverlay;\nexports.default = _default;","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/Overlay/src/Overlay.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_extends2","_typeof2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_propTypes","_cleanProps","_assign","_eventManager","_getMinMaxSize","_join","_shouldComponentUpdate2","_normalizeEvent","_getFocusableElements","_getPositionRelativeToElement","_Arrow","_positionsMap","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","InovuaOverlay","_Component","_super","props","_this","state","visible","defaultVisible","position","arrowConfig","renderTrigger","handleDocumentScroll","bind","onHide","onShow","handleKeyDown","getOverlayNode","getVisible","getActiveTargetNode","rootRef","node","rootNode","fixedRef","fixedNode","key","shouldComponentUpdate","nextProps","nextState","componentDidMount","_this2","register","componentIsMounted","updatePositionOnScroll","window","addEventListener","doPosition","target","getTarget","activeTargetNode","setPosition","onInitialPosition","rafOnMount","requestAnimationFrame","UNSAFE_componentWillReceiveProps","handleVisibleChange","componentWillUnmount","unregister","removeEventListener","render","className","prepareClassName","contentClassName","prepareContentClassName","style","prepareStyle","contentStyle","prepareContentStyle","createElement","propTypes","ref","onKeyDown","getChildrenProps","arrow","renderArrow","relativeToViewport","renderFixed","top","left","width","height","rootClassName","location","concat","arrowClassName","arrowStyle","border","background","undefined","wrapperClassName","size","arrowSize","children","targetNode","getPositionTarget","childrenProps","childrenParams","tooltip","getAttribute","dangerouslySetInnerHTML","__html","theme","visibleClassName","fade","transitionEnter","transitionEnterActive","transitionLeave","transitionLeaveActive","zIndex","getTransitionStyle","useTransform","transform","Math","round","bottom","padding","maxMinSize","transitionDuration","getFadeInDuration","getFadeOutDuration","transitionTimingFunction","getFadeInTransitionFunction","getFadeOutTransitionFunction","event","_this3","setState","setVisible","_this4","eventManager","getEventManager","showEvent","hideEvent","hideOnScroll","hideOnClickOutside","hideOnEscape","getShowDelay","showDelay","getHideDelay","hideDelay","parentElement","isVisibleControlled","onVisibleChange","callback","getPositionConfig","_this$props","constrainTo","offset","syncWidth","positions","tooltipPositions","split","map","trim","normalizedPositions","Array","isArray","newState","showArrow","overlayNode","adjustOnPositionBottom","fixedRect","getBoundingClientRect","alignRegion","updateDomPosition","positionConfig","newPosition","oldPosition","Element","setupEnterTransition","setupLeaveTransition","_this5","onFadeInStart","setTimeout","onFadeInEnd","_this6","onFadeOutStart","onFadeOutEnd","fadeInDuration","fadeDuration","fadeOutDuration","fadeInTransitionFunction","fadeTransitionFunction","fadeOutTransitionFunction","captureTabNavigation","shiftKey","nodes","length","firstNode","lastNode","focus","preventDefault","stopPropagation","show","hide","Component","emptyFn","defaultProps","posiblePositions","func","bool","oneOfType","string","number","object","minSize","shape","maxSize","arrayOf","propName","componentName","indexOf","Error","join","x","y","_default"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _cleanProps = _interopRequireDefault(require(\"../../../common/cleanProps\"));\n\nvar _assign = _interopRequireDefault(require(\"../../../common/assign\"));\n\nvar _eventManager = _interopRequireDefault(require(\"./eventManager\"));\n\nvar _getMinMaxSize = _interopRequireDefault(require(\"./utils/getMinMaxSize\"));\n\nvar _join = _interopRequireDefault(require(\"./utils/join\"));\n\nvar _shouldComponentUpdate2 = _interopRequireDefault(require(\"./utils/shouldComponentUpdate\"));\n\nvar _normalizeEvent = _interopRequireDefault(require(\"./utils/normalizeEvent\"));\n\nvar _getFocusableElements = _interopRequireDefault(require(\"./utils/getFocusableElements\"));\n\nvar _getPositionRelativeToElement = _interopRequireDefault(require(\"../../../common/getPositionRelativeToElement\"));\n\nvar _Arrow = _interopRequireDefault(require(\"./Arrow\"));\n\nvar _positionsMap = require(\"../../../common/getPositionRelativeToElement/positionsMap\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar InovuaOverlay = function (_Component) {\n  (0, _inherits2.default)(InovuaOverlay, _Component);\n\n  var _super = _createSuper(InovuaOverlay);\n\n  function InovuaOverlay(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, InovuaOverlay);\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: props.defaultVisible,\n      position: null,\n      arrowConfig: null,\n      renderTrigger: null\n    };\n    _this.handleDocumentScroll = _this.handleDocumentScroll.bind((0, _assertThisInitialized2.default)(_this));\n    _this.onHide = _this.onHide.bind((0, _assertThisInitialized2.default)(_this));\n    _this.onShow = _this.onShow.bind((0, _assertThisInitialized2.default)(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getOverlayNode = _this.getOverlayNode.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getVisible = _this.getVisible.bind((0, _assertThisInitialized2.default)(_this));\n    _this.getActiveTargetNode = _this.getActiveTargetNode.bind((0, _assertThisInitialized2.default)(_this));\n\n    _this.rootRef = function (node) {\n      _this.rootNode = node;\n    };\n\n    _this.fixedRef = function (node) {\n      _this.fixedNode = node;\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(InovuaOverlay, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _shouldComponentUpdate2.default)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.register();\n      this.componentIsMounted = true;\n\n      if (this.props.updatePositionOnScroll) {\n        window.addEventListener('scroll', this.handleDocumentScroll, true);\n      }\n\n      var doPosition = function doPosition() {\n        var target = _this2.getTarget();\n\n        if ((0, _typeof2.default)(target) === 'object') {\n          _this2.activeTargetNode = target;\n\n          _this2.setPosition(_this2.props.onInitialPosition);\n\n          if (_this2.getVisible()) {\n            _this2.onShow({\n              target: target\n            });\n          }\n        }\n      };\n\n      if (this.props.rafOnMount) {\n        requestAnimationFrame(doPosition);\n      } else {\n        doPosition();\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (this.props.visible !== nextProps.visible) {\n        this.handleVisibleChange(nextProps.visible);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unregister();\n      this.componentIsMounted = null;\n      this.activeTargetNode = null;\n\n      if (this.props.updatePositionOnScroll) {\n        window.removeEventListener('scroll', this.handleDocumentScroll, true);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = this.props;\n      var className = this.prepareClassName();\n      var contentClassName = this.prepareContentClassName();\n      var style = this.prepareStyle();\n      var contentStyle = this.prepareContentStyle();\n      return _react.default.createElement(\"div\", (0, _extends2.default)({}, (0, _cleanProps.default)(props, InovuaOverlay.propTypes), {\n        className: className,\n        ref: this.rootRef,\n        style: style,\n        onKeyDown: this.handleKeyDown\n      }), _react.default.createElement(\"div\", (0, _extends2.default)({\n        className: contentClassName\n      }, this.getChildrenProps(), {\n        style: contentStyle\n      })), props.arrow && this.renderArrow(), props.relativeToViewport && this.renderFixed());\n    }\n  }, {\n    key: \"renderFixed\",\n    value: function renderFixed() {\n      return _react.default.createElement(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: 0,\n          height: 0\n        },\n        ref: this.fixedRef\n      });\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow() {\n      if (!this.state.arrowConfig) {\n        return null;\n      }\n\n      var rootClassName = this.props.rootClassName;\n      var position = this.state.arrowConfig.position;\n      var location = this.state.arrowConfig.location;\n      var className = (0, _join.default)(\"\".concat(rootClassName, \"__arrow\"), \"\".concat(rootClassName, \"__arrow--\").concat(location), this.props.arrowClassName);\n      var style = (0, _assign.default)({}, this.props.arrowStyle);\n\n      if (this.props.border) {\n        (0, _assign.default)(style, {\n          border: this.props.border\n        });\n      }\n\n      if (this.props.background != undefined) {\n        (0, _assign.default)(style, {\n          background: this.props.background\n        });\n      }\n\n      var wrapperClassName = (0, _join.default)(\"\".concat(rootClassName, \"__arrow-wrapper\"), \"\".concat(rootClassName, \"__arrow-wrapper--\").concat(location));\n      return _react.default.createElement(_Arrow.default, {\n        className: className,\n        wrapperClassName: wrapperClassName,\n        position: position,\n        style: style,\n        size: this.props.arrowSize\n      });\n    }\n  }, {\n    key: \"getChildrenProps\",\n    value: function getChildrenProps() {\n      var children = this.props.children;\n      var targetNode = this.getPositionTarget();\n      var childrenProps = {\n        children: children\n      };\n      var childrenParams = {\n        targetNode: targetNode,\n        visible: this.getVisible()\n      };\n\n      if (typeof children === 'function') {\n        return {\n          children: children(childrenParams)\n        };\n      }\n\n      if (children === undefined && targetNode) {\n        var tooltip = targetNode.getAttribute('data-tooltip');\n\n        if (tooltip != null) {\n          return {\n            dangerouslySetInnerHTML: {\n              __html: tooltip\n            }\n          };\n        }\n      }\n\n      return childrenProps;\n    }\n  }, {\n    key: \"prepareClassName\",\n    value: function prepareClassName() {\n      var props = this.props,\n          state = this.state;\n      var rootClassName = props.rootClassName,\n          theme = props.theme,\n          visibleClassName = props.visibleClassName,\n          relativeToViewport = props.relativeToViewport;\n      var visible = this.getVisible();\n      var className = (0, _join.default)(rootClassName, props.className, visible && \"\".concat(rootClassName, \"--visible\"), visible && visibleClassName, !visible && \"\".concat(rootClassName, \"--invisible\"), relativeToViewport && \"\".concat(rootClassName, \"--position-fixed\"), theme && \"\".concat(rootClassName, \"--theme-\").concat(theme));\n\n      if (this.props.fade) {\n        className = (0, _join.default)(className, props.fade && \"\".concat(rootClassName, \"--has-transition\"), state.transitionEnter && \"\".concat(rootClassName, \"--transition-enter\"), state.transitionEnterActive && \"\".concat(rootClassName, \"--transition-enter-active\"), state.transitionLeave && \"\".concat(rootClassName, \"--transition-leave\"), state.transitionLeaveActive && \"\".concat(rootClassName, \"--transition-leave-active\"));\n      }\n\n      return className;\n    }\n  }, {\n    key: \"prepareContentClassName\",\n    value: function prepareContentClassName() {\n      return (0, _join.default)(this.props.contentClassName, \"\".concat(this.props.rootClassName, \"__content\"));\n    }\n  }, {\n    key: \"prepareStyle\",\n    value: function prepareStyle() {\n      var style = (0, _assign.default)({\n        zIndex: this.props.zIndex\n      }, this.props.style);\n\n      if (this.props.fade) {\n        (0, _assign.default)(style, this.getTransitionStyle());\n      }\n\n      if (this.props.border) {\n        (0, _assign.default)(style, {\n          border: this.props.border\n        });\n      }\n\n      if (this.state.position) {\n        if (this.props.useTransform) {\n          style.transform = \"translate3d(\".concat(Math.round(this.state.position.left || 0), \"px, \").concat(Math.round(this.state.position.top || 0), \"px, 0px)\");\n          style.left = 0;\n          style.top = 0;\n        } else {\n          (0, _assign.default)(style, {\n            left: Math.round(this.state.position.left)\n          });\n\n          if (this.state.position.top != null) {\n            style.top = Math.round(this.state.position.top);\n          }\n        }\n\n        if (this.state.position.bottom != null) {\n          style.bottom = Math.round(this.state.position.bottom);\n        }\n\n        if (this.state.position.width) {\n          style.width = this.state.position.width;\n        }\n      }\n\n      return style;\n    }\n  }, {\n    key: \"prepareContentStyle\",\n    value: function prepareContentStyle() {\n      var style = (0, _assign.default)({}, this.props.contentStyle);\n\n      if (this.props.background != undefined) {\n        (0, _assign.default)(style, {\n          background: this.props.background\n        });\n      }\n\n      if (this.props.padding != undefined) {\n        (0, _assign.default)(style, {\n          padding: this.props.padding\n        });\n      }\n\n      if (this.props.height != undefined) {\n        (0, _assign.default)(style, {\n          height: this.props.height\n        });\n      }\n\n      if (this.props.width != undefined) {\n        (0, _assign.default)(style, {\n          width: this.props.width\n        });\n      }\n\n      var maxMinSize = (0, _getMinMaxSize.default)(this.props);\n      (0, _assign.default)(style, maxMinSize);\n      return style;\n    }\n  }, {\n    key: \"getTransitionStyle\",\n    value: function getTransitionStyle() {\n      var state = this.state;\n      var style = {};\n\n      if (state.transitionEnterActive || state.transitionLeaveActive) {\n        style.transitionDuration = state.transitionEnterActive ? \"\".concat(this.getFadeInDuration(), \"ms\") : \"\".concat(this.getFadeOutDuration(), \"ms\");\n        style.transitionTimingFunction = state.transitionEnterActive ? this.getFadeInTransitionFunction() : this.getFadeOutTransitionFunction();\n      }\n\n      return style;\n    }\n  }, {\n    key: \"onShow\",\n    value: function onShow(event) {\n      var _this3 = this;\n\n      this.activeTargetNode = event.target;\n      this.setState({\n        renderTrigger: !this.state.renderTrigger\n      }, function () {\n        _this3.setPosition();\n\n        _this3.setVisible(true);\n      });\n    }\n  }, {\n    key: \"onHide\",\n    value: function onHide(event) {\n      this.setVisible(false);\n    }\n  }, {\n    key: \"register\",\n    value: function register() {\n      var _this4 = this;\n\n      this.eventManager = this.getEventManager()({\n        showEvent: (0, _normalizeEvent.default)(this.props.showEvent),\n        hideEvent: (0, _normalizeEvent.default)(this.props.hideEvent),\n        target: this.getTarget(),\n        hideOnScroll: this.props.hideOnScroll,\n        hideOnClickOutside: this.props.hideOnClickOutside,\n        hideOnEscape: this.props.hideOnEscape,\n        onShow: this.onShow,\n        onHide: this.onHide,\n        getShowDelay: function getShowDelay() {\n          return _this4.props.showDelay;\n        },\n        getHideDelay: function getHideDelay() {\n          return _this4.props.hideDelay;\n        },\n        getVisible: this.getVisible,\n        getOverlayNode: this.getOverlayNode,\n        getActiveTargetNode: this.getActiveTargetNode\n      });\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister() {\n      if (this.eventManager) {\n        this.eventManager.unregister();\n      }\n    }\n  }, {\n    key: \"getEventManager\",\n    value: function getEventManager() {\n      return this.props.eventManager;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget() {\n      var target;\n      var rootNode = this.getOverlayNode();\n\n      if (this.props.target) {\n        target = this.props.target;\n\n        if (typeof target === 'function') {\n          target = target(this.props, rootNode, this);\n        }\n      } else {\n        if (rootNode) {\n          target = rootNode.parentElement;\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      if (!this.isVisibleControlled()) {\n        if (visible !== this.getVisible()) {\n          this.handleVisibleChange(visible);\n        }\n\n        this.setState({\n          visible: visible\n        });\n      }\n\n      if (visible) {\n        this.props.onShow();\n      } else {\n        this.props.onHide();\n      }\n\n      this.props.onVisibleChange(visible);\n    }\n  }, {\n    key: \"isVisibleControlled\",\n    value: function isVisibleControlled() {\n      return this.props.visible != null;\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible() {\n      return this.isVisibleControlled() ? this.props.visible : this.state.visible;\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(callback) {\n      this.setState(this.getPositionConfig(), callback);\n    }\n  }, {\n    key: \"getPositionConfig\",\n    value: function getPositionConfig() {\n      var _this$props = this.props,\n          constrainTo = _this$props.constrainTo,\n          offset = _this$props.offset,\n          syncWidth = _this$props.syncWidth;\n      var positions = this.props.positions;\n      var targetNode = this.getPositionTarget();\n      var tooltipPositions = targetNode ? targetNode.getAttribute('data-tooltip-positions') : null;\n\n      if (tooltipPositions) {\n        positions = tooltipPositions.split(',').map(function (position) {\n          return position && position.trim ? position.trim() : position;\n        });\n      }\n\n      var normalizedPositions = Array.isArray(positions) ? positions : [positions];\n      var newState = (0, _getPositionRelativeToElement.default)({\n        showArrow: true,\n        constrainTo: constrainTo,\n        offset: offset,\n        targetNode: targetNode,\n        overlayNode: this.getOverlayNode(),\n        positions: normalizedPositions,\n        adjustOnPositionBottom: this.props.adjustOnPositionBottom,\n        relativeToViewport: this.props.relativeToViewport,\n        arrowSize: this.props.arrowSize\n      });\n\n      if (this.props.relativeToViewport && this.fixedNode) {\n        var fixedRect = this.fixedNode.getBoundingClientRect();\n\n        if (newState && newState.position) {\n          var useTransform = this.props.useTransform;\n          newState.position = {\n            top: newState.position.top - (useTransform ? 0 : fixedRect.top),\n            left: newState.position.left - (useTransform ? 0 : fixedRect.left)\n          };\n\n          if (syncWidth) {\n            newState.position.width = newState.alignRegion.width;\n          }\n        }\n      }\n\n      return newState;\n    }\n  }, {\n    key: \"handleDocumentScroll\",\n    value: function handleDocumentScroll() {\n      if (this.props.updatePositionOnScroll) {\n        this.updateDomPosition();\n      }\n    }\n  }, {\n    key: \"updateDomPosition\",\n    value: function updateDomPosition() {\n      var positionConfig = this.getPositionConfig();\n\n      if (this.rootNode && positionConfig) {\n        var newPosition = positionConfig.position;\n\n        if (newPosition.bottom !== undefined) {\n          this.rootNode.style.bottom = \"\".concat(newPosition.bottom, \"px\");\n        }\n\n        if (this.props.useTransform) {\n          var oldPosition = this.state.position || {\n            top: 0,\n            left: 0\n          };\n          this.rootNode.style.transform = \"translate3d(\".concat(Math.round(newPosition.left || oldPosition.left), \"px, \").concat(Math.round(newPosition.top || oldPosition.top), \"px, 0px)\");\n        } else {\n          if (newPosition.top !== undefined) {\n            this.rootNode.style.top = \"\".concat(Math.round(newPosition.top), \"px\");\n          }\n\n          this.rootNode.style.left = \"\".concat(Math.round(newPosition.left), \"px\");\n        }\n      }\n    }\n  }, {\n    key: \"getOverlayNode\",\n    value: function getOverlayNode() {\n      return this.rootNode;\n    }\n  }, {\n    key: \"getActiveTargetNode\",\n    value: function getActiveTargetNode() {\n      return this.activeTargetNode;\n    }\n  }, {\n    key: \"getPositionTarget\",\n    value: function getPositionTarget() {\n      var target = this.getTarget();\n\n      if (target instanceof Element) {\n        return target;\n      }\n\n      return this.getActiveTargetNode();\n    }\n  }, {\n    key: \"handleVisibleChange\",\n    value: function handleVisibleChange(visible) {\n      if (!this.props.fade) {\n        return null;\n      }\n\n      if (visible) {\n        this.setupEnterTransition();\n      } else {\n        this.setupLeaveTransition();\n      }\n    }\n  }, {\n    key: \"setupEnterTransition\",\n    value: function setupEnterTransition() {\n      var _this5 = this;\n\n      this.props.onFadeInStart();\n      this.setState({\n        transitionEnter: true,\n        transitionEnterActive: false,\n        transitionLeave: false,\n        transitionLeaveActive: false\n      }, function () {\n        setTimeout(function () {\n          if (_this5.componentIsMounted) {\n            _this5.setState({\n              transitionEnterActive: true\n            }, function () {\n              _this5.props.onFadeInEnd();\n            });\n          }\n        }, 16);\n      });\n    }\n  }, {\n    key: \"setupLeaveTransition\",\n    value: function setupLeaveTransition() {\n      var _this6 = this;\n\n      this.props.onFadeOutStart();\n      this.setState({\n        transitionLeave: true,\n        transitionLeaveActive: false,\n        transitionEnter: false,\n        transitionEnterActive: false\n      }, function () {\n        setTimeout(function () {\n          if (_this6.componentIsMounted) {\n            _this6.setState({\n              transitionLeaveActive: true\n            }, function () {\n              setTimeout(function () {\n                if (_this6.componentIsMounted) {\n                  _this6.setState({\n                    transitionLeave: false,\n                    transitionLeaveActive: false\n                  }, function () {\n                    _this6.props.onFadeOutEnd();\n                  });\n                }\n              }, _this6.getFadeOutDuration());\n            });\n          }\n        }, 16);\n      });\n    }\n  }, {\n    key: \"getFadeInDuration\",\n    value: function getFadeInDuration() {\n      if (this.props.fadeInDuration) {\n        return this.props.fadeInDuration;\n      }\n\n      return this.props.fadeDuration;\n    }\n  }, {\n    key: \"getFadeOutDuration\",\n    value: function getFadeOutDuration() {\n      if (this.props.fadeOutDuration) {\n        return this.props.fadeOutDuration;\n      }\n\n      return this.props.fadeDuration;\n    }\n  }, {\n    key: \"getFadeInTransitionFunction\",\n    value: function getFadeInTransitionFunction() {\n      if (this.props.fadeInTransitionFunction) {\n        return this.props.fadeInTransitionFunction;\n      }\n\n      return this.props.fadeTransitionFunction;\n    }\n  }, {\n    key: \"getFadeOutTransitionFunction\",\n    value: function getFadeOutTransitionFunction() {\n      if (this.props.fadeOutTransitionFunction) {\n        return this.props.fadeOutTransitionFunction;\n      }\n\n      return this.props.fadeTransitionFunction;\n    }\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(event) {\n      if (this.props.captureTabNavigation && event.key === 'Tab') {\n        this.captureTabNavigation(event);\n      }\n\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(event);\n      }\n    }\n  }, {\n    key: \"captureTabNavigation\",\n    value: function captureTabNavigation(event) {\n      var shiftKey = event.shiftKey;\n      var nodes = (0, _getFocusableElements.default)(this.rootNode);\n\n      if (!nodes.length) {\n        return null;\n      }\n\n      var firstNode = nodes[0];\n      var lastNode = nodes[nodes.length - 1];\n\n      if (lastNode === event.target && !shiftKey) {\n        firstNode.focus();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if (firstNode === event.target && shiftKey) {\n        lastNode.focus();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.setVisible(true);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.setVisible(false);\n    }\n  }]);\n  return InovuaOverlay;\n}(_react.Component);\n\nvar emptyFn = function emptyFn() {};\n\nInovuaOverlay.defaultProps = {\n  captureTabNavigation: false,\n  updatePositionOnScroll: false,\n  zIndex: 100,\n  theme: 'default',\n  rootClassName: 'inovua-react-toolkit-overlay',\n  background: null,\n  padding: null,\n  eventManager: _eventManager.default,\n  target: null,\n  showEvent: ['mouseenter'],\n  hideEvent: ['mouseleave'],\n  defaultVisible: false,\n  arrow: true,\n  arrowStyle: {},\n  arrowSize: 11,\n  showDelay: null,\n  hideDelay: null,\n  hideOnClickOutside: true,\n  hideOnScroll: false,\n  fade: false,\n  fadeDuration: 300,\n  fadeInDuration: 300,\n  fadeOutDuration: 50,\n  fadeTransitionFunction: 'ease',\n  positions: _positionsMap.posiblePositions,\n  constrainTo: true,\n  offset: 10,\n  rafOnMount: true,\n  relativeToViewport: true,\n  adjustOnPositionBottom: false,\n  onVisibleChange: emptyFn,\n  onShow: emptyFn,\n  onHide: emptyFn,\n  onFadeInStart: emptyFn,\n  onFadeOutStart: emptyFn,\n  onFadeInEnd: emptyFn,\n  onFadeOutEnd: emptyFn\n};\nInovuaOverlay.propTypes = {\n  shouldComponentUpdate: _propTypes.default.func,\n  captureTabNavigation: _propTypes.default.bool,\n  updatePositionOnScroll: _propTypes.default.bool,\n  children: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  rootClassName: _propTypes.default.string,\n  border: _propTypes.default.string,\n  background: _propTypes.default.string,\n  theme: _propTypes.default.string,\n  zIndex: _propTypes.default.number,\n  contentStyle: _propTypes.default.object,\n  contentClassName: _propTypes.default.string,\n  padding: _propTypes.default.number,\n  height: _propTypes.default.number,\n  width: _propTypes.default.number,\n  minSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  maxSize: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string, _propTypes.default.shape({\n    height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  })]),\n  arrow: _propTypes.default.bool,\n  arrowClassName: _propTypes.default.string,\n  arrowStyle: _propTypes.default.object,\n  arrowSize: _propTypes.default.number,\n  visible: _propTypes.default.bool,\n  visibleClassName: _propTypes.default.string,\n  defaultVisible: _propTypes.default.bool,\n  target: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object, _propTypes.default.func]),\n  eventManager: _propTypes.default.func,\n  showEvent: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.string), _propTypes.default.string]),\n  hideEvent: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.string), _propTypes.default.string]),\n  showDelay: _propTypes.default.number,\n  hideDelay: _propTypes.default.number,\n  hideOnClickOutside: _propTypes.default.bool,\n  hideOnScroll: _propTypes.default.bool,\n  hideOnEscape: _propTypes.default.bool,\n  useTransform: _propTypes.default.bool,\n  fade: _propTypes.default.bool,\n  fadeDuration: _propTypes.default.number,\n  fadeInDuration: _propTypes.default.number,\n  fadeOutDuration: _propTypes.default.number,\n  fadeTransitionFunction: _propTypes.default.string,\n  fadeInTransitionFunction: _propTypes.default.string,\n  fadeOutTransitionFunction: _propTypes.default.string,\n  constrainTo: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object, _propTypes.default.func, _propTypes.default.bool]),\n  positions: function positions(props, propName, componentName) {\n    var positions = props[propName];\n\n    if (typeof positions === 'string') {\n      if (_positionsMap.posiblePositions.indexOf(positions) === -1) {\n        return new Error(\"\\nInvalid prop \".concat(propName, \" suplied to \").concat(componentName, \".\\nFollowing values are allowed: \").concat(_positionsMap.posiblePositions.join(', '), \"\\n\"));\n      }\n    }\n  },\n  offset: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }), _propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  })]))]),\n  rafOnMount: _propTypes.default.bool,\n  relativeToViewport: _propTypes.default.bool,\n  adjustOnPositionBottom: _propTypes.default.bool,\n  syncWidth: _propTypes.default.bool,\n  onInitialPosition: _propTypes.default.func,\n  onVisibleChange: _propTypes.default.func,\n  onShow: _propTypes.default.func,\n  onHide: _propTypes.default.func,\n  onFadeInStart: emptyFn,\n  onFadeOutStart: emptyFn,\n  onFadeInEnd: emptyFn,\n  onFadeOutEnd: emptyFn\n};\nvar _default = InovuaOverlay;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}