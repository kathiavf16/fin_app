{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _setColumnId = _interopRequireDefault(require(\"../setColumnId\"));\n\nvar _computeFlexWidths = _interopRequireDefault(require(\"../utils/flex/computeFlexWidths\"));\n\nvar _mapColumns = _interopRequireDefault(require(\"../mapColumns\"));\n\nvar _defaultCheckColumnId = require(\"./defaultCheckColumnId\");\n\nvar _defaultRowExpandColumnId = require(\"./defaultRowExpandColumnId\");\n\nvar _defaultRowIndexColumnId = require(\"./defaultRowIndexColumnId\");\n\nvar _defaultGroupColumnId = require(\"./defaultGroupColumnId\");\n\nvar _defaultRowReorderColumnId = require(\"./defaultRowReorderColumnId\");\n\nvar _setComputedColumnWidths = _interopRequireDefault(require(\"./setComputedColumnWidths\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar DEFAULT_COLUMN_PROPS = {\n  isColumn: true,\n  keepFlex: true\n};\nvar defaultPivotGrandSummaryColumn = {\n  sortable: false,\n  draggable: false,\n  filterable: false\n};\nvar defaultPivotSummaryColumn = defaultPivotGrandSummaryColumn;\nvar emptyArray = [];\nvar emptyObject = Object.freeze ? Object.freeze({}) : {};\n\nvar _default = function _default(_ref) {\n  var _ref$generatedColumns = _ref.generatedColumnsLength,\n      generatedColumnsLength = _ref$generatedColumns === void 0 ? 0 : _ref$generatedColumns,\n      columns = _ref.columns,\n      columnMinWidth = _ref.columnMinWidth,\n      columnMaxWidth = _ref.columnMaxWidth,\n      columnDefaultWidth = _ref.columnDefaultWidth,\n      columnWidth = _ref.columnWidth,\n      _ref$columnSizes = _ref.columnSizes,\n      columnSizes = _ref$columnSizes === void 0 ? emptyObject : _ref$columnSizes,\n      _ref$columnVisibility = _ref.columnVisibilityMap,\n      columnVisibilityMap = _ref$columnVisibility === void 0 ? emptyObject : _ref$columnVisibility,\n      _ref$columnFlexes = _ref.columnFlexes,\n      columnFlexes = _ref$columnFlexes === void 0 ? emptyObject : _ref$columnFlexes,\n      _ref$lockedColumnsSta = _ref.lockedColumnsState,\n      lockedColumnsState = _ref$lockedColumnsSta === void 0 ? emptyObject : _ref$lockedColumnsSta,\n      columnOrder = _ref.columnOrder,\n      computedPivotUniqueValuesPerColumn = _ref.computedPivotUniqueValuesPerColumn,\n      editable = _ref.editable,\n      pivot = _ref.pivot,\n      sortable = _ref.sortable,\n      filterable = _ref.filterable,\n      resizable = _ref.resizable,\n      pivotGrandSummaryColumn = _ref.pivotGrandSummaryColumn,\n      lockable = _ref.lockable,\n      checkboxColumn = _ref.checkboxColumn,\n      rowIndexColumn = _ref.rowIndexColumn,\n      filter = _ref.filter,\n      rtl = _ref.rtl,\n      filterValueMap = _ref.filterValueMap,\n      sortInfo = _ref.sortInfo,\n      showPivotSummaryColumns = _ref.showPivotSummaryColumns,\n      _ref$availableWidth = _ref.availableWidth,\n      availableWidth = _ref$availableWidth === void 0 ? 0 : _ref$availableWidth,\n      onRowReorder = _ref.onRowReorder;\n\n  if (columnVisibilityMap) {\n    columnVisibilityMap = _objectSpread({}, columnVisibilityMap);\n  }\n\n  var groupColumnSummaryReducers = {};\n  var pivotColumnSummaryReducers = {};\n\n  var addSortInfo = function addSortInfo(col) {\n    col.computedSortable = (typeof col.sortable === 'boolean' ? col.sortable : sortable) || false;\n    col.computedSortInfo = null;\n\n    if (col.computedSortable && sortInfo) {\n      col.computedSortInfo = Array.isArray(sortInfo) ? sortInfo.filter(function (info) {\n        return info.name === col.id || info.id === col.id || info.name === col.sortName;\n      })[0] : sortInfo.name === col.id || sortInfo.id === col.id || sortInfo.name === col.sortName ? sortInfo : null;\n    }\n  };\n\n  var addFilterValue = function addFilterValue(col) {\n    col.computedFilterable = (typeof col.filterable === 'boolean' ? col.filterable : filterable) || undefined;\n    col.computedFilterValue = null;\n\n    if (col.computedFilterable && filterValueMap) {\n      col.computedFilterValue = filterValueMap[col.id];\n    }\n\n    if (col.computedFilterable === undefined && col.computedFilterValue) {\n      col.computedFilterable = true;\n    }\n\n    col.computedFilterable = !!col.computedFilterable;\n  };\n\n  var hasLockedStart = false;\n  var hasLockedEnd = false;\n  var rowExpandColumn;\n  var setComputedColumnWidthsParam = {\n    columnFlexes: columnFlexes,\n    columnSizes: columnSizes,\n    columnDefaultWidth: columnDefaultWidth,\n    columnWidth: columnWidth,\n    columnMinWidth: columnMinWidth,\n    columnMaxWidth: columnMaxWidth\n  };\n  var hasDedicatedGroupColumn = false;\n  var normalizedColumns = columns.map(function (column) {\n    return _objectSpread(_objectSpread({}, DEFAULT_COLUMN_PROPS), column);\n  }).map(_setColumnId.default).map(function (col, i) {\n    col.computedInitialIndex = i - generatedColumnsLength;\n    (0, _setComputedColumnWidths.default)(col, setComputedColumnWidthsParam);\n    col.computedVisible = col.visible !== undefined ? !!col.visible : columnVisibilityMap[col.id] === false ? false : true;\n\n    if (col.computedVisible && pivot && !col.groupSummaryReducer && col.id !== _defaultGroupColumnId.id) {\n      col.computedVisible = false;\n    }\n\n    if (col.computedVisible === false) {\n      columnVisibilityMap[col.id] = false;\n    } else {\n      delete columnVisibilityMap[col.id];\n\n      if (col.id === _defaultGroupColumnId.id) {\n        hasDedicatedGroupColumn = true;\n      }\n    }\n\n    col.computedHeader = col.header === undefined ? col.name || '' : col.header;\n    col.computedLocked = col.locked;\n\n    if (col.computedLocked === undefined && lockedColumnsState[col.id] !== undefined) {\n      col.computedLocked = lockedColumnsState[col.id];\n    }\n\n    if (col.computedLocked === undefined && col.defaultLocked !== undefined) {\n      col.computedLocked = col.defaultLocked;\n    }\n\n    if (!filter || filter(col)) {\n      if (col.computedLocked === true || col.computedLocked === 'start') {\n        col.computedLocked = 'start';\n        hasLockedStart = true;\n      }\n\n      if (col.computedLocked === 'end') {\n        hasLockedEnd = true;\n      }\n    }\n\n    col.computedLocked = col.computedLocked || false;\n\n    if (col.id === _defaultRowExpandColumnId.id) {\n      rowExpandColumn = col;\n    }\n\n    return col;\n  });\n\n  if (hasLockedStart) {\n    if (rowExpandColumn != null) {\n      rowExpandColumn.computedLocked = 'start';\n    }\n\n    if (checkboxColumn) {\n      var normalizedCheckboxColumn = normalizedColumns.filter(function (c) {\n        return c.checkboxColumn && c.id == _defaultCheckColumnId.id;\n      })[0];\n\n      if (normalizedCheckboxColumn) {\n        normalizedCheckboxColumn.computedLocked = 'start';\n      }\n    }\n\n    if (hasDedicatedGroupColumn) {\n      var normalizedGroupColumn = normalizedColumns.filter(function (c) {\n        return c.groupColumn && c.id == _defaultGroupColumnId.id;\n      })[0];\n\n      if (normalizedGroupColumn) {\n        normalizedGroupColumn.computedLocked = 'start';\n      }\n    }\n\n    var autoLockColumns = normalizedColumns.filter(function (c) {\n      return !!c.autoLock;\n    });\n\n    if (autoLockColumns.length) {\n      autoLockColumns.forEach(function (c) {\n        c.computedLocked = 'start';\n      });\n    }\n\n    if (onRowReorder && (typeof onRowReorder === 'function' || typeof onRowReorder === 'boolean')) {\n      var normalizedRowReorderColumn = normalizedColumns.filter(function (c) {\n        return c.id === _defaultRowReorderColumnId.id;\n      })[0];\n\n      if (normalizedRowReorderColumn) {\n        normalizedRowReorderColumn.computedLocked = 'start';\n      }\n    }\n  }\n\n  var computedEnableRowspan = false;\n  normalizedColumns.forEach(function (col, index) {\n    col.computedAbsoluteIndex = index;\n    addSortInfo(col);\n    addFilterValue(col);\n\n    if (typeof col.rowspan === 'function') {\n      computedEnableRowspan = true;\n    }\n\n    col.computedResizable = (typeof col.resizable !== 'boolean' ? resizable : col.resizable) || false;\n    col.computedLockable = (typeof col.lockable !== 'boolean' ? lockable : col.lockable) || false;\n  });\n  var columnsMap = (0, _mapColumns.default)(normalizedColumns, {\n    showWarnings: true\n  });\n  var visibleColumns = normalizedColumns.filter(function (c) {\n    return c.computedVisible !== false;\n  });\n\n  if (columnOrder) {\n    if (checkboxColumn) {\n      var checkboxColumnIndex = columnOrder.indexOf(_defaultCheckColumnId.id);\n\n      if (checkboxColumnIndex == -1) {\n        columnOrder = [_defaultCheckColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder));\n      }\n    }\n  }\n\n  if (rowExpandColumn) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowExpandColumnIndex = columnOrder.indexOf(_defaultRowExpandColumnId.id);\n\n    if (rowExpandColumnIndex !== 0) {\n      columnOrder = [_defaultRowExpandColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        return id != _defaultRowExpandColumnId.id;\n      })));\n    }\n  }\n\n  if (onRowReorder && (typeof onRowReorder === 'function' || typeof onRowReorder === 'boolean')) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowReorderColumnIndex = columnOrder.indexOf(_defaultRowReorderColumnId.id);\n\n    if (rowReorderColumnIndex !== 0) {\n      columnOrder = [_defaultRowReorderColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        return id !== _defaultRowReorderColumnId.id;\n      })));\n    }\n  }\n\n  if (rowIndexColumn) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowIndexColumnIndex = columnOrder.indexOf(_defaultRowIndexColumnId.id);\n\n    if (rowIndexColumnIndex != 0) {\n      columnOrder = [].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        var col = columnsMap[id];\n        return col && col.groupSpacerColumn;\n      })), [_defaultRowIndexColumnId.id], (0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        var col = columnsMap[id];\n\n        if (!col) {\n          return false;\n        }\n\n        return id != _defaultRowIndexColumnId.id && !col.groupSpacerColumn;\n      })));\n    }\n  }\n\n  if (generatedColumnsLength) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var generatedColumns = visibleColumns.filter(function (c) {\n      return c.groupSpacerColumn;\n    });\n    var generatedColumnIds = generatedColumns.reduce(function (acc, col) {\n      acc[col.id] = true;\n      return acc;\n    }, {});\n    columnOrder = [].concat((0, _toConsumableArray2.default)(generatedColumns.map(function (c) {\n      return c.id;\n    })), (0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n      return !generatedColumnIds[id];\n    })));\n  }\n\n  if (columnOrder) {\n    var groupSpacerColumns = visibleColumns.filter(function (col) {\n      return col.groupSpacerColumn;\n    });\n    var groupColumns = visibleColumns.filter(function (col) {\n      return col.groupColumn && !col.groupSpacerColumn;\n    });\n    var ungroupColumns = visibleColumns.filter(function (col) {\n      return !col.groupColumn && !col.groupSpacerColumn;\n    });\n    visibleColumns = columnOrder.map(function (colId) {\n      return ungroupColumns.find(function (col) {\n        return col.id == colId;\n      });\n    }).filter(function (x) {\n      return !!x;\n    });\n    visibleColumns = [].concat((0, _toConsumableArray2.default)(groupSpacerColumns), (0, _toConsumableArray2.default)(groupColumns), (0, _toConsumableArray2.default)(visibleColumns));\n  }\n\n  if (typeof filter == 'function') {\n    visibleColumns = visibleColumns.filter(filter);\n  }\n\n  normalizedColumns.forEach(function (col) {\n    if (col.groupSummaryReducer) {\n      groupColumnSummaryReducers[col.id] = col.groupSummaryReducer;\n\n      if (!col.groupSummaryReducer.reducer && col.groupSummaryReducer.reduce) {\n        groupColumnSummaryReducers[col.id].reducer = col.groupSummaryReducer.reduce;\n      }\n    }\n  });\n  var groupColumn = visibleColumns.filter(function (col) {\n    return !!col.groupColumn;\n  })[0];\n\n  if (pivot && computedPivotUniqueValuesPerColumn && groupColumn) {\n    var aggregateColumns = visibleColumns.filter(function (col) {\n      return !!col.groupSummaryReducer;\n    });\n    var newColumns = [groupColumn].concat((0, _toConsumableArray2.default)(getPivotColumns(aggregateColumns, computedPivotUniqueValuesPerColumn, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns))).map(function (col) {\n      (0, _setComputedColumnWidths.default)(col, setComputedColumnWidthsParam);\n      col.computedResizable = (typeof col.resizable !== 'boolean' ? resizable : col.resizable) || false;\n      return col;\n    });\n    visibleColumns = newColumns;\n    columnsMap = _objectSpread(_objectSpread({}, columnsMap), (0, _mapColumns.default)(newColumns, {\n      showWarnings: true\n    }));\n  }\n\n  var flexes = [];\n  var maxWidths = [];\n  var minWidths = [];\n  var minColumnsSize = 0;\n  var availableWidthForFlex = availableWidth;\n  visibleColumns.forEach(function (col) {\n    if (col.computedFlex == null) {\n      availableWidthForFlex -= col.computedWidth || col.computedDefaultWidth || col.computedMinWidth || 0;\n    }\n\n    flexes.push(col.computedFlex || 0);\n    maxWidths.push(col.computedMaxWidth || null);\n    minWidths.push(col.computedMinWidth || null);\n  });\n  availableWidthForFlex = Math.max(availableWidthForFlex, 0);\n  var flexWidths = (0, _computeFlexWidths.default)({\n    flexes: flexes,\n    availableSize: availableWidthForFlex,\n    maxWidths: maxWidths,\n    minWidths: minWidths\n  });\n  visibleColumns.forEach(function (col, index) {\n    if (col.computedFlex != null) {\n      col.computedWidth = flexWidths[index] || 0;\n      minColumnsSize += col.minWidth || 0;\n    } else {\n      minColumnsSize += col.computedWidth || 0;\n    }\n  });\n  var unlockedColumns = visibleColumns;\n  var lockedStartColumns = [];\n  var lockedEndColumns = [];\n\n  if (hasLockedStart || hasLockedEnd) {\n    unlockedColumns = groupColumn && hasLockedStart ? visibleColumns.filter(function (col) {\n      return !col.computedLocked && !col.groupColumn;\n    }) : visibleColumns.filter(function (col) {\n      return !col.computedLocked;\n    });\n    lockedStartColumns = hasLockedStart ? visibleColumns.filter(function (col) {\n      return col.computedLocked === 'start' || col.groupColumn;\n    }) : emptyArray;\n    lockedEndColumns = hasLockedEnd ? groupColumn && hasLockedStart ? visibleColumns.filter(function (col) {\n      return col.computedLocked === 'end' && !col.groupColumn;\n    }) : visibleColumns.filter(function (col) {\n      return col.computedLocked === 'end';\n    }) : emptyArray;\n    visibleColumns = [].concat((0, _toConsumableArray2.default)(lockedStartColumns), (0, _toConsumableArray2.default)(unlockedColumns), (0, _toConsumableArray2.default)(lockedEndColumns));\n  }\n\n  var visibleColumnsMap = (0, _mapColumns.default)(visibleColumns, {\n    showWarnings: true\n  });\n  var sumPrefixWidth = 0;\n  var totalLockedStartWidth = 0;\n  var totalLockedEndWidth = 0;\n  var totalUnlockedWidth = 0;\n  var columnWidthPrefixSums = [];\n  var computedHasColSpan = false;\n  visibleColumns.forEach(function (col, index, arr) {\n    col.computedVisibleIndex = index;\n    col.computedVisibleCount = arr.length;\n\n    if (col.colspan) {\n      computedHasColSpan = true;\n    }\n\n    col.computedOffset = sumPrefixWidth;\n    var computedLocked = col.computedLocked,\n        computedWidth = col.computedWidth;\n\n    if (computedLocked === 'start') {\n      totalLockedStartWidth += computedWidth || 0;\n    } else if (computedLocked === 'end') {\n      totalLockedEndWidth += computedWidth || 0;\n    } else {\n      totalUnlockedWidth += computedWidth || 0;\n    }\n\n    addSortInfo(col);\n\n    if (editable && col.editable === undefined) {\n      col.computedEditable = true;\n    }\n\n    if (col.editable !== undefined) {\n      col.computedEditable = col.editable;\n    }\n\n    columnWidthPrefixSums.push(col.computedOffset || 0);\n    sumPrefixWidth += computedWidth || 0;\n  });\n\n  if (pivot) {\n    pivot.forEach(function (pivotCol) {\n      if (typeof pivotCol !== 'string' && pivotCol.summaryReducer) {\n        pivotColumnSummaryReducers[pivotCol.name] = pivotCol.summaryReducer;\n      }\n    });\n  }\n\n  return {\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers,\n    minColumnsSize: minColumnsSize,\n    groupColumnSummaryReducers: Object.keys(groupColumnSummaryReducers).length ? groupColumnSummaryReducers : undefined,\n    totalComputedWidth: sumPrefixWidth,\n    totalLockedStartWidth: totalLockedStartWidth,\n    totalLockedEndWidth: totalLockedEndWidth,\n    totalUnlockedWidth: totalUnlockedWidth,\n    lockedStartColumns: lockedStartColumns,\n    lockedEndColumns: lockedEndColumns,\n    unlockedColumns: unlockedColumns,\n    columnWidthPrefixSums: columnWidthPrefixSums,\n    columnVisibilityMap: columnVisibilityMap,\n    computedEnableRowspan: computedEnableRowspan,\n    computedHasColSpan: computedHasColSpan,\n    visibleColumns: visibleColumns,\n    allColumns: normalizedColumns,\n    columnsMap: columnsMap,\n    visibleColumnsMap: visibleColumnsMap\n  };\n};\n\nexports.default = _default;\n\nvar getPivotGroupColumnForPath = function getPivotGroupColumnForPath(columnConfig, _ref2) {\n  var pivot = _ref2.pivot,\n      pivotGrandSummaryColumn = _ref2.pivotGrandSummaryColumn;\n  var pivotMap = pivot.reduce(function (acc, p) {\n    if (!p.summaryReducer) {\n      return acc;\n    }\n\n    var col = p ? p.summaryColumn || {} : {};\n    acc[p.name || p] = col;\n    return acc;\n  }, {});\n\n  if (pivotGrandSummaryColumn === true) {\n    pivotGrandSummaryColumn = {};\n  }\n\n  if (pivotGrandSummaryColumn) {\n    pivotGrandSummaryColumn.pivotGrandSummaryColumn = true;\n    pivotGrandSummaryColumn = _objectSpread(_objectSpread({}, defaultPivotGrandSummaryColumn), pivotGrandSummaryColumn);\n  }\n\n  columnConfig = _objectSpread(_objectSpread({}, defaultPivotSummaryColumn), columnConfig);\n  var _columnConfig = columnConfig,\n      pivotSummaryPath = _columnConfig.pivotSummaryPath;\n  var lastItem = pivotSummaryPath[pivotSummaryPath.length - 1];\n  var name = lastItem ? lastItem.field : null;\n  var col = !lastItem ? pivotGrandSummaryColumn : pivotMap[name] || {};\n  var result = columnConfig;\n\n  if (lastItem) {\n    columnConfig.header = \"Summary for \".concat(lastItem.field, \" \").concat(lastItem.value);\n  }\n\n  if (!pivotGrandSummaryColumn && !pivotMap[name]) {\n    return null;\n  }\n\n  if (col) {\n    if (typeof col === 'function') {\n      result = _objectSpread(_objectSpread({}, columnConfig), col(columnConfig));\n    } else {\n      result = _objectSpread(_objectSpread({}, columnConfig), col);\n    }\n  }\n\n  return result;\n};\n\nvar getPivotColumns = function getPivotColumns(aggregateColumns, uniqueValuesRoot, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns) {\n  var parentGroups = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : [];\n  var pivotColumnPath = arguments.length > 7 ? arguments[7] : undefined;\n  var newColumns = [];\n  var field = uniqueValuesRoot.field,\n      values = uniqueValuesRoot.values;\n  var parentGroup = parentGroups[parentGroups.length - 1];\n\n  if (field && values) {\n    Object.keys(values).forEach(function (value) {\n      var groupId = \"\".concat(parentGroup ? parentGroup.name + '_' : '').concat(field, \":\").concat(value);\n      var group = {\n        name: groupId,\n        header: \"\".concat(field, \"-\").concat(value),\n        pivotPath: [{\n          value: value,\n          field: field\n        }]\n      };\n\n      if (parentGroup) {\n        group.group = parentGroup.name;\n        group.pivotPath = [].concat((0, _toConsumableArray2.default)(parentGroup.pivotPath || []), (0, _toConsumableArray2.default)(group.pivotPath));\n      }\n\n      var nextRoot = values[value];\n      pivotColumnPath = pivotColumnPath || [];\n      newColumns.push.apply(newColumns, (0, _toConsumableArray2.default)(getPivotColumns(aggregateColumns, nextRoot, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns, [].concat((0, _toConsumableArray2.default)(parentGroups), [{\n        name: groupId,\n        pivotPath: group.pivotPath,\n        depth: parentGroup ? parentGroup.depth + 1 : 0\n      }]), [].concat((0, _toConsumableArray2.default)(pivotColumnPath), [value]))));\n\n      if (!parentGroup && showPivotSummaryColumns) {\n        var summaryCol = getPivotGroupColumnForPath({\n          header: \"Summary for \".concat(group.header),\n          id: \"__summary_\".concat(group.name),\n          pivotSummaryColumn: true,\n          pivotSummaryPath: group.pivotPath\n        }, {\n          pivot: pivot\n        });\n\n        if (summaryCol) {\n          newColumns.push(summaryCol);\n        }\n      }\n    });\n  } else {\n    newColumns.push.apply(newColumns, (0, _toConsumableArray2.default)(aggregateColumns.map(function (col) {\n      var result = _objectSpread(_objectSpread({}, col), {}, {\n        sortable: false,\n        showInContextMenu: false,\n        draggable: false,\n        pivotColumn: true,\n        pivotColumnPath: [].concat((0, _toConsumableArray2.default)(pivotColumnPath || []), [col.pivotName || col.name || col.id]),\n        id: \"\".concat(parentGroup.name, \"-\").concat(col.id),\n        group: parentGroup.name\n      });\n\n      if (columnSizes[result.id]) {\n        result.computedWidth = columnSizes[result.id];\n      }\n\n      return result;\n    })));\n    var prevParentGroup = parentGroups[parentGroups.length - 2];\n\n    if (showPivotSummaryColumns && prevParentGroup) {\n      var summaryCol = getPivotGroupColumnForPath({\n        group: prevParentGroup ? prevParentGroup.name : undefined,\n        header: \"Summary for \".concat(parentGroup.name, \" - \").concat(prevParentGroup ? prevParentGroup.name : ''),\n        id: \"__summary__\".concat(parentGroup.name),\n        pivotSummaryPath: parentGroup.pivotPath,\n        pivotSummaryColumn: true\n      }, {\n        pivot: pivot\n      });\n\n      if (summaryCol) {\n        newColumns.push(summaryCol);\n      }\n    }\n  }\n\n  if (!parentGroup && pivotGrandSummaryColumn && showPivotSummaryColumns) {\n    newColumns.push(getPivotGroupColumnForPath({\n      header: \"Grand summary\",\n      id: \"__summary__grand\",\n      pivotSummaryColumn: true,\n      pivotSummaryPath: []\n    }, {\n      pivot: pivot,\n      pivotGrandSummaryColumn: pivotGrandSummaryColumn\n    }));\n  }\n\n  return newColumns;\n};","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/normalizeColumns/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_toConsumableArray2","_defineProperty2","_setColumnId","_computeFlexWidths","_mapColumns","_defaultCheckColumnId","_defaultRowExpandColumnId","_defaultRowIndexColumnId","_defaultGroupColumnId","_defaultRowReorderColumnId","_setComputedColumnWidths","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","DEFAULT_COLUMN_PROPS","isColumn","keepFlex","defaultPivotGrandSummaryColumn","sortable","draggable","filterable","defaultPivotSummaryColumn","emptyArray","emptyObject","freeze","_default","_ref","_ref$generatedColumns","generatedColumnsLength","columns","columnMinWidth","columnMaxWidth","columnDefaultWidth","columnWidth","_ref$columnSizes","columnSizes","_ref$columnVisibility","columnVisibilityMap","_ref$columnFlexes","columnFlexes","_ref$lockedColumnsSta","lockedColumnsState","columnOrder","computedPivotUniqueValuesPerColumn","editable","pivot","resizable","pivotGrandSummaryColumn","lockable","checkboxColumn","rowIndexColumn","rtl","filterValueMap","sortInfo","showPivotSummaryColumns","_ref$availableWidth","availableWidth","onRowReorder","groupColumnSummaryReducers","pivotColumnSummaryReducers","addSortInfo","col","computedSortable","computedSortInfo","Array","isArray","info","name","id","sortName","addFilterValue","computedFilterable","undefined","computedFilterValue","hasLockedStart","hasLockedEnd","rowExpandColumn","setComputedColumnWidthsParam","hasDedicatedGroupColumn","normalizedColumns","map","column","computedInitialIndex","computedVisible","visible","groupSummaryReducer","computedHeader","header","computedLocked","locked","defaultLocked","normalizedCheckboxColumn","c","normalizedGroupColumn","groupColumn","autoLockColumns","autoLock","normalizedRowReorderColumn","computedEnableRowspan","index","computedAbsoluteIndex","rowspan","computedResizable","computedLockable","columnsMap","showWarnings","visibleColumns","checkboxColumnIndex","indexOf","concat","rowExpandColumnIndex","rowReorderColumnIndex","rowIndexColumnIndex","groupSpacerColumn","generatedColumns","generatedColumnIds","reduce","acc","groupSpacerColumns","groupColumns","ungroupColumns","colId","find","x","reducer","aggregateColumns","newColumns","getPivotColumns","flexes","maxWidths","minWidths","minColumnsSize","availableWidthForFlex","computedFlex","computedWidth","computedDefaultWidth","computedMinWidth","computedMaxWidth","Math","max","flexWidths","availableSize","minWidth","unlockedColumns","lockedStartColumns","lockedEndColumns","visibleColumnsMap","sumPrefixWidth","totalLockedStartWidth","totalLockedEndWidth","totalUnlockedWidth","columnWidthPrefixSums","computedHasColSpan","arr","computedVisibleIndex","computedVisibleCount","colspan","computedOffset","computedEditable","pivotCol","summaryReducer","totalComputedWidth","allColumns","getPivotGroupColumnForPath","columnConfig","_ref2","pivotMap","p","summaryColumn","_columnConfig","pivotSummaryPath","lastItem","field","result","uniqueValuesRoot","parentGroups","pivotColumnPath","values","parentGroup","groupId","group","pivotPath","nextRoot","depth","summaryCol","pivotSummaryColumn","showInContextMenu","pivotColumn","pivotName","prevParentGroup"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _setColumnId = _interopRequireDefault(require(\"../setColumnId\"));\n\nvar _computeFlexWidths = _interopRequireDefault(require(\"../utils/flex/computeFlexWidths\"));\n\nvar _mapColumns = _interopRequireDefault(require(\"../mapColumns\"));\n\nvar _defaultCheckColumnId = require(\"./defaultCheckColumnId\");\n\nvar _defaultRowExpandColumnId = require(\"./defaultRowExpandColumnId\");\n\nvar _defaultRowIndexColumnId = require(\"./defaultRowIndexColumnId\");\n\nvar _defaultGroupColumnId = require(\"./defaultGroupColumnId\");\n\nvar _defaultRowReorderColumnId = require(\"./defaultRowReorderColumnId\");\n\nvar _setComputedColumnWidths = _interopRequireDefault(require(\"./setComputedColumnWidths\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar DEFAULT_COLUMN_PROPS = {\n  isColumn: true,\n  keepFlex: true\n};\nvar defaultPivotGrandSummaryColumn = {\n  sortable: false,\n  draggable: false,\n  filterable: false\n};\nvar defaultPivotSummaryColumn = defaultPivotGrandSummaryColumn;\nvar emptyArray = [];\nvar emptyObject = Object.freeze ? Object.freeze({}) : {};\n\nvar _default = function _default(_ref) {\n  var _ref$generatedColumns = _ref.generatedColumnsLength,\n      generatedColumnsLength = _ref$generatedColumns === void 0 ? 0 : _ref$generatedColumns,\n      columns = _ref.columns,\n      columnMinWidth = _ref.columnMinWidth,\n      columnMaxWidth = _ref.columnMaxWidth,\n      columnDefaultWidth = _ref.columnDefaultWidth,\n      columnWidth = _ref.columnWidth,\n      _ref$columnSizes = _ref.columnSizes,\n      columnSizes = _ref$columnSizes === void 0 ? emptyObject : _ref$columnSizes,\n      _ref$columnVisibility = _ref.columnVisibilityMap,\n      columnVisibilityMap = _ref$columnVisibility === void 0 ? emptyObject : _ref$columnVisibility,\n      _ref$columnFlexes = _ref.columnFlexes,\n      columnFlexes = _ref$columnFlexes === void 0 ? emptyObject : _ref$columnFlexes,\n      _ref$lockedColumnsSta = _ref.lockedColumnsState,\n      lockedColumnsState = _ref$lockedColumnsSta === void 0 ? emptyObject : _ref$lockedColumnsSta,\n      columnOrder = _ref.columnOrder,\n      computedPivotUniqueValuesPerColumn = _ref.computedPivotUniqueValuesPerColumn,\n      editable = _ref.editable,\n      pivot = _ref.pivot,\n      sortable = _ref.sortable,\n      filterable = _ref.filterable,\n      resizable = _ref.resizable,\n      pivotGrandSummaryColumn = _ref.pivotGrandSummaryColumn,\n      lockable = _ref.lockable,\n      checkboxColumn = _ref.checkboxColumn,\n      rowIndexColumn = _ref.rowIndexColumn,\n      filter = _ref.filter,\n      rtl = _ref.rtl,\n      filterValueMap = _ref.filterValueMap,\n      sortInfo = _ref.sortInfo,\n      showPivotSummaryColumns = _ref.showPivotSummaryColumns,\n      _ref$availableWidth = _ref.availableWidth,\n      availableWidth = _ref$availableWidth === void 0 ? 0 : _ref$availableWidth,\n      onRowReorder = _ref.onRowReorder;\n\n  if (columnVisibilityMap) {\n    columnVisibilityMap = _objectSpread({}, columnVisibilityMap);\n  }\n\n  var groupColumnSummaryReducers = {};\n  var pivotColumnSummaryReducers = {};\n\n  var addSortInfo = function addSortInfo(col) {\n    col.computedSortable = (typeof col.sortable === 'boolean' ? col.sortable : sortable) || false;\n    col.computedSortInfo = null;\n\n    if (col.computedSortable && sortInfo) {\n      col.computedSortInfo = Array.isArray(sortInfo) ? sortInfo.filter(function (info) {\n        return info.name === col.id || info.id === col.id || info.name === col.sortName;\n      })[0] : sortInfo.name === col.id || sortInfo.id === col.id || sortInfo.name === col.sortName ? sortInfo : null;\n    }\n  };\n\n  var addFilterValue = function addFilterValue(col) {\n    col.computedFilterable = (typeof col.filterable === 'boolean' ? col.filterable : filterable) || undefined;\n    col.computedFilterValue = null;\n\n    if (col.computedFilterable && filterValueMap) {\n      col.computedFilterValue = filterValueMap[col.id];\n    }\n\n    if (col.computedFilterable === undefined && col.computedFilterValue) {\n      col.computedFilterable = true;\n    }\n\n    col.computedFilterable = !!col.computedFilterable;\n  };\n\n  var hasLockedStart = false;\n  var hasLockedEnd = false;\n  var rowExpandColumn;\n  var setComputedColumnWidthsParam = {\n    columnFlexes: columnFlexes,\n    columnSizes: columnSizes,\n    columnDefaultWidth: columnDefaultWidth,\n    columnWidth: columnWidth,\n    columnMinWidth: columnMinWidth,\n    columnMaxWidth: columnMaxWidth\n  };\n  var hasDedicatedGroupColumn = false;\n  var normalizedColumns = columns.map(function (column) {\n    return _objectSpread(_objectSpread({}, DEFAULT_COLUMN_PROPS), column);\n  }).map(_setColumnId.default).map(function (col, i) {\n    col.computedInitialIndex = i - generatedColumnsLength;\n    (0, _setComputedColumnWidths.default)(col, setComputedColumnWidthsParam);\n    col.computedVisible = col.visible !== undefined ? !!col.visible : columnVisibilityMap[col.id] === false ? false : true;\n\n    if (col.computedVisible && pivot && !col.groupSummaryReducer && col.id !== _defaultGroupColumnId.id) {\n      col.computedVisible = false;\n    }\n\n    if (col.computedVisible === false) {\n      columnVisibilityMap[col.id] = false;\n    } else {\n      delete columnVisibilityMap[col.id];\n\n      if (col.id === _defaultGroupColumnId.id) {\n        hasDedicatedGroupColumn = true;\n      }\n    }\n\n    col.computedHeader = col.header === undefined ? col.name || '' : col.header;\n    col.computedLocked = col.locked;\n\n    if (col.computedLocked === undefined && lockedColumnsState[col.id] !== undefined) {\n      col.computedLocked = lockedColumnsState[col.id];\n    }\n\n    if (col.computedLocked === undefined && col.defaultLocked !== undefined) {\n      col.computedLocked = col.defaultLocked;\n    }\n\n    if (!filter || filter(col)) {\n      if (col.computedLocked === true || col.computedLocked === 'start') {\n        col.computedLocked = 'start';\n        hasLockedStart = true;\n      }\n\n      if (col.computedLocked === 'end') {\n        hasLockedEnd = true;\n      }\n    }\n\n    col.computedLocked = col.computedLocked || false;\n\n    if (col.id === _defaultRowExpandColumnId.id) {\n      rowExpandColumn = col;\n    }\n\n    return col;\n  });\n\n  if (hasLockedStart) {\n    if (rowExpandColumn != null) {\n      rowExpandColumn.computedLocked = 'start';\n    }\n\n    if (checkboxColumn) {\n      var normalizedCheckboxColumn = normalizedColumns.filter(function (c) {\n        return c.checkboxColumn && c.id == _defaultCheckColumnId.id;\n      })[0];\n\n      if (normalizedCheckboxColumn) {\n        normalizedCheckboxColumn.computedLocked = 'start';\n      }\n    }\n\n    if (hasDedicatedGroupColumn) {\n      var normalizedGroupColumn = normalizedColumns.filter(function (c) {\n        return c.groupColumn && c.id == _defaultGroupColumnId.id;\n      })[0];\n\n      if (normalizedGroupColumn) {\n        normalizedGroupColumn.computedLocked = 'start';\n      }\n    }\n\n    var autoLockColumns = normalizedColumns.filter(function (c) {\n      return !!c.autoLock;\n    });\n\n    if (autoLockColumns.length) {\n      autoLockColumns.forEach(function (c) {\n        c.computedLocked = 'start';\n      });\n    }\n\n    if (onRowReorder && (typeof onRowReorder === 'function' || typeof onRowReorder === 'boolean')) {\n      var normalizedRowReorderColumn = normalizedColumns.filter(function (c) {\n        return c.id === _defaultRowReorderColumnId.id;\n      })[0];\n\n      if (normalizedRowReorderColumn) {\n        normalizedRowReorderColumn.computedLocked = 'start';\n      }\n    }\n  }\n\n  var computedEnableRowspan = false;\n  normalizedColumns.forEach(function (col, index) {\n    col.computedAbsoluteIndex = index;\n    addSortInfo(col);\n    addFilterValue(col);\n\n    if (typeof col.rowspan === 'function') {\n      computedEnableRowspan = true;\n    }\n\n    col.computedResizable = (typeof col.resizable !== 'boolean' ? resizable : col.resizable) || false;\n    col.computedLockable = (typeof col.lockable !== 'boolean' ? lockable : col.lockable) || false;\n  });\n  var columnsMap = (0, _mapColumns.default)(normalizedColumns, {\n    showWarnings: true\n  });\n  var visibleColumns = normalizedColumns.filter(function (c) {\n    return c.computedVisible !== false;\n  });\n\n  if (columnOrder) {\n    if (checkboxColumn) {\n      var checkboxColumnIndex = columnOrder.indexOf(_defaultCheckColumnId.id);\n\n      if (checkboxColumnIndex == -1) {\n        columnOrder = [_defaultCheckColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder));\n      }\n    }\n  }\n\n  if (rowExpandColumn) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowExpandColumnIndex = columnOrder.indexOf(_defaultRowExpandColumnId.id);\n\n    if (rowExpandColumnIndex !== 0) {\n      columnOrder = [_defaultRowExpandColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        return id != _defaultRowExpandColumnId.id;\n      })));\n    }\n  }\n\n  if (onRowReorder && (typeof onRowReorder === 'function' || typeof onRowReorder === 'boolean')) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowReorderColumnIndex = columnOrder.indexOf(_defaultRowReorderColumnId.id);\n\n    if (rowReorderColumnIndex !== 0) {\n      columnOrder = [_defaultRowReorderColumnId.id].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        return id !== _defaultRowReorderColumnId.id;\n      })));\n    }\n  }\n\n  if (rowIndexColumn) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var rowIndexColumnIndex = columnOrder.indexOf(_defaultRowIndexColumnId.id);\n\n    if (rowIndexColumnIndex != 0) {\n      columnOrder = [].concat((0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        var col = columnsMap[id];\n        return col && col.groupSpacerColumn;\n      })), [_defaultRowIndexColumnId.id], (0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n        var col = columnsMap[id];\n\n        if (!col) {\n          return false;\n        }\n\n        return id != _defaultRowIndexColumnId.id && !col.groupSpacerColumn;\n      })));\n    }\n  }\n\n  if (generatedColumnsLength) {\n    if (!columnOrder) {\n      columnOrder = visibleColumns.map(function (c) {\n        return c.id;\n      });\n    }\n\n    var generatedColumns = visibleColumns.filter(function (c) {\n      return c.groupSpacerColumn;\n    });\n    var generatedColumnIds = generatedColumns.reduce(function (acc, col) {\n      acc[col.id] = true;\n      return acc;\n    }, {});\n    columnOrder = [].concat((0, _toConsumableArray2.default)(generatedColumns.map(function (c) {\n      return c.id;\n    })), (0, _toConsumableArray2.default)(columnOrder.filter(function (id) {\n      return !generatedColumnIds[id];\n    })));\n  }\n\n  if (columnOrder) {\n    var groupSpacerColumns = visibleColumns.filter(function (col) {\n      return col.groupSpacerColumn;\n    });\n    var groupColumns = visibleColumns.filter(function (col) {\n      return col.groupColumn && !col.groupSpacerColumn;\n    });\n    var ungroupColumns = visibleColumns.filter(function (col) {\n      return !col.groupColumn && !col.groupSpacerColumn;\n    });\n    visibleColumns = columnOrder.map(function (colId) {\n      return ungroupColumns.find(function (col) {\n        return col.id == colId;\n      });\n    }).filter(function (x) {\n      return !!x;\n    });\n    visibleColumns = [].concat((0, _toConsumableArray2.default)(groupSpacerColumns), (0, _toConsumableArray2.default)(groupColumns), (0, _toConsumableArray2.default)(visibleColumns));\n  }\n\n  if (typeof filter == 'function') {\n    visibleColumns = visibleColumns.filter(filter);\n  }\n\n  normalizedColumns.forEach(function (col) {\n    if (col.groupSummaryReducer) {\n      groupColumnSummaryReducers[col.id] = col.groupSummaryReducer;\n\n      if (!col.groupSummaryReducer.reducer && col.groupSummaryReducer.reduce) {\n        groupColumnSummaryReducers[col.id].reducer = col.groupSummaryReducer.reduce;\n      }\n    }\n  });\n  var groupColumn = visibleColumns.filter(function (col) {\n    return !!col.groupColumn;\n  })[0];\n\n  if (pivot && computedPivotUniqueValuesPerColumn && groupColumn) {\n    var aggregateColumns = visibleColumns.filter(function (col) {\n      return !!col.groupSummaryReducer;\n    });\n    var newColumns = [groupColumn].concat((0, _toConsumableArray2.default)(getPivotColumns(aggregateColumns, computedPivotUniqueValuesPerColumn, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns))).map(function (col) {\n      (0, _setComputedColumnWidths.default)(col, setComputedColumnWidthsParam);\n      col.computedResizable = (typeof col.resizable !== 'boolean' ? resizable : col.resizable) || false;\n      return col;\n    });\n    visibleColumns = newColumns;\n    columnsMap = _objectSpread(_objectSpread({}, columnsMap), (0, _mapColumns.default)(newColumns, {\n      showWarnings: true\n    }));\n  }\n\n  var flexes = [];\n  var maxWidths = [];\n  var minWidths = [];\n  var minColumnsSize = 0;\n  var availableWidthForFlex = availableWidth;\n  visibleColumns.forEach(function (col) {\n    if (col.computedFlex == null) {\n      availableWidthForFlex -= col.computedWidth || col.computedDefaultWidth || col.computedMinWidth || 0;\n    }\n\n    flexes.push(col.computedFlex || 0);\n    maxWidths.push(col.computedMaxWidth || null);\n    minWidths.push(col.computedMinWidth || null);\n  });\n  availableWidthForFlex = Math.max(availableWidthForFlex, 0);\n  var flexWidths = (0, _computeFlexWidths.default)({\n    flexes: flexes,\n    availableSize: availableWidthForFlex,\n    maxWidths: maxWidths,\n    minWidths: minWidths\n  });\n  visibleColumns.forEach(function (col, index) {\n    if (col.computedFlex != null) {\n      col.computedWidth = flexWidths[index] || 0;\n      minColumnsSize += col.minWidth || 0;\n    } else {\n      minColumnsSize += col.computedWidth || 0;\n    }\n  });\n  var unlockedColumns = visibleColumns;\n  var lockedStartColumns = [];\n  var lockedEndColumns = [];\n\n  if (hasLockedStart || hasLockedEnd) {\n    unlockedColumns = groupColumn && hasLockedStart ? visibleColumns.filter(function (col) {\n      return !col.computedLocked && !col.groupColumn;\n    }) : visibleColumns.filter(function (col) {\n      return !col.computedLocked;\n    });\n    lockedStartColumns = hasLockedStart ? visibleColumns.filter(function (col) {\n      return col.computedLocked === 'start' || col.groupColumn;\n    }) : emptyArray;\n    lockedEndColumns = hasLockedEnd ? groupColumn && hasLockedStart ? visibleColumns.filter(function (col) {\n      return col.computedLocked === 'end' && !col.groupColumn;\n    }) : visibleColumns.filter(function (col) {\n      return col.computedLocked === 'end';\n    }) : emptyArray;\n    visibleColumns = [].concat((0, _toConsumableArray2.default)(lockedStartColumns), (0, _toConsumableArray2.default)(unlockedColumns), (0, _toConsumableArray2.default)(lockedEndColumns));\n  }\n\n  var visibleColumnsMap = (0, _mapColumns.default)(visibleColumns, {\n    showWarnings: true\n  });\n  var sumPrefixWidth = 0;\n  var totalLockedStartWidth = 0;\n  var totalLockedEndWidth = 0;\n  var totalUnlockedWidth = 0;\n  var columnWidthPrefixSums = [];\n  var computedHasColSpan = false;\n  visibleColumns.forEach(function (col, index, arr) {\n    col.computedVisibleIndex = index;\n    col.computedVisibleCount = arr.length;\n\n    if (col.colspan) {\n      computedHasColSpan = true;\n    }\n\n    col.computedOffset = sumPrefixWidth;\n    var computedLocked = col.computedLocked,\n        computedWidth = col.computedWidth;\n\n    if (computedLocked === 'start') {\n      totalLockedStartWidth += computedWidth || 0;\n    } else if (computedLocked === 'end') {\n      totalLockedEndWidth += computedWidth || 0;\n    } else {\n      totalUnlockedWidth += computedWidth || 0;\n    }\n\n    addSortInfo(col);\n\n    if (editable && col.editable === undefined) {\n      col.computedEditable = true;\n    }\n\n    if (col.editable !== undefined) {\n      col.computedEditable = col.editable;\n    }\n\n    columnWidthPrefixSums.push(col.computedOffset || 0);\n    sumPrefixWidth += computedWidth || 0;\n  });\n\n  if (pivot) {\n    pivot.forEach(function (pivotCol) {\n      if (typeof pivotCol !== 'string' && pivotCol.summaryReducer) {\n        pivotColumnSummaryReducers[pivotCol.name] = pivotCol.summaryReducer;\n      }\n    });\n  }\n\n  return {\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers,\n    minColumnsSize: minColumnsSize,\n    groupColumnSummaryReducers: Object.keys(groupColumnSummaryReducers).length ? groupColumnSummaryReducers : undefined,\n    totalComputedWidth: sumPrefixWidth,\n    totalLockedStartWidth: totalLockedStartWidth,\n    totalLockedEndWidth: totalLockedEndWidth,\n    totalUnlockedWidth: totalUnlockedWidth,\n    lockedStartColumns: lockedStartColumns,\n    lockedEndColumns: lockedEndColumns,\n    unlockedColumns: unlockedColumns,\n    columnWidthPrefixSums: columnWidthPrefixSums,\n    columnVisibilityMap: columnVisibilityMap,\n    computedEnableRowspan: computedEnableRowspan,\n    computedHasColSpan: computedHasColSpan,\n    visibleColumns: visibleColumns,\n    allColumns: normalizedColumns,\n    columnsMap: columnsMap,\n    visibleColumnsMap: visibleColumnsMap\n  };\n};\n\nexports.default = _default;\n\nvar getPivotGroupColumnForPath = function getPivotGroupColumnForPath(columnConfig, _ref2) {\n  var pivot = _ref2.pivot,\n      pivotGrandSummaryColumn = _ref2.pivotGrandSummaryColumn;\n  var pivotMap = pivot.reduce(function (acc, p) {\n    if (!p.summaryReducer) {\n      return acc;\n    }\n\n    var col = p ? p.summaryColumn || {} : {};\n    acc[p.name || p] = col;\n    return acc;\n  }, {});\n\n  if (pivotGrandSummaryColumn === true) {\n    pivotGrandSummaryColumn = {};\n  }\n\n  if (pivotGrandSummaryColumn) {\n    pivotGrandSummaryColumn.pivotGrandSummaryColumn = true;\n    pivotGrandSummaryColumn = _objectSpread(_objectSpread({}, defaultPivotGrandSummaryColumn), pivotGrandSummaryColumn);\n  }\n\n  columnConfig = _objectSpread(_objectSpread({}, defaultPivotSummaryColumn), columnConfig);\n  var _columnConfig = columnConfig,\n      pivotSummaryPath = _columnConfig.pivotSummaryPath;\n  var lastItem = pivotSummaryPath[pivotSummaryPath.length - 1];\n  var name = lastItem ? lastItem.field : null;\n  var col = !lastItem ? pivotGrandSummaryColumn : pivotMap[name] || {};\n  var result = columnConfig;\n\n  if (lastItem) {\n    columnConfig.header = \"Summary for \".concat(lastItem.field, \" \").concat(lastItem.value);\n  }\n\n  if (!pivotGrandSummaryColumn && !pivotMap[name]) {\n    return null;\n  }\n\n  if (col) {\n    if (typeof col === 'function') {\n      result = _objectSpread(_objectSpread({}, columnConfig), col(columnConfig));\n    } else {\n      result = _objectSpread(_objectSpread({}, columnConfig), col);\n    }\n  }\n\n  return result;\n};\n\nvar getPivotColumns = function getPivotColumns(aggregateColumns, uniqueValuesRoot, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns) {\n  var parentGroups = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : [];\n  var pivotColumnPath = arguments.length > 7 ? arguments[7] : undefined;\n  var newColumns = [];\n  var field = uniqueValuesRoot.field,\n      values = uniqueValuesRoot.values;\n  var parentGroup = parentGroups[parentGroups.length - 1];\n\n  if (field && values) {\n    Object.keys(values).forEach(function (value) {\n      var groupId = \"\".concat(parentGroup ? parentGroup.name + '_' : '').concat(field, \":\").concat(value);\n      var group = {\n        name: groupId,\n        header: \"\".concat(field, \"-\").concat(value),\n        pivotPath: [{\n          value: value,\n          field: field\n        }]\n      };\n\n      if (parentGroup) {\n        group.group = parentGroup.name;\n        group.pivotPath = [].concat((0, _toConsumableArray2.default)(parentGroup.pivotPath || []), (0, _toConsumableArray2.default)(group.pivotPath));\n      }\n\n      var nextRoot = values[value];\n      pivotColumnPath = pivotColumnPath || [];\n      newColumns.push.apply(newColumns, (0, _toConsumableArray2.default)(getPivotColumns(aggregateColumns, nextRoot, columnSizes, pivot, pivotGrandSummaryColumn, showPivotSummaryColumns, [].concat((0, _toConsumableArray2.default)(parentGroups), [{\n        name: groupId,\n        pivotPath: group.pivotPath,\n        depth: parentGroup ? parentGroup.depth + 1 : 0\n      }]), [].concat((0, _toConsumableArray2.default)(pivotColumnPath), [value]))));\n\n      if (!parentGroup && showPivotSummaryColumns) {\n        var summaryCol = getPivotGroupColumnForPath({\n          header: \"Summary for \".concat(group.header),\n          id: \"__summary_\".concat(group.name),\n          pivotSummaryColumn: true,\n          pivotSummaryPath: group.pivotPath\n        }, {\n          pivot: pivot\n        });\n\n        if (summaryCol) {\n          newColumns.push(summaryCol);\n        }\n      }\n    });\n  } else {\n    newColumns.push.apply(newColumns, (0, _toConsumableArray2.default)(aggregateColumns.map(function (col) {\n      var result = _objectSpread(_objectSpread({}, col), {}, {\n        sortable: false,\n        showInContextMenu: false,\n        draggable: false,\n        pivotColumn: true,\n        pivotColumnPath: [].concat((0, _toConsumableArray2.default)(pivotColumnPath || []), [col.pivotName || col.name || col.id]),\n        id: \"\".concat(parentGroup.name, \"-\").concat(col.id),\n        group: parentGroup.name\n      });\n\n      if (columnSizes[result.id]) {\n        result.computedWidth = columnSizes[result.id];\n      }\n\n      return result;\n    })));\n    var prevParentGroup = parentGroups[parentGroups.length - 2];\n\n    if (showPivotSummaryColumns && prevParentGroup) {\n      var summaryCol = getPivotGroupColumnForPath({\n        group: prevParentGroup ? prevParentGroup.name : undefined,\n        header: \"Summary for \".concat(parentGroup.name, \" - \").concat(prevParentGroup ? prevParentGroup.name : ''),\n        id: \"__summary__\".concat(parentGroup.name),\n        pivotSummaryPath: parentGroup.pivotPath,\n        pivotSummaryColumn: true\n      }, {\n        pivot: pivot\n      });\n\n      if (summaryCol) {\n        newColumns.push(summaryCol);\n      }\n    }\n  }\n\n  if (!parentGroup && pivotGrandSummaryColumn && showPivotSummaryColumns) {\n    newColumns.push(getPivotGroupColumnForPath({\n      header: \"Grand summary\",\n      id: \"__summary__grand\",\n      pivotSummaryColumn: true,\n      pivotSummaryPath: []\n    }, {\n      pivot: pivot,\n      pivotGrandSummaryColumn: pivotGrandSummaryColumn\n    }));\n  }\n\n  return newColumns;\n};"]},"metadata":{},"sourceType":"script"}