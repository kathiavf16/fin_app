{"ast":null,"code":"/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _regionAlign = _interopRequireDefault(require(\"../region-align\"));\n\nvar _once = _interopRequireDefault(require(\"./utils/once\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../isMobile\"));\n\nvar Helper = function Helper(config) {\n  this.config = config;\n};\n\nvar EVENTS = {\n  move: _isMobile.default ? 'touchmove' : 'mousemove',\n  up: _isMobile.default ? 'touchend' : 'mouseup'\n};\n\nfunction emptyFn() {}\n\nfunction getPageCoords(event) {\n  var firstTouch;\n  var pageX = event.pageX;\n  var pageY = event.pageY;\n\n  if (_isMobile.default && event.touches && (firstTouch = event.touches[0])) {\n    pageX = firstTouch.pageX;\n    pageY = firstTouch.pageY;\n  }\n\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n\nObject.assign(Helper.prototype, {\n  initDrag: function initDrag(event) {\n    this.onDragInit(event);\n    var events = this.config.events || EVENTS;\n    var onDragStart = (0, _once.default)(this.onDragStart, this);\n    var target = _isMobile.default ? event.target : global;\n\n    var mouseUpListener = function (event) {\n      this.onDrop(event);\n      target.removeEventListener(events.move, mouseMoveListener);\n      target.removeEventListener(events.up, mouseUpListener);\n    }.bind(this);\n\n    var mouseMoveListener = function (event) {\n      if (!_isMobile.default && event.which !== 1) {\n        mouseUpListener(event);\n        return;\n      }\n\n      onDragStart(event);\n      this.onDrag(event);\n    }.bind(this);\n\n    target.addEventListener(events.move, mouseMoveListener, false);\n    target.addEventListener(events.up, mouseUpListener);\n  },\n  onDragInit: function onDragInit(event) {\n    var config = {\n      diff: {\n        left: 0,\n        top: 0\n      }\n    };\n    this.state = {\n      config: config\n    };\n\n    if (this.config.region) {\n      this.state.initialRegion = _regionAlign.default.from(this.config.region);\n      this.state.dragRegion = config.dragRegion = this.state.initialRegion.clone();\n    }\n\n    if (this.config.constrainTo) {\n      this.state.constrainTo = _regionAlign.default.from(this.config.constrainTo);\n    }\n\n    this.callConfig('onDragInit', event);\n  },\n  onDragStart: function onDragStart(event) {\n    this.state.initPageCoords = getPageCoords(event);\n    this.state.didDrag = this.state.config.didDrag = true;\n    this.callConfig('onDragStart', event);\n  },\n  onDrag: function onDrag(event) {\n    var config = this.state.config;\n    var initPageCoords = this.state.initPageCoords;\n    var eventCoords = getPageCoords(event);\n    var diff = config.diff = {\n      left: eventCoords.pageX - initPageCoords.pageX,\n      top: eventCoords.pageY - initPageCoords.pageY\n    };\n\n    if (this.state.initialRegion) {\n      var dragRegion = config.dragRegion;\n      dragRegion.set(this.state.initialRegion);\n      dragRegion.shift(diff);\n\n      if (this.state.constrainTo) {\n        var boolConstrained = dragRegion.constrainTo(this.state.constrainTo);\n        diff.left = dragRegion.left - this.state.initialRegion.left;\n        diff.top = dragRegion.top - this.state.initialRegion.top;\n      }\n\n      config.dragRegion = dragRegion;\n    }\n\n    this.callConfig('onDrag', event);\n  },\n  onDrop: function onDrop(event) {\n    this.callConfig('onDrop', event);\n    this.state = null;\n  },\n  callConfig: function callConfig(fnName, event) {\n    var config = this.state.config;\n    var args = [event, config];\n    var fn = this.config[fnName];\n\n    if (fn) {\n      fn.apply(this, args);\n    }\n  }\n});\n\nfunction _default(event, config) {\n  if (config.scope) {\n    var skippedKeys = {\n      scope: 1,\n      region: 1,\n      constrainTo: 1\n    };\n    Object.keys(config).forEach(function (key) {\n      var value = config[key];\n\n      if (key in skippedKeys) {\n        return;\n      }\n\n      if (typeof value == 'function') {\n        config[key] = value.bind(config.scope);\n      }\n    });\n  }\n\n  var helper = new Helper(config);\n  helper.initDrag(event);\n  return helper;\n}","map":{"version":3,"sources":["/Users/kathiavargas/node_modules/@inovua/reactdatagrid-community/packages/drag-helper/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_default","_regionAlign","_once","_isMobile","Helper","config","EVENTS","move","up","emptyFn","getPageCoords","event","firstTouch","pageX","pageY","touches","assign","prototype","initDrag","onDragInit","events","onDragStart","target","global","mouseUpListener","onDrop","removeEventListener","mouseMoveListener","bind","which","onDrag","addEventListener","diff","left","top","state","region","initialRegion","from","dragRegion","clone","constrainTo","callConfig","initPageCoords","didDrag","eventCoords","set","shift","boolConstrained","fnName","args","fn","apply","scope","skippedKeys","keys","forEach","key","helper"],"mappings":"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","sourcesContent":["/** \n * Copyright (c) INOVUA SOFTWARE TECHNOLOGIES.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _regionAlign = _interopRequireDefault(require(\"../region-align\"));\n\nvar _once = _interopRequireDefault(require(\"./utils/once\"));\n\nvar _isMobile = _interopRequireDefault(require(\"../isMobile\"));\n\nvar Helper = function Helper(config) {\n  this.config = config;\n};\n\nvar EVENTS = {\n  move: _isMobile.default ? 'touchmove' : 'mousemove',\n  up: _isMobile.default ? 'touchend' : 'mouseup'\n};\n\nfunction emptyFn() {}\n\nfunction getPageCoords(event) {\n  var firstTouch;\n  var pageX = event.pageX;\n  var pageY = event.pageY;\n\n  if (_isMobile.default && event.touches && (firstTouch = event.touches[0])) {\n    pageX = firstTouch.pageX;\n    pageY = firstTouch.pageY;\n  }\n\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n\nObject.assign(Helper.prototype, {\n  initDrag: function initDrag(event) {\n    this.onDragInit(event);\n    var events = this.config.events || EVENTS;\n    var onDragStart = (0, _once.default)(this.onDragStart, this);\n    var target = _isMobile.default ? event.target : global;\n\n    var mouseUpListener = function (event) {\n      this.onDrop(event);\n      target.removeEventListener(events.move, mouseMoveListener);\n      target.removeEventListener(events.up, mouseUpListener);\n    }.bind(this);\n\n    var mouseMoveListener = function (event) {\n      if (!_isMobile.default && event.which !== 1) {\n        mouseUpListener(event);\n        return;\n      }\n\n      onDragStart(event);\n      this.onDrag(event);\n    }.bind(this);\n\n    target.addEventListener(events.move, mouseMoveListener, false);\n    target.addEventListener(events.up, mouseUpListener);\n  },\n  onDragInit: function onDragInit(event) {\n    var config = {\n      diff: {\n        left: 0,\n        top: 0\n      }\n    };\n    this.state = {\n      config: config\n    };\n\n    if (this.config.region) {\n      this.state.initialRegion = _regionAlign.default.from(this.config.region);\n      this.state.dragRegion = config.dragRegion = this.state.initialRegion.clone();\n    }\n\n    if (this.config.constrainTo) {\n      this.state.constrainTo = _regionAlign.default.from(this.config.constrainTo);\n    }\n\n    this.callConfig('onDragInit', event);\n  },\n  onDragStart: function onDragStart(event) {\n    this.state.initPageCoords = getPageCoords(event);\n    this.state.didDrag = this.state.config.didDrag = true;\n    this.callConfig('onDragStart', event);\n  },\n  onDrag: function onDrag(event) {\n    var config = this.state.config;\n    var initPageCoords = this.state.initPageCoords;\n    var eventCoords = getPageCoords(event);\n    var diff = config.diff = {\n      left: eventCoords.pageX - initPageCoords.pageX,\n      top: eventCoords.pageY - initPageCoords.pageY\n    };\n\n    if (this.state.initialRegion) {\n      var dragRegion = config.dragRegion;\n      dragRegion.set(this.state.initialRegion);\n      dragRegion.shift(diff);\n\n      if (this.state.constrainTo) {\n        var boolConstrained = dragRegion.constrainTo(this.state.constrainTo);\n        diff.left = dragRegion.left - this.state.initialRegion.left;\n        diff.top = dragRegion.top - this.state.initialRegion.top;\n      }\n\n      config.dragRegion = dragRegion;\n    }\n\n    this.callConfig('onDrag', event);\n  },\n  onDrop: function onDrop(event) {\n    this.callConfig('onDrop', event);\n    this.state = null;\n  },\n  callConfig: function callConfig(fnName, event) {\n    var config = this.state.config;\n    var args = [event, config];\n    var fn = this.config[fnName];\n\n    if (fn) {\n      fn.apply(this, args);\n    }\n  }\n});\n\nfunction _default(event, config) {\n  if (config.scope) {\n    var skippedKeys = {\n      scope: 1,\n      region: 1,\n      constrainTo: 1\n    };\n    Object.keys(config).forEach(function (key) {\n      var value = config[key];\n\n      if (key in skippedKeys) {\n        return;\n      }\n\n      if (typeof value == 'function') {\n        config[key] = value.bind(config.scope);\n      }\n    });\n  }\n\n  var helper = new Helper(config);\n  helper.initDrag(event);\n  return helper;\n}"]},"metadata":{},"sourceType":"script"}